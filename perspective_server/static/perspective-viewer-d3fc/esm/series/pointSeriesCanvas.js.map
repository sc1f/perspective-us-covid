{"version":3,"sources":["../../../src/js/series/pointSeriesCanvas.js"],"names":["seriesCanvasPoint","withOpacity","withoutOpacity","groupFromKey","fromDomain","pointSeriesCanvas","settings","seriesKey","size","color","symbols","series","crossValue","d","x","mainValue","y","type","decorate","context","colorValue","undefined","opacity","colorStyles","strokeStyle","fillStyle","symbolTypeFromGroups","col","data","length","domain","Object","keys","forEach","key","group","includes","push"],"mappings":"AAAA;;;;;;;;AAQA,SAAQA,iBAAR,QAAgC,MAAhC;AACA,SAAQC,WAAR,EAAqBC,cAArB,QAA0C,gBAA1C;AACA,SAAQC,YAAR,QAA2B,aAA3B;AACA,SAAQC,UAAR,QAAyB,iBAAzB;AAEA,OAAO,SAASC,iBAAT,CAA2BC,QAA3B,EAAqCC,SAArC,EAAgDC,IAAhD,EAAsDC,KAAtD,EAA6DC,OAA7D,EAAsE;AACzE,MAAIC,MAAM,GAAGX,iBAAiB,GACzBY,UADQ,CACGC,CAAC,IAAIA,CAAC,CAACC,CADV,EAERC,SAFQ,CAEEF,CAAC,IAAIA,CAAC,CAACG,CAFT,CAAb;;AAIA,MAAIR,IAAJ,EAAU;AACNG,IAAAA,MAAM,CAACH,IAAP,CAAYK,CAAC,IAAIL,IAAI,CAACK,CAAC,CAACL,IAAH,CAArB;AACH;;AACD,MAAIE,OAAJ,EAAa;AACTC,IAAAA,MAAM,CAACM,IAAP,CAAYP,OAAO,CAACH,SAAD,CAAnB;AACH;;AAEDI,EAAAA,MAAM,CAACO,QAAP,CAAgB,CAACC,OAAD,EAAUN,CAAV,KAAgB;AAC5B,UAAMO,UAAU,GAAGX,KAAK,CAACI,CAAC,CAACO,UAAF,KAAiBC,SAAjB,GAA6BR,CAAC,CAACO,UAA/B,GAA4Cb,SAA7C,CAAxB;AACA,UAAMe,OAAO,GAAGhB,QAAQ,CAACiB,WAAT,IAAwBjB,QAAQ,CAACiB,WAAT,CAAqBD,OAA7D;AAEAH,IAAAA,OAAO,CAACK,WAAR,GAAsBtB,cAAc,CAACkB,UAAD,CAApC;AACAD,IAAAA,OAAO,CAACM,SAAR,GAAoBxB,WAAW,CAACmB,UAAD,EAAaE,OAAb,CAA/B;AACH,GAND;AAQA,SAAOX,MAAP;AACH;AAED,OAAO,SAASe,oBAAT,CAA8BpB,QAA9B,EAAwC;AAC3C,QAAMqB,GAAG,GAAGrB,QAAQ,CAACsB,IAAT,IAAiBtB,QAAQ,CAACsB,IAAT,CAAcC,MAAd,GAAuB,CAAxC,GAA4CvB,QAAQ,CAACsB,IAAT,CAAc,CAAd,CAA5C,GAA+D,EAA3E;AACA,QAAME,MAAM,GAAG,EAAf;AACAC,EAAAA,MAAM,CAACC,IAAP,CAAYL,GAAZ,EAAiBM,OAAjB,CAAyBC,GAAG,IAAI;AAC5B,QAAIA,GAAG,KAAK,cAAZ,EAA4B;AACxB,YAAMC,KAAK,GAAGhC,YAAY,CAAC+B,GAAD,CAA1B;;AACA,UAAI,CAACJ,MAAM,CAACM,QAAP,CAAgBD,KAAhB,CAAL,EAA6B;AACzBL,QAAAA,MAAM,CAACO,IAAP,CAAYF,KAAZ;AACH;AACJ;AACJ,GAPD;AAQA,SAAO/B,UAAU,CAAC0B,MAAD,CAAjB;AACH","sourcesContent":["/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\nimport {seriesCanvasPoint} from \"d3fc\";\nimport {withOpacity, withoutOpacity} from \"./seriesColors\";\nimport {groupFromKey} from \"./seriesKey\";\nimport {fromDomain} from \"./seriesSymbols\";\n\nexport function pointSeriesCanvas(settings, seriesKey, size, color, symbols) {\n    let series = seriesCanvasPoint()\n        .crossValue(d => d.x)\n        .mainValue(d => d.y);\n\n    if (size) {\n        series.size(d => size(d.size));\n    }\n    if (symbols) {\n        series.type(symbols(seriesKey));\n    }\n\n    series.decorate((context, d) => {\n        const colorValue = color(d.colorValue !== undefined ? d.colorValue : seriesKey);\n        const opacity = settings.colorStyles && settings.colorStyles.opacity;\n\n        context.strokeStyle = withoutOpacity(colorValue);\n        context.fillStyle = withOpacity(colorValue, opacity);\n    });\n\n    return series;\n}\n\nexport function symbolTypeFromGroups(settings) {\n    const col = settings.data && settings.data.length > 0 ? settings.data[0] : {};\n    const domain = [];\n    Object.keys(col).forEach(key => {\n        if (key !== \"__ROW_PATH__\") {\n            const group = groupFromKey(key);\n            if (!domain.includes(group)) {\n                domain.push(group);\n            }\n        }\n    });\n    return fromDomain(domain);\n}\n"],"file":"pointSeriesCanvas.js"}