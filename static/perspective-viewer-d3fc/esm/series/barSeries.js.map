{"version":3,"sources":["../../../src/js/series/barSeries.js"],"names":["fc","tooltip","barSeries","settings","color","series","mainValues","length","seriesSvgGrouped","seriesSvgBar","decorate","selection","style","d","key","autoBandwidth","minBandwidth","crossValue","mainValue","baseValue","adaptee","min","arg","rebindAll","bandwidth","args","Math","max"],"mappings":"AAAA;;;;;;;;AAQA,OAAO,KAAKA,EAAZ,MAAoB,MAApB;AACA,SAAQC,OAAR,QAAsB,oBAAtB;AAEA,OAAO,SAASC,SAAT,CAAmBC,QAAnB,EAA6BC,KAA7B,EAAoC;AACvC,MAAIC,MAAM,GAAGF,QAAQ,CAACG,UAAT,CAAoBC,MAApB,GAA6B,CAA7B,GAAiCP,EAAE,CAACQ,gBAAH,CAAoBR,EAAE,CAACS,YAAH,EAApB,CAAjC,GAA0ET,EAAE,CAACS,YAAH,EAAvF;AAEAJ,EAAAA,MAAM,GAAGA,MAAM,CAACK,QAAP,CAAgBC,SAAS,IAAI;AAClCV,IAAAA,OAAO,GAAGE,QAAV,CAAmBA,QAAnB,EAA6BQ,SAA7B;AACAA,IAAAA,SAAS,CAACC,KAAV,CAAgB,MAAhB,EAAwBC,CAAC,IAAIT,KAAK,CAACS,CAAC,CAACC,GAAH,CAAlC;AACH,GAHQ,CAAT;AAKA,SAAOd,EAAE,CACJe,aADE,CACYC,YAAY,CAACX,MAAD,CADxB,EAEFY,UAFE,CAESJ,CAAC,IAAIA,CAAC,CAACI,UAFhB,EAGFC,SAHE,CAGQL,CAAC,IAAIA,CAAC,CAACK,SAHf,EAIFC,SAJE,CAIQN,CAAC,IAAIA,CAAC,CAACM,SAJf,CAAP;AAKH;;AAED,MAAMH,YAAY,GAAGI,OAAO,IAAI;AAC5B,QAAMC,GAAG,GAAGC,GAAG,IAAI;AACf,WAAOF,OAAO,CAACE,GAAD,CAAd;AACH,GAFD;;AAIAtB,EAAAA,EAAE,CAACuB,SAAH,CAAaF,GAAb,EAAkBD,OAAlB;;AAEAC,EAAAA,GAAG,CAACG,SAAJ,GAAgB,CAAC,GAAGC,IAAJ,KAAa;AACzB,QAAI,CAACA,IAAI,CAAClB,MAAV,EAAkB;AACd,aAAOa,OAAO,CAACI,SAAR,EAAP;AACH;;AACDJ,IAAAA,OAAO,CAACI,SAAR,CAAkBE,IAAI,CAACC,GAAL,CAASF,IAAI,CAAC,CAAD,CAAb,EAAkB,CAAlB,CAAlB;AACA,WAAOJ,GAAP;AACH,GAND;;AAQA,SAAOA,GAAP;AACH,CAhBD","sourcesContent":["/******************************************************************************\r\n *\r\n * Copyright (c) 2017, the Perspective Authors.\r\n *\r\n * This file is part of the Perspective library, distributed under the terms of\r\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\r\n *\r\n */\r\nimport * as fc from \"d3fc\";\r\nimport {tooltip} from \"../tooltip/tooltip\";\r\n\r\nexport function barSeries(settings, color) {\r\n    let series = settings.mainValues.length > 1 ? fc.seriesSvgGrouped(fc.seriesSvgBar()) : fc.seriesSvgBar();\r\n\r\n    series = series.decorate(selection => {\r\n        tooltip().settings(settings)(selection);\r\n        selection.style(\"fill\", d => color(d.key));\r\n    });\r\n\r\n    return fc\r\n        .autoBandwidth(minBandwidth(series))\r\n        .crossValue(d => d.crossValue)\r\n        .mainValue(d => d.mainValue)\r\n        .baseValue(d => d.baseValue);\r\n}\r\n\r\nconst minBandwidth = adaptee => {\r\n    const min = arg => {\r\n        return adaptee(arg);\r\n    };\r\n\r\n    fc.rebindAll(min, adaptee);\r\n\r\n    min.bandwidth = (...args) => {\r\n        if (!args.length) {\r\n            return adaptee.bandwidth();\r\n        }\r\n        adaptee.bandwidth(Math.max(args[0], 1));\r\n        return min;\r\n    };\r\n\r\n    return min;\r\n};\r\n"],"file":"barSeries.js"}