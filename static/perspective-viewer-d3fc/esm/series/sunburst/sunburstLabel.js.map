{"version":3,"sources":["../../../../src/js/series/sunburst/sunburstLabel.js"],"names":["select","labelVisible","d","y1","y0","x1","x0","labelTransform","radius","x","Math","PI","y","cropLabel","targetWidth","actualWidth","getBBox","width","labelText","data","name","textSelection","substring","length","text","replace"],"mappings":";;AAAA;;;;;;;;AASA,SAAQA,MAAR,QAAqB,IAArB;AAEA,OAAO,MAAMC,YAAY,GAAGC,CAAC,IAAIA,CAAC,CAACC,EAAF,IAAQ,CAAR,IAAaD,CAAC,CAACE,EAAF,IAAQ,CAArB,IAA0B,CAACF,CAAC,CAACC,EAAF,GAAOD,CAAC,CAACE,EAAV,KAAiBF,CAAC,CAACG,EAAF,GAAOH,CAAC,CAACI,EAA1B,IAAgC,IAApF;AAEP,OAAO,SAASC,cAAT,CAAwBL,CAAxB,EAA2BM,MAA3B,EAAmC;AACtC,QAAMC,CAAC,GAAK,CAACP,CAAC,CAACI,EAAF,GAAOJ,CAAC,CAACG,EAAV,IAAgB,CAAjB,GAAsB,GAAvB,GAA8BK,IAAI,CAACC,EAA7C;AACA,QAAMC,CAAC,GAAI,CAACV,CAAC,CAACE,EAAF,GAAOF,CAAC,CAACC,EAAV,IAAgB,CAAjB,GAAsBK,MAAhC;AACA,SAAQ,UAASC,CAAC,GAAG,EAAG,eAAcG,CAAE,cAAaH,CAAC,GAAG,GAAJ,GAAU,CAAV,GAAc,GAAI,GAAvE;AACH;AAED,OAAO,SAASI,SAAT,CAAmBX,CAAnB,EAAsBY,WAAtB,EAAmC;AACtC,MAAIC,WAAW,GAAG,KAAKC,OAAL,GAAeC,KAAjC;;AACA,MAAIF,WAAW,GAAGD,WAAlB,EAA+B;AAC3B,QAAII,SAAS,GAAGhB,CAAC,CAACiB,IAAF,CAAOC,IAAvB;AACA,UAAMC,aAAa,GAAGrB,MAAM,CAAC,IAAD,CAA5B;;AACA,WAAOe,WAAW,GAAGD,WAArB,EAAkC;AAC9BI,MAAAA,SAAS,GAAGA,SAAS,CAACI,SAAV,CAAoB,CAApB,EAAuBJ,SAAS,CAACK,MAAV,GAAmB,CAA1C,CAAZ;AACAF,MAAAA,aAAa,CAACG,IAAd,CAAmB,MAAMN,SAAzB;AACAH,MAAAA,WAAW,GAAG,KAAKC,OAAL,GAAeC,KAA7B;AACH;;AACDI,IAAAA,aAAa,CAACG,IAAd,CAAmB,MAAO,GAAEN,SAAS,CAACI,SAAV,CAAoB,CAApB,EAAuBJ,SAAS,CAACK,MAAV,GAAmB,CAA1C,EAA6CE,OAA7C,CAAqD,MAArD,EAA6D,EAA7D,CAAiE,KAA7F;AACH;AACJ","sourcesContent":["/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport {select} from \"d3\";\n\nexport const labelVisible = d => d.y1 <= 3 && d.y0 >= 1 && (d.y1 - d.y0) * (d.x1 - d.x0) > 0.06;\n\nexport function labelTransform(d, radius) {\n    const x = (((d.x0 + d.x1) / 2) * 180) / Math.PI;\n    const y = ((d.y0 + d.y1) / 2) * radius;\n    return `rotate(${x - 90}) translate(${y},0) rotate(${x < 180 ? 0 : 180})`;\n}\n\nexport function cropLabel(d, targetWidth) {\n    let actualWidth = this.getBBox().width;\n    if (actualWidth > targetWidth) {\n        let labelText = d.data.name;\n        const textSelection = select(this);\n        while (actualWidth > targetWidth) {\n            labelText = labelText.substring(0, labelText.length - 1);\n            textSelection.text(() => labelText);\n            actualWidth = this.getBBox().width;\n        }\n        textSelection.text(() => `${labelText.substring(0, labelText.length - 3).replace(/\\s+$/, \"\")}...`);\n    }\n}\n"],"file":"sunburstLabel.js"}