{"version":3,"sources":["../../../src/js/axis/axisFactory.js"],"names":["fc","axisType","none","linear","time","ordinal","axisTypes","axisFactory","settings","excludeType","orient","settingName","settingValue","valueNames","optionalParams","optional","_factory","data","useType","axis","domainFunction","domain","forEach","p","component","createComponent","defaultComponent","scale","labelFunction","bottom","left","top","right","size","decorate","label","map","v","name","join","tickFormatFunction","axisBottom","axisLeft","axisTop","axisRight","args","length","valueName"],"mappings":"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","sourcesContent":["/******************************************************************************\r\n *\r\n * Copyright (c) 2017, the Perspective Authors.\r\n *\r\n * This file is part of the Perspective library, distributed under the terms of\r\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\r\n *\r\n */\r\nimport * as fc from \"d3fc\";\r\nimport {axisType} from \"./axisType\";\r\nimport * as none from \"./noAxis\";\r\nimport * as linear from \"./linearAxis\";\r\nimport * as time from \"./timeAxis\";\r\nimport * as ordinal from \"./ordinalAxis\";\r\n\r\nconst axisTypes = {\r\n    none,\r\n    ordinal,\r\n    time,\r\n    linear\r\n};\r\n\r\nexport const axisFactory = settings => {\r\n    let excludeType = null;\r\n    let orient = \"horizontal\";\r\n    let settingName = \"crossValues\";\r\n    let settingValue = null;\r\n    let valueNames = [\"crossValue\"];\r\n\r\n    const optionalParams = [\"include\", \"paddingStrategy\", \"pad\"];\r\n    const optional = {};\r\n\r\n    const _factory = data => {\r\n        const useType = axisType(settings)\r\n            .excludeType(excludeType)\r\n            .settingName(settingName)\r\n            .settingValue(settingValue)();\r\n\r\n        const axis = axisTypes[useType];\r\n        const domainFunction = axis.domain().valueNames(valueNames);\r\n\r\n        optionalParams.forEach(p => {\r\n            if (optional[p] && domainFunction[p]) domainFunction[p](optional[p]);\r\n        });\r\n        if (domainFunction.orient) domainFunction.orient(orient);\r\n\r\n        const domain = domainFunction(data);\r\n        const component = axis.component ? createComponent(axis, domain, data) : defaultComponent();\r\n\r\n        return {\r\n            scale: axis.scale(),\r\n            domain,\r\n            domainFunction,\r\n            labelFunction: axis.labelFunction,\r\n            component: {\r\n                bottom: component.bottom,\r\n                left: component.left,\r\n                top: component.top,\r\n                right: component.right\r\n            },\r\n            size: component.size,\r\n            decorate: component.decorate,\r\n            label: settings[settingName].map(v => v.name).join(\", \"),\r\n            tickFormatFunction: axis.tickFormatFunction\r\n        };\r\n    };\r\n\r\n    const createComponent = (axis, domain, data) =>\r\n        axis\r\n            .component(settings)\r\n            .orient(orient)\r\n            .settingName(settingName)\r\n            .domain(domain)(data);\r\n\r\n    const defaultComponent = () => ({\r\n        bottom: fc.axisBottom,\r\n        left: fc.axisLeft,\r\n        top: fc.axisTop,\r\n        right: fc.axisRight,\r\n        decorate: () => {}\r\n    });\r\n\r\n    _factory.excludeType = (...args) => {\r\n        if (!args.length) {\r\n            return excludeType;\r\n        }\r\n        excludeType = args[0];\r\n        return _factory;\r\n    };\r\n\r\n    _factory.orient = (...args) => {\r\n        if (!args.length) {\r\n            return orient;\r\n        }\r\n        orient = args[0];\r\n        return _factory;\r\n    };\r\n\r\n    _factory.settingName = (...args) => {\r\n        if (!args.length) {\r\n            return settingName;\r\n        }\r\n        settingName = args[0];\r\n        return _factory;\r\n    };\r\n    _factory.settingValue = (...args) => {\r\n        if (!args.length) {\r\n            return settingValue;\r\n        }\r\n        settingValue = args[0];\r\n        return _factory;\r\n    };\r\n\r\n    _factory.valueName = (...args) => {\r\n        if (!args.length) {\r\n            return valueNames[0];\r\n        }\r\n        valueNames = [args[0]];\r\n        return _factory;\r\n    };\r\n    _factory.valueNames = (...args) => {\r\n        if (!args.length) {\r\n            return valueNames;\r\n        }\r\n        valueNames = args[0];\r\n        return _factory;\r\n    };\r\n\r\n    optionalParams.forEach(p => {\r\n        _factory[p] = (...args) => {\r\n            if (!args.length) {\r\n                return optional[p];\r\n            }\r\n            optional[p] = args[0];\r\n            return _factory;\r\n        };\r\n    });\r\n\r\n    return _factory;\r\n};\r\n"],"file":"axisFactory.js"}