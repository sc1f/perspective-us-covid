{"version":3,"sources":["../../../src/js/axis/splitterLabels.js"],"names":["fc","getChartElement","withoutOpacity","splitterLabels","settings","labels","alt","color","_render","selection","text","labelDataJoin","dataJoin","key","d","disabled","length","coloured","splitValues","classed","name","style","undefined","on","splitMainValues","filter","v","concat","redrawChart","chartElement","node","remove","draw","args"],"mappings":"AAAA;;;;;;;;AAQA,OAAO,KAAKA,EAAZ,MAAoB,MAApB;AACA,SAAQC,eAAR,QAA8B,gBAA9B;AACA,SAAQC,cAAR,QAA6B,2BAA7B,C,CAEA;AACA;;AACA,OAAO,MAAMC,cAAc,GAAGC,QAAQ,IAAI;AACtC,MAAIC,MAAM,GAAG,EAAb;AACA,MAAIC,GAAG,GAAG,KAAV;AACA,MAAIC,KAAJ;;AAEA,QAAMC,OAAO,GAAGC,SAAS,IAAI;AACzBA,IAAAA,SAAS,CAACC,IAAV,CAAe,EAAf;AAEA,UAAMC,aAAa,GAAGX,EAAE,CAACY,QAAH,CAAY,MAAZ,EAAoB,gBAApB,EAAsCC,GAAtC,CAA0CC,CAAC,IAAIA,CAA/C,CAAtB;AAEA,UAAMC,QAAQ,GAAG,CAACT,GAAD,IAAQD,MAAM,CAACW,MAAP,KAAkB,CAA3C;AACA,UAAMC,QAAQ,GAAGV,KAAK,IAAIH,QAAQ,CAACc,WAAT,CAAqBF,MAArB,KAAgC,CAA1D;AACAL,IAAAA,aAAa,CAACF,SAAD,EAAYJ,MAAZ,CAAb,CACKc,OADL,CACa,UADb,EACyBJ,QADzB,EAEKL,IAFL,CAEUI,CAAC,IAAIA,CAAC,CAACM,IAFjB,EAGKC,KAHL,CAGW,OAHX,EAGoBP,CAAC,IAAKG,QAAQ,GAAGf,cAAc,CAACK,KAAK,CAACO,CAAC,CAACM,IAAH,CAAN,CAAjB,GAAmCE,SAHrE,EAIKC,EAJL,CAIQ,OAJR,EAIiBT,CAAC,IAAI;AACd,UAAIC,QAAJ,EAAc;;AAEd,UAAIT,GAAJ,EAAS;AACLF,QAAAA,QAAQ,CAACoB,eAAT,GAA2BpB,QAAQ,CAACoB,eAAT,CAAyBC,MAAzB,CAAgCC,CAAC,IAAIA,CAAC,IAAIZ,CAAC,CAACM,IAA5C,CAA3B;AACH,OAFD,MAEO;AACHhB,QAAAA,QAAQ,CAACoB,eAAT,GAA2B,CAACV,CAAC,CAACM,IAAH,EAASO,MAAT,CAAgBvB,QAAQ,CAACoB,eAAT,IAA4B,EAA5C,CAA3B;AACH;;AAEDI,MAAAA,WAAW,CAACnB,SAAD,CAAX;AACH,KAdL;AAeH,GAtBD;;AAwBA,QAAMmB,WAAW,GAAGnB,SAAS,IAAI;AAC7B,UAAMoB,YAAY,GAAG5B,eAAe,CAACQ,SAAS,CAACqB,IAAV,EAAD,CAApC;AACAD,IAAAA,YAAY,CAACE,MAAb;AACAF,IAAAA,YAAY,CAACG,IAAb;AACH,GAJD;;AAMAxB,EAAAA,OAAO,CAACH,MAAR,GAAiB,CAAC,GAAG4B,IAAJ,KAAa;AAC1B,QAAI,CAACA,IAAI,CAACjB,MAAV,EAAkB;AACd,aAAOX,MAAP;AACH;;AACDA,IAAAA,MAAM,GAAG4B,IAAI,CAAC,CAAD,CAAb;AACA,WAAOzB,OAAP;AACH,GAND;;AAOAA,EAAAA,OAAO,CAACF,GAAR,GAAc,CAAC,GAAG2B,IAAJ,KAAa;AACvB,QAAI,CAACA,IAAI,CAACjB,MAAV,EAAkB;AACd,aAAOV,GAAP;AACH;;AACDA,IAAAA,GAAG,GAAG2B,IAAI,CAAC,CAAD,CAAV;AACA,WAAOzB,OAAP;AACH,GAND;;AAQAA,EAAAA,OAAO,CAACD,KAAR,GAAgB,CAAC,GAAG0B,IAAJ,KAAa;AACzB,QAAI,CAACA,IAAI,CAACjB,MAAV,EAAkB;AACd,aAAOT,KAAP;AACH;;AACDA,IAAAA,KAAK,GAAG0B,IAAI,CAAC,CAAD,CAAZ;AACA,WAAOzB,OAAP;AACH,GAND;;AAOA,SAAOA,OAAP;AACH,CA1DM","sourcesContent":["/******************************************************************************\r\n *\r\n * Copyright (c) 2017, the Perspective Authors.\r\n *\r\n * This file is part of the Perspective library, distributed under the terms of\r\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\r\n *\r\n */\r\nimport * as fc from \"d3fc\";\r\nimport {getChartElement} from \"../plugin/root\";\r\nimport {withoutOpacity} from \"../series/seriesColors.js\";\r\n\r\n// Render a set of labels with the little left/right arrows for moving\r\n// between axes\r\nexport const splitterLabels = settings => {\r\n    let labels = [];\r\n    let alt = false;\r\n    let color;\r\n\r\n    const _render = selection => {\r\n        selection.text(\"\");\r\n\r\n        const labelDataJoin = fc.dataJoin(\"span\", \"splitter-label\").key(d => d);\r\n\r\n        const disabled = !alt && labels.length === 1;\r\n        const coloured = color && settings.splitValues.length === 0;\r\n        labelDataJoin(selection, labels)\r\n            .classed(\"disabled\", disabled)\r\n            .text(d => d.name)\r\n            .style(\"color\", d => (coloured ? withoutOpacity(color(d.name)) : undefined))\r\n            .on(\"click\", d => {\r\n                if (disabled) return;\r\n\r\n                if (alt) {\r\n                    settings.splitMainValues = settings.splitMainValues.filter(v => v != d.name);\r\n                } else {\r\n                    settings.splitMainValues = [d.name].concat(settings.splitMainValues || []);\r\n                }\r\n\r\n                redrawChart(selection);\r\n            });\r\n    };\r\n\r\n    const redrawChart = selection => {\r\n        const chartElement = getChartElement(selection.node());\r\n        chartElement.remove();\r\n        chartElement.draw();\r\n    };\r\n\r\n    _render.labels = (...args) => {\r\n        if (!args.length) {\r\n            return labels;\r\n        }\r\n        labels = args[0];\r\n        return _render;\r\n    };\r\n    _render.alt = (...args) => {\r\n        if (!args.length) {\r\n            return alt;\r\n        }\r\n        alt = args[0];\r\n        return _render;\r\n    };\r\n\r\n    _render.color = (...args) => {\r\n        if (!args.length) {\r\n            return color;\r\n        }\r\n        color = args[0];\r\n        return _render;\r\n    };\r\n    return _render;\r\n};\r\n"],"file":"splitterLabels.js"}