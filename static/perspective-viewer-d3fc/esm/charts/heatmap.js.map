{"version":3,"sources":["../../../src/js/charts/heatmap.js"],"names":["axisFactory","AXIS_TYPES","chartSvgFactory","heatmapSeries","seriesColorRange","heatmapData","filterData","withGridLines","colorRangeLegend","zoomableChart","heatmapChart","container","settings","data","color","series","legend","scale","xAxis","excludeType","linear","settingName","valueName","yAxis","orient","chart","plotArea","xPaddingInner","xPaddingOuter","xAlign","yPaddingInner","yPaddingOuter","yAlign","zoomChart","xScale","yScale","datum","call","plugin","type","name","max_cells","max_columns"],"mappings":"AAAA;;;;;;;;AAQA,SAAQA,WAAR,QAA0B,qBAA1B;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,SAAQC,eAAR,QAA8B,sBAA9B;AACA,SAAQC,aAAR,QAA4B,yBAA5B;AACA,SAAQC,gBAAR,QAA+B,uBAA/B;AACA,SAAQC,WAAR,QAA0B,qBAA1B;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,OAAOC,aAAP,MAA0B,wBAA1B;AACA,SAAQC,gBAAR,QAA+B,4BAA/B;AACA,OAAOC,aAAP,MAA0B,uBAA1B;;AAEA,SAASC,YAAT,CAAsBC,SAAtB,EAAiCC,QAAjC,EAA2C;AACvC,QAAMC,IAAI,GAAGR,WAAW,CAACO,QAAD,EAAWN,UAAU,CAACM,QAAD,CAArB,CAAxB;AAEA,QAAME,KAAK,GAAGV,gBAAgB,CAACQ,QAAD,EAAWC,IAAX,EAAiB,YAAjB,CAA9B;AACA,QAAME,MAAM,GAAGZ,aAAa,CAACS,QAAD,EAAWE,KAAX,CAA5B;AAEA,QAAME,MAAM,GAAGR,gBAAgB,GAAGS,KAAnB,CAAyBH,KAAzB,CAAf;AAEA,QAAMI,KAAK,GAAGlB,WAAW,CAACY,QAAD,CAAX,CACTO,WADS,CACGlB,UAAU,CAACmB,MADd,EAETC,WAFS,CAEG,aAFH,EAGTC,SAHS,CAGC,YAHD,EAGeT,IAHf,CAAd;AAIA,QAAMU,KAAK,GAAGvB,WAAW,CAACY,QAAD,CAAX,CACTO,WADS,CACGlB,UAAU,CAACmB,MADd,EAETC,WAFS,CAEG,aAFH,EAGTC,SAHS,CAGC,WAHD,EAITE,MAJS,CAIF,UAJE,EAIUX,IAJV,CAAd;AAMA,QAAMY,KAAK,GAAGvB,eAAe,CAACgB,KAAD,EAAQK,KAAR,CAAf,CAA8BG,QAA9B,CAAuCnB,aAAa,CAACQ,MAAD,EAASH,QAAT,CAApD,CAAd;;AAEA,MAAIa,KAAK,CAACE,aAAV,EAAyB;AACrBF,IAAAA,KAAK,CAACE,aAAN,CAAoB,CAApB;AACAF,IAAAA,KAAK,CAACG,aAAN,CAAoB,CAApB;AACAb,IAAAA,MAAM,CAACc,MAAP,CAAc,OAAd;AACH;;AACD,MAAIJ,KAAK,CAACK,aAAV,EAAyB;AACrBL,IAAAA,KAAK,CAACK,aAAN,CAAoB,CAApB;AACAL,IAAAA,KAAK,CAACM,aAAN,CAAoB,CAApB;AACAhB,IAAAA,MAAM,CAACiB,MAAP,CAAc,KAAd;AACH;;AAED,QAAMC,SAAS,GAAGxB,aAAa,GAC1BgB,KADa,CACPA,KADO,EAEbb,QAFa,CAEJA,QAFI,EAGbsB,MAHa,CAGNhB,KAAK,CAACD,KAHA,EAIbkB,MAJa,CAINZ,KAAK,CAACN,KAJA,CAAlB,CA/BuC,CAqCvC;;AACAN,EAAAA,SAAS,CAACyB,KAAV,CAAgBvB,IAAhB,EAAsBwB,IAAtB,CAA2BJ,SAA3B;AACAtB,EAAAA,SAAS,CAAC0B,IAAV,CAAerB,MAAf;AACH;;AACDN,YAAY,CAAC4B,MAAb,GAAsB;AAClBC,EAAAA,IAAI,EAAE,YADY;AAElBC,EAAAA,IAAI,EAAE,SAFY;AAGlBC,EAAAA,SAAS,EAAE,IAHO;AAIlBC,EAAAA,WAAW,EAAE;AAJK,CAAtB;AAOA,eAAehC,YAAf","sourcesContent":["/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\nimport {axisFactory} from \"../axis/axisFactory\";\nimport {AXIS_TYPES} from \"../axis/axisType\";\nimport {chartSvgFactory} from \"../axis/chartFactory\";\nimport {heatmapSeries} from \"../series/heatmapSeries\";\nimport {seriesColorRange} from \"../series/seriesRange\";\nimport {heatmapData} from \"../data/heatmapData\";\nimport {filterData} from \"../legend/filter\";\nimport withGridLines from \"../gridlines/gridlines\";\nimport {colorRangeLegend} from \"../legend/colorRangeLegend\";\nimport zoomableChart from \"../zoom/zoomableChart\";\n\nfunction heatmapChart(container, settings) {\n    const data = heatmapData(settings, filterData(settings));\n\n    const color = seriesColorRange(settings, data, \"colorValue\");\n    const series = heatmapSeries(settings, color);\n\n    const legend = colorRangeLegend().scale(color);\n\n    const xAxis = axisFactory(settings)\n        .excludeType(AXIS_TYPES.linear)\n        .settingName(\"crossValues\")\n        .valueName(\"crossValue\")(data);\n    const yAxis = axisFactory(settings)\n        .excludeType(AXIS_TYPES.linear)\n        .settingName(\"splitValues\")\n        .valueName(\"mainValue\")\n        .orient(\"vertical\")(data);\n\n    const chart = chartSvgFactory(xAxis, yAxis).plotArea(withGridLines(series, settings));\n\n    if (chart.xPaddingInner) {\n        chart.xPaddingInner(0);\n        chart.xPaddingOuter(0);\n        series.xAlign(\"right\");\n    }\n    if (chart.yPaddingInner) {\n        chart.yPaddingInner(0);\n        chart.yPaddingOuter(0);\n        series.yAlign(\"top\");\n    }\n\n    const zoomChart = zoomableChart()\n        .chart(chart)\n        .settings(settings)\n        .xScale(xAxis.scale)\n        .yScale(yAxis.scale);\n\n    // render\n    container.datum(data).call(zoomChart);\n    container.call(legend);\n}\nheatmapChart.plugin = {\n    type: \"d3_heatmap\",\n    name: \"Heatmap\",\n    max_cells: 1000,\n    max_columns: 50\n};\n\nexport default heatmapChart;\n"],"file":"heatmap.js"}