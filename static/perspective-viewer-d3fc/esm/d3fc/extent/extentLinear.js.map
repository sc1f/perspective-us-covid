{"version":3,"sources":["../../../../src/js/d3fc/extent/extentLinear.js"],"names":["d3Array","defaultPadding","extentLinear","accessors","d","symmetricalAbout","include","paddingStrategy","instance","data","values","Array","length","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","Symbol","iterator","_step","next","done","accessor","value","i","isArray","push","apply","toConsumableArray","err","return","extent$$1","min","max","concat","halfRange","Math","abs","arguments","pad","padUnit","arr","arr2","from"],"mappings":"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","sourcesContent":["/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport * as d3Array from \"d3-array\";\nimport {defaultPadding} from \"../padding/default\";\n\nexport const extentLinear = function() {\n    let accessors = [\n        function(d) {\n            return d;\n        }\n    ];\n    let symmetricalAbout = null;\n    let include = [];\n    let paddingStrategy = defaultPadding();\n\n    const instance = function instance(data) {\n        let values = new Array(data.length);\n        let _iteratorNormalCompletion = true;\n        let _didIteratorError = false;\n        let _iteratorError = undefined;\n\n        let _iterator = accessors[Symbol.iterator]();\n        try {\n            for (let _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                let accessor = _step.value;\n\n                for (let i = 0; i < data.length; i++) {\n                    let value = accessor(data[i], i);\n                    if (Array.isArray(value)) {\n                        values.push.apply(values, toConsumableArray(value));\n                    } else {\n                        values.push(value);\n                    }\n                }\n            }\n        } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion && _iterator.return) {\n                    _iterator.return();\n                }\n            } finally {\n                if (_didIteratorError) {\n                    throw _iteratorError;\n                }\n            }\n        }\n\n        let extent$$1 = [d3Array.min(values), d3Array.max(values)];\n\n        extent$$1[0] = extent$$1[0] == null ? d3Array.min(include) : d3Array.min([extent$$1[0]].concat(toConsumableArray(include)));\n        extent$$1[1] = extent$$1[1] == null ? d3Array.max(include) : d3Array.max([extent$$1[1]].concat(toConsumableArray(include)));\n\n        if (symmetricalAbout != null) {\n            let halfRange = Math.max(Math.abs(extent$$1[1] - symmetricalAbout), Math.abs(extent$$1[0] - symmetricalAbout));\n            extent$$1[0] = symmetricalAbout - halfRange;\n            extent$$1[1] = symmetricalAbout + halfRange;\n        }\n\n        return paddingStrategy(extent$$1);\n    };\n\n    instance.accessors = function() {\n        if (!arguments.length) {\n            return accessors;\n        }\n        accessors = arguments.length <= 0 ? undefined : arguments[0];\n        return instance;\n    };\n\n    //This function points directly at the paddingStrategy child object's\n    //properties for backwards-compatibility. DEPRECATED.\n    instance.pad = function() {\n        if (!arguments.length) {\n            return paddingStrategy.pad;\n        }\n        paddingStrategy.pad(arguments.length <= 0 ? undefined : arguments[0]);\n        return instance;\n    };\n\n    //This function points directly at the paddingStrategy child object's\n    //properties for backwards-compatibility. DEPRECATED.\n    instance.padUnit = function() {\n        if (!arguments.length) {\n            return paddingStrategy.padUnit;\n        }\n        paddingStrategy.padUnit(arguments.length <= 0 ? undefined : arguments[0]);\n        return instance;\n    };\n\n    instance.include = function() {\n        if (!arguments.length) {\n            return include;\n        }\n        include = arguments.length <= 0 ? undefined : arguments[0];\n        return instance;\n    };\n\n    instance.symmetricalAbout = function() {\n        if (!arguments.length) {\n            return symmetricalAbout;\n        }\n        symmetricalAbout = arguments.length <= 0 ? undefined : arguments[0];\n        return instance;\n    };\n\n    instance.paddingStrategy = function() {\n        if (!arguments.length) {\n            return paddingStrategy;\n        }\n        paddingStrategy = arguments.length <= 0 ? undefined : arguments[0];\n        return instance;\n    };\n\n    return instance;\n};\n\nlet toConsumableArray = function(arr) {\n    if (Array.isArray(arr)) {\n        let arr2 = Array(arr.length);\n        for (let i = 0; i < arr.length; i++) {\n            arr2[i] = arr[i];\n        }\n        return arr2;\n    } else {\n        return Array.from(arr);\n    }\n};\n"],"file":"extentLinear.js"}