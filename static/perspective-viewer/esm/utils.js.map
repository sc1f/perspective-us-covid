{"version":3,"sources":["../../src/js/utils.js"],"names":["importTemplate","template","div","document","createElement","innerHTML","Array","prototype","slice","call","children","setTemplateContent","content","createDocumentFragment","child","firstChild","Node","appendChild","registerElement","templateString","styleString","proto","toString","getAttribute","_perspective_element","attributeChangedCallback","name","old","value","Object","getOwnPropertyDescriptor","set","connectedCallback","_initialized","_initializing","node","importNode","attachShadow","mode","shadowRoot","key","getOwnPropertyNames","hasAttribute","observedAttributes","descriptor","val","setAttribute","defineProperty","console","log","window","customElements","define","bindTemplate","styleStrings","style","map","x","join","cls","_attribute","_default","desc","old_set","attr","undefined","JSON","stringify","parse","e","warn","get","copy_to_clipboard","csv","element","body","select","execCommand","removeChild","setPromise","cb","timeout","Promise","setTimeout","invertPromise","resolve","promise","_resolve","throttlePromise","target","property","lock","Symbol","f","args","result","error","l","swap","container","elems","every","classList","contains","i","j","indexOf","reverse","insertBefore","length","json_attribute","array_attribute","registerPlugin","plugin","global","__perspective_plugins__","push"],"mappings":"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","sourcesContent":["/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\n/**\n * Instantiate a Template DOM object from an HTML text string.\n *\n * Params\n * ------\n * template : An HTML string representing a template.\n *\n * Returns\n * -------\n * A Template DOM object.\n */\n\nexport function importTemplate(template) {\n    const div = document.createElement(\"div\");\n    div.innerHTML = template;\n    return Array.prototype.slice.call(div.children)[0];\n}\n\nfunction setTemplateContent(template) {\n    // return early in browsers that have template tag support\n    if (template.content) {\n        return;\n    }\n    template.content = document.createDocumentFragment();\n    let child;\n    while ((child = template.firstChild)) {\n        Node.prototype.appendChild.call(template.content, child);\n    }\n}\n\n/**\n * A simple tool for creating Web Components v0.\n *\n * Params\n * ------\n * template : An HTML string representing a template.  Should have an 'id'\n *     attribute which will become the new Web Component's tag name.\n * proto : The new Web Component's prototype object, as per spec.\n */\nexport function registerElement(templateString, styleString, proto) {\n    const template = importTemplate(templateString);\n    setTemplateContent(template);\n    if (styleString) {\n        template.innerHTML = `<style>${styleString.toString()}</style>` + template.innerHTML;\n    }\n    template.innerHTML = `<style id=\"psp_styles\" scope=\"${template.getAttribute(\"id\")}\">test{}</style>` + template.innerHTML;\n\n    const _perspective_element = class extends proto {\n        attributeChangedCallback(name, old, value) {\n            if (value === null) {\n                value = \"null\";\n            }\n            if (name[0] !== \"_\" && old != value && !!Object.getOwnPropertyDescriptor(proto.prototype, name).set) {\n                this[name] = value;\n            }\n        }\n\n        connectedCallback() {\n            if (this._initialized) {\n                return;\n            }\n            this._initializing = true;\n            var node = document.importNode(template.content, true);\n            this.attachShadow({mode: \"open\"});\n            this.shadowRoot.appendChild(node);\n\n            if (super.connectedCallback) {\n                super.connectedCallback();\n            }\n\n            // Call all attributes bound to setters on the proto\n            for (let key of Object.getOwnPropertyNames(proto.prototype)) {\n                if (key !== \"connectedCallback\") {\n                    if (this.hasAttribute(key) && key[0] !== \"_\" && !!Object.getOwnPropertyDescriptor(proto.prototype, key).set) {\n                        this[key] = this.getAttribute(key);\n                    }\n                }\n            }\n            this._initializing = false;\n            this._initialized = true;\n        }\n\n        static get observedAttributes() {\n            return Object.getOwnPropertyNames(proto.prototype);\n        }\n    };\n\n    for (let key of Object.getOwnPropertyNames(proto.prototype)) {\n        let descriptor = Object.getOwnPropertyDescriptor(proto.prototype, key);\n        if (descriptor && descriptor.set) {\n            let old = descriptor.set;\n            descriptor.set = function(val) {\n                if (!this.hasAttribute(key) || this.getAttribute(key) !== val) {\n                    this.setAttribute(key, val);\n                    return;\n                }\n                if (!this._initializing && !this._initialized) {\n                    return;\n                }\n                old.call(this, val);\n            };\n            Object.defineProperty(proto.prototype, key, descriptor);\n        }\n    }\n\n    let name = template.getAttribute(\"id\");\n    console.log(`Registered ${name}`);\n\n    window.customElements.define(name, _perspective_element);\n}\n\nexport function bindTemplate(template, ...styleStrings) {\n    const style = styleStrings.map(x => x.toString()).join(\"\\n\");\n    return function(cls) {\n        return registerElement(template, {toString: () => style}, cls);\n    };\n}\n\n/**\n * A decorator for declaring a setter property of an HTMLElement descendent\n * class as serialized JSON.  Handles converting these types before invoking\n * the underlying function/\n *\n * @param {object} _default the default value to supply the setter when\n * undefined, removed or invalid.\n */\nfunction _attribute(_default) {\n    return function(cls, name, desc) {\n        const old_set = desc.value;\n        desc.set = function(x) {\n            let attr = this.getAttribute(name);\n            try {\n                if (x === null || x === undefined || x === \"\") {\n                    x = _default();\n                }\n                if (typeof x !== \"string\") {\n                    x = JSON.stringify(x);\n                }\n                if (x !== attr) {\n                    attr = x;\n                }\n                attr = JSON.parse(attr);\n            } catch (e) {\n                console.warn(`Invalid value for attribute \"${name}\": ${x}`);\n                attr = _default();\n            }\n            old_set.call(this, attr);\n        };\n        desc.get = function() {\n            if (this.hasAttribute(name)) {\n                return JSON.parse(this.getAttribute(name));\n            } else {\n                return _default();\n            }\n        };\n        delete desc[\"value\"];\n        delete desc[\"writable\"];\n        return desc;\n    };\n}\n\nexport function copy_to_clipboard(csv) {\n    let element = document.createElement(\"textarea\");\n    document.body.appendChild(element);\n    element.value = csv;\n    element.select();\n    document.execCommand(\"copy\");\n    document.body.removeChild(element);\n}\n\n/**\n * Just like `setTimeout` except it returns a promise which resolves after the\n * callback has (also resolved).\n *\n * @param {func} cb\n * @param {*} timeout\n */\nexport async function setPromise(cb = async () => {}, timeout = 0) {\n    await new Promise(x => setTimeout(x, timeout));\n    return await cb();\n}\n\nconst invertPromise = () => {\n    let resolve;\n    let promise = new Promise(_resolve => {\n        resolve = _resolve;\n    });\n    promise.resolve = resolve;\n    return promise;\n};\n\nexport function throttlePromise(target, property, descriptor) {\n    const lock = Symbol(\"private lock\");\n    const f = descriptor.value;\n    descriptor.value = async function(...args) {\n        if (this[lock]) {\n            await this[lock];\n            if (this[lock]) {\n                await this[lock];\n                return;\n            }\n        }\n        this[lock] = invertPromise();\n        let result;\n        try {\n            result = await f.call(this, ...args);\n        } catch (e) {\n            console.error(e);\n        } finally {\n            const l = this[lock];\n            this[lock] = undefined;\n            l.resolve();\n            return result;\n        }\n    };\n    return descriptor;\n}\n\n/**\n * Swap 2 HTMLElements in a container.\n * @param {HTMLElement} container\n * @param {HTMLElement} elem1\n * @param {HTMLElement} elem2\n */\nexport function swap(container, ...elems) {\n    if (elems[0] === elems[1]) return;\n    if (elems.every(x => x.classList.contains(\"null-column\"))) return;\n    let [i, j] = elems.map(x => Array.prototype.slice.call(container.children).indexOf(x));\n    if (j < i) {\n        [i, j] = [j, i];\n        elems = elems.reverse();\n    }\n    container.insertBefore(elems[1], elems[0]);\n    if (j + 1 === container.children.length) {\n        container.appendChild(elems[0]);\n    } else {\n        container.insertBefore(elems[0], container.children[j + 1]);\n    }\n}\n\nexport const json_attribute = _attribute(() => ({}));\nexport const array_attribute = _attribute(() => []);\n\nexport const registerPlugin = (name, plugin) => {\n    if (global.registerPlugin) {\n        global.registerPlugin(name, plugin);\n    } else {\n        global.__perspective_plugins__ = global.__perspective_plugins__ || [];\n        global.__perspective_plugins__.push([name, plugin]);\n    }\n};\n"],"file":"utils.js"}