module.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=29)}([function(e,t){e.exports=require("@lumino/widgets")},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var a=(s=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),o=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[n].concat(o).concat([a]).join("\n")}var s;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(i[o]=!0)}for(a=0;a<e.length;a++){var s=e[a];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t){e.exports=require("@lumino/algorithm")},function(e,t){e.exports=require("@lumino/virtualdom")},function(e,t){e.exports=require("core-js/modules/web.dom-collections.iterator")},function(e,t){e.exports=require("@lumino/messaging")},function(e,t){e.exports=require("core-js/modules/es.promise")},function(e,t){e.exports=require("core-js/modules/es.string.replace")},function(e,t,n){(t=e.exports=n(1)(!1)).i(n(18),""),t.push([e.i,':host{background-color:var(--workspace--background-color,#eee);width:100%;height:100%}:host .p-TabBar-tabLabel{background-color:transparent;border:none;color:#666;cursor:pointer;font-family:"Open Sans";font-weight:400;font-size:12px;line-height:22px;text-align:center;white-space:normal!important;word-break:break-all}:host .p-TabBar-tabLabel[value=\'[untitled]\']{color:#ddd!important}:host .p-TabBar-tabLabel:focus{outline:0;color:#666!important;cursor:text}:host .p-TabBar-tab.p-mod-closable>.p-TabBar-tabCloseIcon:before{content:var(--close-button--content, "\\2715");font-family:var(--settings--font-family, "Arial")}:host .p-TabBar-tab>.p-TabBar-tabConfigIcon:before{content:var(--open-settings-button--content, "\\1F527");font-family:var(--settings--font-family, "Arial");transition:color .5s}:host .p-TabBar-tab.p-mod-current.settings_open>.p-TabBar-tabConfigIcon:before{content:var(--close-settings-button--content, "\\1F527");font-family:var(--settings--font-family, "Arial")}:host .p-TabBar-tab.p-mod-current.linked>.p-TabBar-tabConfigIcon:before{color:#22a0ce}:host .p-TabBar-tab>.p-TabBar-tabConfigIcon{opacity:0;pointer-events:none}:host .p-TabBar-tab.p-mod-current>.p-TabBar-tabConfigIcon{opacity:1;pointer-events:all}:host .p-mod-current .p-TabBar-tabCloseIcon,:host .p-mod-current .p-TabBar-tabConfigIcon{color:#ccc;transition:color .2s ease-out}:host .p-mod-current .p-TabBar-tabCloseIcon:hover,:host .p-mod-current .p-TabBar-tabConfigIcon:hover{color:#1a7da1;transition:color .2s ease-out}:host .p-BoxPanel{overflow:scroll!important}:host .p-TabBar,:host .p-TabBar-tab{position:relative;overflow:visible!important}:host .p-TabBar-tabLabel:empty::after{content:"[untitled]";color:#aaa;content:"[untitled]"}:host .p-mod-current .p-TabBar-tabLabel:empty::after{color:#ddd}:host .divider{left:14px;bottom:0;position:absolute;right:14px;display:none;transition:background-color .2s ease-out,width .2s ease-out;height:1px;background-color:#eaeaea;margin-bottom:0}:host .p-TabBar-tab.p-mod-hidden{display:flex!important;opacity:.5}:host .p-TabBar-tab.p-mod-hidden .divider{display:none}:host .p-TabBar-tab.p-mod-current .divider{display:block}:host .p-TabBar-tabLabel input{height:18px}:host .p-TabBar{min-height:24px!important}:host .pfm-button-base{background:#fff!important}:host .pfm-button-base:active{background:#016bc6!important}:host .p-TabBar-content{padding:0;overflow:hidden;margin:0 -4px -1px;border-bottom:0 solid #fff!important;border-left:#eaeaea;border-right:#eaeaea}:host .p-TabBar-tab.p-mod-current .shadow{margin:-1px;position:absolute;width:calc(100% + 2px);height:200%;pointer-events:none;left:0}:host .p-TabBar-tab.p-mod-current.settings_open .shadow{box-shadow:none}:host .p-TabBar-tab{margin:0 4px;border-color:#eaeaea}:host .p-TabBar-content>.p-TabBar-tab,:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open{background-color:#eee}:host .p-TabBar-content.inactive-blur>.p-TabBar-tab{background-color:#ddd}:host .condensed .p-TabBar-content>.p-TabBar-tab .p-TabBar-tabConfigIcon{display:none}:host .condensed .p-TabBar-content>.p-TabBar-tab.p-mod-current .p-TabBar-tabConfigIcon{display:block}:host .condensed .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .p-TabBar-tabLabel{margin-left:0}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open{border-width:1px!important;border-color:transparent;background-color:transparent!important}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .p-TabBar-tabToolbar{display:flex}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .divider{height:1px;margin-bottom:0;left:10px;right:10px}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open:last-child:first-child .divider{background:0 0;transition:none}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.perspective_updating .p-TabBar-tabConfigIcon{display:none}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.perspective_updating .p-TabBar-tabLoadingIcon{display:block}:host .p-TabBar-content>.p-TabBar-tab{max-width:100000px!important;flex:0 1 100000px!important;background:0 0;padding-top:1px!important;height:24px!important;max-height:24px!important;transform:none!important;transition:color .2s ease-out;border:1px solid transparent;color:#ccc}:host .p-TabBar-content>.p-TabBar-tab .p-TabBar-tabLabel{color:#666}:host .p-TabBar-content>.p-TabBar-tab:hover{color:#ccc}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current{color:#666;color:var(--detail-tabbar--color,#666)!important;border:var(--detail-tabbar--border,1px solid #eaeaea);background-color:var(--detail-tabbar--background-color,#fff);height:26px!important;max-height:26px!important}:host .p-TabBar-tab.p-mod-current .p-TabBar-tabLabel{white-space:nowrap!important}:host .p-TabBar-tabCloseIcon,:host .p-TabBar-tabConfigIcon{cursor:pointer!important;line-height:22px!important;padding-right:8px!important}:host .p-TabBar-tabConfigIcon{padding-left:8px}:host .p-TabBar-tabLoadingIcon{padding-left:11px;padding-right:12px}:host .bottom .p-TabBar-tab{flex-basis:10000px!important;max-width:10000px!important}:host .bottom .p-TabBar-tab.p-mod-current{border:none}:host ::-webkit-scrollbar-thumb{background-color:#ccc}:host .perspective-workspace.context-menu * .p-TabBar.context-focus{opacity:1}:host .perspective-workspace.context-menu * .p-TabBar{opacity:.2;transition:opacity .2s ease-out}:host .p-DockPanel{overflow:visible!important;position:absolute;background-color:var(--detail--background-color,transparent);padding:8px;top:0;left:0;right:0;bottom:0}:host .perspective-scroll-panel::-webkit-scrollbar{width:1em;height:1em}:host .perspective-scroll-panel::-webkit-scrollbar-track{background-color:#eee}:host .perspective-scroll-panel::-webkit-scrollbar-corner{background-color:#eee}:host .perspective-scroll-panel::-webkit-scrollbar-thumb{background-color:#aaa;height:.8em;width:.8em;border:8px solid #eee;border-left-width:0;border-top-width:0}:host .p-DockPanel.ew,:host .p-DockPanel.ew .p-Widget,:host .p-SplitPanel.ew,:host .p-SplitPanel.ew .p-Widget{cursor:ew-resize!important}:host .p-DockPanel.ns,:host .p-DockPanel.ns .p-Widget,:host .p-SplitPanel.ns,:host .p-SplitPanel.ns .p-Widget{cursor:ns-resize!important}:host .workspace-master-widget{min-width:300px}:host .p-DockPanel.resizing ::slotted(perspective-viewer),:host .p-SplitPanel.resizing ::slotted(perspective-viewer){pointer-events:none}:host .widget-blur ::slotted(perspective-viewer){opacity:.5}:host .p-DockPanel-handle.resizing{background-color:rgba(0,0,0,.05)}:host .perspective-scroll-panel{overflow:auto!important}:host .p-Panel{min-height:100%}:host .p-DockPanel-handle{background-color:none}:host .p-DockPanel-overlay{background:rgba(75,75,75,.2);border:1px dashed #666;transition-property:top,left,right,bottom;transition-duration:50ms;transition-timing-function:ease;margin:0}:host .viewer-container{flex:1;height:100%;overflow:hidden}:host .workspace-widget{display:flex;flex-direction:column;border:1px solid #eaeaea;border-width:0!important;min-width:300px;min-height:200px}:host .workspace{width:100%;height:100%}:host .p-SplitPanel{height:100%;width:100%}:host div.p-SplitPanel-handle{background-color:var(--master-divider--background-color)}:host .master-panel{background-color:#2f3136}:host .perspective-workspace.context-menu * .p-SplitPanel-handle{opacity:.2}:host .perspective-workspace.context-menu>.p-SplitPanel-handle{opacity:.2}',""])},function(e,t){e.exports='\x3c!--\n\nCopyright (c) 2017, the Perspective Authors.\n\nThis file is part of the Perspective library, distributed under the terms of\nthe Apache License 2.0.  The full license can be found in the LICENSE file.\n\n--\x3e\n<template id="perspective-workspace">\n    <div id="container" class="workspace"></div>\n</template>'},function(e,t){e.exports=require("@finos/perspective-viewer/dist/esm/utils")},function(e,t){e.exports=require("@lumino/signaling")},function(e,t){e.exports=require("@lumino/domutils")},function(e,t){e.exports=require("@lumino/commands")},function(e,t){e.exports=require("lodash/uniqBy")},function(e,t){e.exports=require("lodash/debounce")},function(e,t){e.exports=require("lodash/cloneDeep")},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,'.workspace-master-widget{--settings-button--content:var(--open-settings-button--content, "\\1F527")!important}.workspace-master-widget[settings]{--settings-button--content:var(--close-settings-button--content, "\\1F527")!important}.workspace-detail-widget.widget-maximize{--settings-button--content:var(--open-settings-button--content, "\\1F527")!important}.workspace-detail-widget.widget-maximize[settings]{--settings-button--content:var(--close-settings-button--content, "\\1F527")!important}.p-DockPanel-widget{border:1px solid #eaeaea;border-width:0!important;min-width:300px;min-height:200px}.workspace-detail-widget{--settings-button--content:""!important;--plugin--border:1px solid #eaeaea}.context-menu>perspective-viewer.context-focus{opacity:1}.context-menu>perspective-viewer{opacity:.2}perspective-viewer{flex:1;position:relative;display:block;align-items:center;justify-content:center;flex-direction:column;width:100%;height:100%;overflow:visible!important;font-family:"Open Sans",Arial,sans-serif;transition:opacity .2s ease-out}.lm-Menu,.p-Menu{z-index:10000;position:absolute;white-space:nowrap;overflow-x:hidden;overflow-y:auto;outline:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.lm-Menu-content,.p-Menu-content{margin:0;padding:0;display:table;list-style-type:none}.lm-Menu-item,.p-Menu-item{display:table-row}.lm-Menu-item.lm-mod-collapsed,.lm-Menu-item.lm-mod-hidden,.p-Menu-item.p-mod-collapsed,.p-Menu-item.p-mod-hidden{display:none!important}.lm-Menu-itemIcon,.lm-Menu-itemSubmenuIcon,.p-Menu-itemIcon,.p-Menu-itemSubmenuIcon{display:table-cell;text-align:center}.lm-Menu-itemLabel,.p-Menu-itemLabel{display:table-cell;text-align:left}.lm-Menu-itemShortcut,.p-Menu-itemShortcut{display:table-cell;text-align:right}.p-Menu{padding:12px;background:#fff;color:#666;border:1px solid #ccc;border-left-width:0;border-top-width:0;border-right-width:1px;font:12px Helvetica,Arial,sans-serif;box-shadow:rgba(0,0,0,.2) 0 3px 1px -2px,rgba(0,0,0,.14) 0 2px 2px 0,rgba(0,0,0,.12) 0 1px 5px 0}.p-Menu.workspace-master-menu{background:#2a2f36;color:#ccc;border:1px solid #555e6b}.p-Menu-item.p-mod-active{background:#e5e5e5}.p-Menu-item.p-mod-disabled{color:rgba(0,0,0,.25)}.p-Menu-itemIcon{width:21px;padding:4px 2px}.p-Menu-itemLabel{padding:4px 2px}.p-Menu-itemMnemonic{text-decoration:underline}.p-Menu-itemShortcut{padding:4px 0}.p-Menu-itemSubmenuIcon{width:16px;padding:4px 0}.p-Menu-item[data-type=separator]>div{padding:0;height:9px}.p-Menu-item[data-type=separator]>div::after{content:"";display:block;position:relative;top:4px;border-top:1px solid #ddd}.p-Menu-itemIcon::before,.p-Menu-itemSubmenuIcon::before{font-family:"Material Icons"}.p-MenuBar-menu{transform:translateY(-1px)}.p-MenuBar-item{padding:10px 32px;border-left:1px solid transparent;border-right:1px solid transparent;color:#737373!important}.p-MenuBar-item.p-mod-active{background:#e5e5e5}.p-MenuBar.p-mod-active .p-MenuBar-item.p-mod-active{z-index:10001;background:#fff;border-left:1px solid silver;border-right:1px solid silver}.p-Menu-itemIcon:before{content:attr(content);font-family:"Material Icons"}.p-mod-drag-image.p-TabBar-tab{display:none}',""])},function(e,t,n){(t=e.exports=n(1)(!1)).i(n(19),""),t.i(n(20),""),t.i(n(21),""),t.i(n(22),""),t.i(n(23),""),t.i(n(24),""),t.i(n(25),""),t.i(n(26),""),t.i(n(27),""),t.push([e.i,"/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n",""])},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,"/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n\n/* <DEPRECATED> */ .p-Widget, /* </DEPRECATED> */\n.lm-Widget {\n  box-sizing: border-box;\n  position: relative;\n  overflow: hidden;\n  cursor: default;\n}\n\n\n/* <DEPRECATED> */ .p-Widget.p-mod-hidden, /* </DEPRECATED> */\n.lm-Widget.lm-mod-hidden {\n  display: none !important;\n}\n",""])},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,"/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n\n/* <DEPRECATED> */ .p-CommandPalette, /* </DEPRECATED> */\n.lm-CommandPalette {\n  display: flex;\n  flex-direction: column;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n\n/* <DEPRECATED> */ .p-CommandPalette-search, /* </DEPRECATED> */\n.lm-CommandPalette-search {\n  flex: 0 0 auto;\n}\n\n\n/* <DEPRECATED> */ .p-CommandPalette-content, /* </DEPRECATED> */\n.lm-CommandPalette-content {\n  flex: 1 1 auto;\n  margin: 0;\n  padding: 0;\n  min-height: 0;\n  overflow: auto;\n  list-style-type: none;\n}\n\n\n/* <DEPRECATED> */ .p-CommandPalette-header, /* </DEPRECATED> */\n.lm-CommandPalette-header {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n\n/* <DEPRECATED> */ .p-CommandPalette-item, /* </DEPRECATED> */\n.lm-CommandPalette-item {\n  display: flex;\n  flex-direction: row;\n}\n\n\n/* <DEPRECATED> */ .p-CommandPalette-itemIcon, /* </DEPRECATED> */\n.lm-CommandPalette-itemIcon {\n  flex: 0 0 auto;\n}\n\n\n/* <DEPRECATED> */ .p-CommandPalette-itemContent, /* </DEPRECATED> */\n.lm-CommandPalette-itemContent {\n  flex: 1 1 auto;\n  overflow: hidden;\n}\n\n\n/* <DEPRECATED> */ .p-CommandPalette-itemShortcut, /* </DEPRECATED> */\n.lm-CommandPalette-itemShortcut {\n  flex: 0 0 auto;\n}\n\n\n/* <DEPRECATED> */ .p-CommandPalette-itemLabel, /* </DEPRECATED> */\n.lm-CommandPalette-itemLabel {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n",""])},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,"/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n\n/* <DEPRECATED> */ .p-DockPanel, /* </DEPRECATED> */\n.lm-DockPanel {\n  z-index: 0;\n}\n\n\n/* <DEPRECATED> */ .p-DockPanel-widget, /* </DEPRECATED> */\n.lm-DockPanel-widget {\n  z-index: 0;\n}\n\n\n/* <DEPRECATED> */ .p-DockPanel-tabBar, /* </DEPRECATED> */\n.lm-DockPanel-tabBar {\n  z-index: 1;\n}\n\n\n/* <DEPRECATED> */ .p-DockPanel-handle, /* </DEPRECATED> */\n.lm-DockPanel-handle {\n  z-index: 2;\n}\n\n\n/* <DEPRECATED> */ .p-DockPanel-handle.p-mod-hidden, /* </DEPRECATED> */\n.lm-DockPanel-handle.lm-mod-hidden {\n  display: none !important;\n}\n\n\n/* <DEPRECATED> */ .p-DockPanel-handle:after, /* </DEPRECATED> */\n.lm-DockPanel-handle:after {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  content: '';\n}\n\n\n/* <DEPRECATED> */\n.p-DockPanel-handle[data-orientation='horizontal'],\n/* </DEPRECATED> */\n.lm-DockPanel-handle[data-orientation='horizontal'] {\n  cursor: ew-resize;\n}\n\n\n/* <DEPRECATED> */\n.p-DockPanel-handle[data-orientation='vertical'],\n/* </DEPRECATED> */\n.lm-DockPanel-handle[data-orientation='vertical'] {\n  cursor: ns-resize;\n}\n\n\n/* <DEPRECATED> */\n.p-DockPanel-handle[data-orientation='horizontal']:after,\n/* </DEPRECATED> */\n.lm-DockPanel-handle[data-orientation='horizontal']:after {\n  left: 50%;\n  min-width: 8px;\n  transform: translateX(-50%);\n}\n\n\n/* <DEPRECATED> */\n.p-DockPanel-handle[data-orientation='vertical']:after,\n/* </DEPRECATED> */\n.lm-DockPanel-handle[data-orientation='vertical']:after {\n  top: 50%;\n  min-height: 8px;\n  transform: translateY(-50%);\n}\n\n\n/* <DEPRECATED> */ .p-DockPanel-overlay, /* </DEPRECATED> */\n.lm-DockPanel-overlay {\n  z-index: 3;\n  box-sizing: border-box;\n  pointer-events: none;\n}\n\n\n/* <DEPRECATED> */ .p-DockPanel-overlay.p-mod-hidden, /* </DEPRECATED> */\n.lm-DockPanel-overlay.lm-mod-hidden {\n  display: none !important;\n}\n",""])},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,"/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n\n/* <DEPRECATED> */ .p-Menu, /* </DEPRECATED> */\n.lm-Menu {\n  z-index: 10000;\n  position: absolute;\n  white-space: nowrap;\n  overflow-x: hidden;\n  overflow-y: auto;\n  outline: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n\n/* <DEPRECATED> */ .p-Menu-content, /* </DEPRECATED> */\n.lm-Menu-content {\n  margin: 0;\n  padding: 0;\n  display: table;\n  list-style-type: none;\n}\n\n\n/* <DEPRECATED> */ .p-Menu-item, /* </DEPRECATED> */\n.lm-Menu-item {\n  display: table-row;\n}\n\n\n/* <DEPRECATED> */\n.p-Menu-item.p-mod-hidden,\n.p-Menu-item.p-mod-collapsed,\n/* </DEPRECATED> */\n.lm-Menu-item.lm-mod-hidden,\n.lm-Menu-item.lm-mod-collapsed {\n  display: none !important;\n}\n\n\n/* <DEPRECATED> */\n.p-Menu-itemIcon,\n.p-Menu-itemSubmenuIcon,\n/* </DEPRECATED> */\n.lm-Menu-itemIcon,\n.lm-Menu-itemSubmenuIcon {\n  display: table-cell;\n  text-align: center;\n}\n\n\n/* <DEPRECATED> */ .p-Menu-itemLabel, /* </DEPRECATED> */\n.lm-Menu-itemLabel {\n  display: table-cell;\n  text-align: left;\n}\n\n\n/* <DEPRECATED> */ .p-Menu-itemShortcut, /* </DEPRECATED> */\n.lm-Menu-itemShortcut {\n  display: table-cell;\n  text-align: right;\n}\n",""])},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,"/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n\n/* <DEPRECATED> */ .p-MenuBar, /* </DEPRECATED> */\n.lm-MenuBar {\n  outline: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n\n/* <DEPRECATED> */ .p-MenuBar-content, /* </DEPRECATED> */\n.lm-MenuBar-content {\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: row;\n  list-style-type: none;\n}\n\n\n/* <DEPRECATED> */ .p--MenuBar-item, /* </DEPRECATED> */\n.lm-MenuBar-item {\n  box-sizing: border-box;\n}\n\n\n/* <DEPRECATED> */\n.p-MenuBar-itemIcon,\n.p-MenuBar-itemLabel,\n/* </DEPRECATED> */\n.lm-MenuBar-itemIcon,\n.lm-MenuBar-itemLabel {\n  display: inline-block;\n}\n",""])},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,"/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n\n/* <DEPRECATED> */ .p-ScrollBar, /* </DEPRECATED> */\n.lm-ScrollBar {\n  display: flex;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n\n/* <DEPRECATED> */\n.p-ScrollBar[data-orientation='horizontal'],\n/* </DEPRECATED> */\n.lm-ScrollBar[data-orientation='horizontal'] {\n  flex-direction: row;\n}\n\n\n/* <DEPRECATED> */\n.p-ScrollBar[data-orientation='vertical'],\n/* </DEPRECATED> */\n.lm-ScrollBar[data-orientation='vertical'] {\n  flex-direction: column;\n}\n\n\n/* <DEPRECATED> */ .p-ScrollBar-button, /* </DEPRECATED> */\n.lm-ScrollBar-button {\n  box-sizing: border-box;\n  flex: 0 0 auto;\n}\n\n\n/* <DEPRECATED> */ .p-ScrollBar-track, /* </DEPRECATED> */\n.lm-ScrollBar-track {\n  box-sizing: border-box;\n  position: relative;\n  overflow: hidden;\n  flex: 1 1 auto;\n}\n\n\n/* <DEPRECATED> */ .p-ScrollBar-thumb, /* </DEPRECATED> */\n.lm-ScrollBar-thumb {\n  box-sizing: border-box;\n  position: absolute;\n}\n",""])},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,"/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n\n/* <DEPRECATED> */ .p-SplitPanel-child, /* </DEPRECATED> */\n.lm-SplitPanel-child {\n  z-index: 0;\n}\n\n\n/* <DEPRECATED> */ .p-SplitPanel-handle, /* </DEPRECATED> */\n.lm-SplitPanel-handle {\n  z-index: 1;\n}\n\n\n/* <DEPRECATED> */ .p-SplitPanel-handle.p-mod-hidden, /* </DEPRECATED> */\n.lm-SplitPanel-handle.lm-mod-hidden {\n  display: none !important;\n}\n\n\n/* <DEPRECATED> */ .p-SplitPanel-handle:after, /* </DEPRECATED> */\n.lm-SplitPanel-handle:after {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  content: '';\n}\n\n\n/* <DEPRECATED> */\n.p-SplitPanel[data-orientation='horizontal'] > .p-SplitPanel-handle,\n/* </DEPRECATED> */\n.lm-SplitPanel[data-orientation='horizontal'] > .lm-SplitPanel-handle {\n  cursor: ew-resize;\n}\n\n\n/* <DEPRECATED> */\n.p-SplitPanel[data-orientation='vertical'] > .p-SplitPanel-handle,\n/* </DEPRECATED> */\n.lm-SplitPanel[data-orientation='vertical'] > .lm-SplitPanel-handle {\n  cursor: ns-resize;\n}\n\n\n/* <DEPRECATED> */\n.p-SplitPanel[data-orientation='horizontal'] > .p-SplitPanel-handle:after,\n/* </DEPRECATED> */\n.lm-SplitPanel[data-orientation='horizontal'] > .lm-SplitPanel-handle:after {\n  left: 50%;\n  min-width: 8px;\n  transform: translateX(-50%);\n}\n\n\n/* <DEPRECATED> */\n.p-SplitPanel[data-orientation='vertical'] > .p-SplitPanel-handle:after,\n/* </DEPRECATED> */\n.lm-SplitPanel[data-orientation='vertical'] > .lm-SplitPanel-handle:after {\n  top: 50%;\n  min-height: 8px;\n  transform: translateY(-50%);\n}\n",""])},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,"/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n\n/* <DEPRECATED> */ .p-TabBar, /* </DEPRECATED> */\n.lm-TabBar {\n  display: flex;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n\n/* <DEPRECATED> */ .p-TabBar[data-orientation='horizontal'], /* </DEPRECATED> */\n.lm-TabBar[data-orientation='horizontal'] {\n  flex-direction: row;\n}\n\n\n/* <DEPRECATED> */ .p-TabBar[data-orientation='vertical'], /* </DEPRECATED> */\n.lm-TabBar[data-orientation='vertical'] {\n  flex-direction: column;\n}\n\n\n/* <DEPRECATED> */ .p-TabBar-content, /* </DEPRECATED> */\n.lm-TabBar-content {\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex: 1 1 auto;\n  list-style-type: none;\n}\n\n\n/* <DEPRECATED> */\n.p-TabBar[data-orientation='horizontal'] > .p-TabBar-content,\n/* </DEPRECATED> */\n.lm-TabBar[data-orientation='horizontal'] > .lm-TabBar-content {\n  flex-direction: row;\n}\n\n\n/* <DEPRECATED> */\n.p-TabBar[data-orientation='vertical'] > .p-TabBar-content,\n/* </DEPRECATED> */\n.lm-TabBar[data-orientation='vertical'] > .lm-TabBar-content {\n  flex-direction: column;\n}\n\n\n/* <DEPRECATED> */ .p-TabBar-tab, /* </DEPRECATED> */\n.lm-TabBar-tab {\n  display: flex;\n  flex-direction: row;\n  box-sizing: border-box;\n  overflow: hidden;\n}\n\n\n/* <DEPRECATED> */\n.p-TabBar-tabIcon,\n.p-TabBar-tabCloseIcon,\n/* </DEPRECATED> */\n.lm-TabBar-tabIcon,\n.lm-TabBar-tabCloseIcon {\n  flex: 0 0 auto;\n}\n\n\n/* <DEPRECATED> */ .p-TabBar-tabLabel, /* </DEPRECATED> */\n.lm-TabBar-tabLabel {\n  flex: 1 1 auto;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n\n/* <DEPRECATED> */ .p-TabBar-tab.p-mod-hidden, /* </DEPRECATED> */\n.lm-TabBar-tab.lm-mod-hidden {\n  display: none !important;\n}\n\n\n/* <DEPRECATED> */ .p-TabBar.p-mod-dragging .p-TabBar-tab, /* </DEPRECATED> */\n.lm-TabBar.lm-mod-dragging .lm-TabBar-tab {\n  position: relative;\n}\n\n\n/* <DEPRECATED> */\n.p-TabBar.p-mod-dragging[data-orientation='horizontal'] .p-TabBar-tab,\n/* </DEPRECATED> */\n.lm-TabBar.lm-mod-dragging[data-orientation='horizontal'] .lm-TabBar-tab {\n  left: 0;\n  transition: left 150ms ease;\n}\n\n\n/* <DEPRECATED> */\n.p-TabBar.p-mod-dragging[data-orientation='vertical'] .p-TabBar-tab,\n/* </DEPRECATED> */\n.lm-TabBar.lm-mod-dragging[data-orientation='vertical'] .lm-TabBar-tab {\n  top: 0;\n  transition: top 150ms ease;\n}\n\n\n/* <DEPRECATED> */\n.p-TabBar.p-mod-dragging .p-TabBar-tab.p-mod-dragging\n/* </DEPRECATED> */\n.lm-TabBar.lm-mod-dragging .lm-TabBar-tab.lm-mod-dragging {\n  transition: none;\n}\n",""])},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,"/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n\n/* <DEPRECATED> */ .p-TabPanel-tabBar, /* </DEPRECATED> */\n.lm-TabPanel-tabBar {\n  z-index: 1;\n}\n\n\n/* <DEPRECATED> */ .p-TabPanel-stackedPanel, /* </DEPRECATED> */\n.lm-TabPanel-stackedPanel {\n  z-index: 0;\n}\n",""])},function(e,t){e.exports=require("@finos/perspective-viewer")},function(e,t,n){"use strict";n.r(t);n(4);var i=n(8),a=n.n(i),o=n(9),s=n.n(o),r=n(10),l=(n(6),n(7),n(2)),d=n(0),c=n(11);const p=1;class h{_clamp(e,t){const n={width:300,height:200}[e],[i,a]=[n,this._rect[e]-n];return t<i?i:t>a?a:void 0}_block_move(e,t){const n=this._offset_drag_start[e],i=this._offset_drag_current[e],a=t-n;return Math[t<i?"ceil":"floor"](a/p)*p+n}_check_prev(e,t){const{x:n,y:i}=this._offset_drag_current;return(e!==n||t!==i)&&(this._offset_drag_current={x:e,y:t},!0)}calculate_move({clientX:e,clientY:t}){e-=this._rect.left,t-=this._rect.top;const n=this._block_move("x",e),i=this._block_move("y",t);if(e=this._clamp("width",e)||this._clamp("width",n)||n,t=this._clamp("height",t)||this._clamp("height",i)||i,this._check_prev(e,t))return{x:e+this._rect.left,y:t+this._rect.top}}constructor(e,t,n){this._rect=n,this._offset_drag_start=this._offset_drag_current={x:e-n.left,y:t-n.top}}}function m(e,t){return class extends e{handleEvent(e){switch(e.type){case"mousedown":{const n=e.target;if(!n.classList.contains(t))break;[n,n.parentElement].some(e=>"horizontal"===e.getAttribute("data-orientation"))?this.addClass("ew"):this.addClass("ns"),this.addClass("resizing");const{clientX:i,clientY:a}=e;this._offset_target=n,this._offset_target.classList.add("resizing"),this.context=new h(i,a,this.node.getBoundingClientRect())}break;case"mousemove":if(p){if(this.context&&!e.shiftKey){e.preventDefault(),e.stopPropagation();const t=this.context.calculate_move(e);if(t){const n=function(e,t,n){const i=document.createEvent("MouseEvent");return i.initMouseEvent(n.type,!0,n.cancelable,n.view,n.detail,n.screenX,n.screenY,e,t,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,n.relatedTarget),i}(t.x,t.y,e);super.handleEvent(n)}return}}else super.handleEvent(e);break;case"mouseup":this.removeClass("resizing"),this.removeClass("ew"),this.removeClass("ns"),this._offset_target.classList.remove("resizing"),delete this.context}super.handleEvent(e)}}}class u extends(m(d.DockPanel,"p-DockPanel-handle")){}class b extends(m(d.SplitPanel,"p-SplitPanel-handle")){constructor(...e){super(...e),this.layoutModified=new c.Signal(this)}onUpdateRequest(...e){super.onUpdateRequest(...e),this.layoutModified.emit()}onResize(e){for(const e of Object(l.toArray)(this.widgets))e.node.style.minWidth="300px",e.node.style.minHeight="200px";super.onResize(e)}}var g=n(12),E=n(3);const f={Config:"config",Label:"label"},v="[untitled]";class w extends d.TabBar.Renderer{constructor(e){super(),this.maximized=e}renderLabel(e){return E.h.input({className:"p-TabBar-tabLabel",readonly:!0,id:f.Label,value:e.title.label||v})}renderTab(e){const t=e.title.caption,n=this.createTabKey(e),i=this.createTabStyle(e);let a=this.createTabClass(e);const o=this.createTabDataset(e);return E.h.li({key:n,className:a,title:t,style:i,dataset:o},this.renderConfigIcon(),this.renderLabel(e),this.renderCloseIcon(e),E.h.div({className:"divider"}))}renderConfigIcon(){return E.h.div({className:"p-TabBar-tabConfigIcon",id:f.Config})}}class D extends d.TabBar{constructor(e={}){super(e),this._addEventListeners(),this.__content_node__}onUpdateRequest(e){this.__content_node__=this.contentNode,super.onUpdateRequest(e),this._check_shade()}_check_shade(){Array.from(this.contentNode.children).filter(e=>e.classList.contains("settings_open")&&e.classList.contains("p-mod-current")).length>0?this.contentNode.classList.add("inactive-blur"):this.contentNode.classList.remove("inactive-blur")}handleEvent(e){switch(this.retargetEvent(e),e.type){case"contextmenu":const t=this.currentTitle.owner;this.parent.parent.parent.showContextMenu(t,e),e.preventDefault();break;case"dblclick":e.target.id===f.Label&&this.onTitleChangeRequest(e);break;case"mousedown":if(e.target.id===f.Config){const t=this.contentNode.children,n=l.ArrayExt.findFirstIndex(t,t=>g.ElementExt.hitTest(t,e.clientX,e.clientY));if(n<0)break;return void this.titles[n].owner.toggleConfig()}}super.handleEvent(e)}onTitleChangeRequest(e){const t=e.target.value,n=e=>e.stopPropagation(),i={mousemove:n,mousedown:n,mouseup:n,keydown:e=>{13===e.keyCode&&(a(),this.currentTitle.owner.name=e.target.value,e.target.value=e.target.value||v,e.target.setAttribute("readonly",""),e.target.blur())},blur:()=>{this.title.label=t,e.target.value=t,e.target.setAttribute("readonly",""),a()}},a=()=>{for(let t in i)e.target.removeEventListener(t,i[t])};for(let t in i)e.target.addEventListener(t,i[t]);e.target.removeAttribute("readonly"),t===v&&(e.target.value=""),e.target.focus()}onResize(e){super.onResize(e),this.checkCondensed(e)}checkCondensed(e){(e?e.width:this.node.offsetWidth)/this.contentNode.children.length<400?this.node.classList.add("condensed"):this.node.classList.remove("condensed")}retargetEvent(e){return Object.defineProperty(e,"target",{value:e.composedPath()[0],enumerable:!0}),e}_addEventListeners(){this.node.addEventListener("dblclick",this),this.node.addEventListener("contextmenu",this)}}class T extends d.DockPanel.Renderer{createTabBar(){const e=new D({renderer:new w});return e.addClass("p-DockPanel-tabBar"),e}}class C extends u{constructor(){super({renderer:new T}),this._renderer.dock=this}_onTabDetachRequested(e,t){super._onTabDetachRequested(e,t);const n=e.titles[0].owner;n.addClass("widget-blur"),this._drag&&this._drag._promise.then(()=>{n.removeClass("widget-blur")})}static mapWidgets(e,t){return t.main?t.main=C.mapWidgets(e,t.main):t.children?t.children=t.children.map(t=>C.mapWidgets(e,t)):t.widgets&&(t.widgets=t.widgets.map(t=>e(t))),t}onAfterAttach(){this.spacing=parseInt(window.getComputedStyle(this.node).padding)||0}}class P extends d.Menu.Renderer{constructor(e){super(),this.workspace=e}renderIcon(e){let t=this.createIconClass(e);const n=e.item.command.split(":").pop(),i=getComputedStyle(this.workspace).getPropertyValue(`--menu-${n}--content`).replace(/['"]+/g,"").trim();return E.h.div({className:t,content:i},e.item.iconLabel)}}var x=n(13);const k=e=>{const t=new x.CommandRegistry;return t.addCommand("workspace:export",{execute:e=>e.widget.viewer.download(),iconClass:"menu-export",label:"Export CSV",mnemonic:0}),t.addCommand("workspace:copy",{execute:e=>e.widget.viewer.copy(),iconClass:"menu-copy",label:"Copy To Clipboard",mnemonic:0}),t.addCommand("workspace:reset",{execute:e=>e.widget.viewer.reset(),iconClass:"menu-reset",label:"Reset",mnemonic:0}),t.addCommand("workspace:duplicate",{execute:({widget:t})=>e.duplicate(t),iconClass:"menu-duplicate",isVisible:t=>t.widget.parent===e.dockpanel,label:"Duplicate",mnemonic:0}),t.addCommand("workspace:master",{execute:t=>e.toggleMasterDetail(t.widget),isVisible:()=>e.mode===W.GLOBAL_FILTERS,iconClass:t=>t.widget.parent===e.dockpanel?"menu-master":"menu-detail",label:t=>t.widget.parent===e.dockpanel?"Create Global Filter":"Remove Global Filter",mnemonic:0}),t.addCommand("workspace:link",{execute:t=>e.toggleLink(t.widget),isVisible:()=>e.mode===W.LINKED,iconClass:t=>e.isLinked(t.widget)?"menu-unlink":"menu-link",label:t=>e.isLinked(t.widget)?"Unlink":"Link",mnemonic:0}),t.addCommand("workspace:maximize",{execute:t=>e.toggleSingleDocument(t.widget),isVisible:t=>t.widget.parent===e.dockpanel&&"single-document"!==e.dockpanel.mode,iconClass:"menu-maximize",label:()=>"Maximize",mnemonic:0}),t.addCommand("workspace:minimize",{execute:t=>e.toggleSingleDocument(t.widget),isVisible:t=>t.widget.parent===e.dockpanel&&"single-document"===e.dockpanel.mode,iconClass:"menu-minimize",label:()=>"Minimize",mnemonic:0}),t};n(28);class y extends d.Widget{constructor({viewer:e,node:t}){super({node:t}),this.viewer=e,this.master=!1}set master(e){if(void 0!==e&&this._master!==e){var t,n;if(e)this.viewer.classList.add("workspace-master-widget"),this.viewer.classList.remove("workspace-detail-widget"),null===(t=(n=this.viewer).toggleAttribute)||void 0===t||t.call(n,"selectable",!0);else this.viewer.classList.add("workspace-detail-widget"),this.viewer.classList.remove("workspace-master-widget"),this.viewer.removeAttribute("selectable");this._master=e}}get master(){return this._master}get table(){return this.viewer.table}set name(e){null!=e&&(this.viewer.setAttribute("name",e),this.title.label=e,this._name=e)}get name(){return this._name}set linked(e){void 0!==e&&(e?this.viewer.setAttribute("linked",""):this.viewer.removeAttribute("linked"))}get linked(){return this.viewer.hasAttribute("linked")}toggleConfig(){return this.viewer.toggleConfig()}restore(e){const{master:t,table:n,linked:i,name:a,...o}=e;return this.master=t,this.name=a,n&&this.viewer.setAttribute("table",n),this.linked=i,this.viewer.restore({...o})}save(){return{...this.viewer.save(),master:this.master,name:this.viewer.getAttribute("name"),table:this.viewer.getAttribute("table"),linked:this.linked}}removeClass(e){super.removeClass(e),this.viewer&&this.viewer.classList.remove(e)}async onCloseRequest(e){super.onCloseRequest(e),this.viewer.parentElement&&this.viewer.parentElement.removeChild(this.viewer),await this.viewer.delete()}onResize(e){this.notifyResize(),super.onResize(e)}async notifyResize(){this.isVisible&&await this.viewer.notifyResize()}}var _=n(14),A=n.n(_),B=n(15),R=n.n(B),L=n(16),S=n.n(L);const M=[1,3];let z=0;const I={LEFT:"left",RIGHT:"right"},W={GLOBAL_FILTERS:"globalFilters",LINKED:"linked"};class N extends Map{set(e,t){var n;null===(n=this._set_listener)||void 0===n||n.call(this,e,t),super.set(e,t)}get(e){return super.get(e)}delete(e){var t;return!!(null===(t=this._delete_listener)||void 0===t?void 0:t.call(this,e))&&super.delete(e)}addSetListener(e){this._set_listener=e}addDeleteListener(e){this._delete_listener=e}}class O extends b{constructor(e,t={}){var n,i,a;super({orientation:"horizontal"}),a=e=>{const t=e.target.save();if("perspective-click"===e.type&&"hypergrid"===t.plugin)return;const n=new Set([...t["row-pivots"]||[],...t["column-pivots"]||[],...(t.filters||[]).map(e=>e[0])]),i=[...e.detail.config.filters];this.mode===W.LINKED?this._linkedViewers.forEach(t=>{t!==e.target&&this._filterViewer(t,i,n)}):Object(l.toArray)(this.dockpanel.widgets()).forEach(e=>this._filterViewer(e.viewer,i,n))},(i="onPerspectiveSelect")in(n=this)?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,this.addClass("perspective-workspace"),this.dockpanel=new C("main",{enableContextMenu:!1}),this.detailPanel=new d.Panel,this.detailPanel.layout.fitPolicy="set-no-constraint",this.detailPanel.addClass("perspective-scroll-panel"),this.detailPanel.addWidget(this.dockpanel),this.masterPanel=new b({orientation:"vertical"}),this.masterPanel.addClass("master-panel"),this.dockpanel.layoutModified.connect(()=>this.workspaceUpdated()),this.masterPanel.layoutModified.connect(()=>this.workspaceUpdated()),this.layoutModified.connect(()=>this.workspaceUpdated()),this.addWidget(this.detailPanel),this.element=e,this._side=t.side||I.LEFT,this.mode=t.mode||W.GLOBAL_FILTERS,this._linkedViewers=[],this.listeners=new WeakMap,this._tables=new N,this._tables.addSetListener(this._set_listener.bind(this)),this._tables.addDeleteListener(this._delete_listener.bind(this)),this.commands=k(this),this.menuRenderer=new P(this.element),this.customCommands=[]}addTable(e,t){this.tables.set(e,t)}getTable(e){return this.tables.get(e)}removeTable(e){return this.tables.delete(e)}get tables(){return this._tables}set side(e){if(void 0!==I[e.toUpperCase()]){if(this._side!==e&&this.masterPanel.isAttached){const t=this.relativeSizes().slice().reverse();this.detailPanel.close(),this.masterPanel.close(),e===I.LEFT?(this.addWidget(this.masterPanel),this.addWidget(this.detailPanel)):(this.addWidget(this.detailPanel),this.addWidget(this.masterPanel)),this.setRelativeSizes(t)}this._side=e}else console.warn("Unknown `side` attribute:",e)}get side(){return this._side}save(){const e={sizes:[...this.relativeSizes()],detail:C.mapWidgets(e=>e.viewer.getAttribute("slot"),this.dockpanel.saveLayout()),mode:this.mode};if(this.masterPanel.isAttached){const t={widgets:this.masterPanel.widgets.map(e=>e.viewer.getAttribute("slot")),sizes:[...this.masterPanel.relativeSizes()]};e.master=t}const t={};for(const e of this.masterPanel.widgets)t[e.viewer.getAttribute("slot")]=e.save();return C.mapWidgets(e=>{t[e.viewer.getAttribute("slot")]=e.save()},this.dockpanel.saveLayout()),{...e,viewers:t}}restore(e){const{sizes:t,master:n,detail:i,viewers:a=[],mode:o=W.GLOBAL_FILTERS}=S()(e);this.mode=o,this.mode===W.GLOBAL_FILTERS&&n&&n.widgets.length>0?this.setupMasterPanel(t||M):this.addWidget(this.detailPanel);for(const e of this._capture_viewers())for(const t of this._capture_widgets()){const o=this._restore_callback.bind(this,a,e,t);if(i){const e=C.mapWidgets(o.bind(this,!1),i);this.dockpanel.restoreLayout(e)}n&&(this.mode===W.GLOBAL_FILTERS?(n.widgets.forEach(o.bind(this,!0)),n.sizes&&this.masterPanel.setRelativeSizes(n.sizes)):n.widgets.forEach(e=>{const t=o.bind(this,void 0)(e);this.dockpanel.addWidget(t)}))}}*_capture_widgets(){const e=this.getAllWidgets();yield e;for(const t of e)t.node.isConnected||t.close()}*_capture_viewers(){const e=Array.from(this.element.children);yield e;const t=this.getAllWidgets();for(const n of e){!t.find(e=>e.viewer===n)&&Array.from(this.element.children).indexOf(n)>-1&&(this.element.removeChild(n),n.delete())}}_restore_callback(e,t,n,i,a){let o;"string"==typeof a?o=e[a]:(o=a,a=o.slot);let s,r=!!a&&t.find(e=>e.getAttribute("slot")===a);return r?(s=n.find(e=>e.viewer===r),s?s.restore({...o,master:i}):s=this._createWidget({config:{...o,master:i},viewer:r})):o?s=this._createWidgetAndNode({config:{...o,master:i},slot:a}):console.error(`Could not find or create <perspective-viewer> for slot "${a}"`),(i||this.mode===W.LINKED)&&(s.viewer.addEventListener("perspective-select",this.onPerspectiveSelect),s.viewer.addEventListener("perspective-click",this.onPerspectiveSelect),this.masterPanel.addWidget(s)),s.linked&&this._linkWidget(s),s}_validate(e){if(!("view"in e)||"function"!=typeof(null==e?void 0:e.view))throw new Error("Only `perspective.Table()` instances can be added to `tables`");return e}_set_listener(e,t){var n;"function"==typeof(null===(n=t)||void 0===n?void 0:n.then)?t=t.then(this._validate):this._validate(t),this.getAllWidgets().forEach(n=>{n.viewer.getAttribute("table")===e&&n.viewer.load(t)})}_delete_listener(e){return!this.getAllWidgets().some(t=>t.viewer.getAttribute("table")===e)||(console.error(`Cannot remove table: '${e}' because it's still bound to widget(s)`),!1)}update_widget_for_viewer(e){let t=e.getAttribute("slot");if(t||(t=this._gen_id(),e.setAttribute("slot",t)),e.getAttribute("table")){if(!this.node.querySelector(`slot[name=${t}]`)){console.warn(`Undocked ${e.outerHTML}, creating default layout`);const t=this._createWidget({name:e.getAttribute("name"),table:this.tables.get(e.getAttribute("table")),config:{master:!1},viewer:e});this.dockpanel.addWidget(t),this.dockpanel.activateWidget(t)}}else console.warn(`No table set for ${e.outerHTML}`)}remove_unslotted_widgets(e){const t=this.getAllWidgets();for(const n of t){-1===e.indexOf(n.viewer)&&n.close()}}duplicate(e){"single-document"===this.dockpanel.mode&&this.toggleSingleDocument(e);const t=e.save();t.name=t.name?`${t.name} (duplicate)`:"";const n=this._createWidgetAndNode({config:t});if(t.linked&&this._linkWidget(n),e.master){const t=this.masterPanel.widgets.indexOf(e)+1;this.masterPanel.insertWidget(t,n)}else this.dockpanel.addWidget(n,{mode:"split-right",ref:e})}toggleMasterDetail(e){const t=e.parent!==this.dockpanel;this.element.dispatchEvent(new CustomEvent("workspace-toggle-global-filter",{detail:{widget:e,isGlobalFilter:!t}})),t?this.makeDetail(e):("single-document"===this.dockpanel.mode&&this.toggleSingleDocument(e),this.makeMaster(e))}_maximize(e){e.viewer.classList.add("widget-maximize"),this._minimizedLayout=this.dockpanel.saveLayout(),this._maximizedWidget=e,this.dockpanel.mode="single-document",this.dockpanel.activateWidget(e),e.notifyResize()}_unmaximize(){this._maximizedWidget.viewer.classList.remove("widget-maximize"),this.dockpanel.mode="multiple-document",this.dockpanel.restoreLayout(this._minimizedLayout)}toggleSingleDocument(e){"single-document"!==this.dockpanel.mode?this._maximize(e):this._unmaximize()}async _filterViewer(e,t,n){const i=e.save(),a=Object.keys(await e.table.schema()),o=i.filters||[],s=t.filter(e=>e[0]&&a.includes(e[0]));s.push(...o.filter(e=>!n.has(e[0])));const r=A()(s,e=>e[0]);e.restore({filters:r})}async makeMaster(e){e.master=!0,e.viewer.hasAttribute("settings")&&await e.toggleConfig(),this.masterPanel.isAttached||(this.detailPanel.close(),this.setupMasterPanel(M)),this.masterPanel.addWidget(e),e.isHidden&&e.show(),e.viewer.restyleElement(),e.viewer.addEventListener("perspective-click",this.onPerspectiveSelect),e.viewer.addEventListener("perspective-select",this.onPerspectiveSelect)}makeDetail(e){e.master=!1,this.dockpanel.addWidget(e,{mode:`split-${this._side}`}),0===this.masterPanel.widgets.length&&(this.detailPanel.close(),this.masterPanel.close(),this.addWidget(this.detailPanel)),e.viewer.restyleElement(),e.viewer.removeEventListener("perspective-click",this.onPerspectiveSelect),e.viewer.removeEventListener("perspective-select",this.onPerspectiveSelect)}isLinked(e){return this._linkedViewers.indexOf(e.viewer)>-1}_linkWidget(e){e.title.className+=" linked",-1===this._linkedViewers.indexOf(e.viewer)&&(this._linkedViewers.push(e.viewer),1===this._linkedViewers.length&&this.getAllWidgets().forEach(e=>{e.viewer.save()["row-pivots"]&&e.viewer.restore({selectable:!0})}))}toggleLink(e){e.linked=!e.linked,e.linked?this._linkWidget(e):(e.title.className=e.title.className.replace(/ linked/g,""),this._linkedViewers=this._linkedViewers.filter(t=>t!==e.viewer),0===this._linkedViewers.length&&this.getAllWidgets().forEach(e=>e.viewer.restore({selectable:!1})))}createContextMenu(e){const t=new d.Menu({commands:this.commands,renderer:this.menuRenderer});return t.addItem({command:"workspace:maximize",args:{widget:e}}),t.addItem({command:"workspace:minimize",args:{widget:e}}),t.addItem({command:"workspace:duplicate",args:{widget:e}}),t.addItem({command:"workspace:master",args:{widget:e}}),t.addItem({command:"workspace:link",args:{widget:e}}),t.addItem({type:"separator"}),t.addItem({command:"workspace:export",args:{widget:e}}),t.addItem({command:"workspace:copy",args:{widget:e}}),t.addItem({command:"workspace:reset",args:{widget:e}}),t.addItem({type:"separator"}),t.addItem({command:"workspace:close",args:{widget:e}}),this.customCommands.length>0&&(t.addItem({type:"separator"}),this.customCommands.forEach(n=>{t.addItem({command:n,args:{widget:e}})})),t}showContextMenu(e,t){const n=this.createContextMenu(e),i=Object(l.find)(this.dockpanel.tabBars(),t=>t.currentTitle.owner===e);e.addClass("context-focus"),e.viewer.classList.add("context-focus"),i&&i.node.classList.add("context-focus"),this.element.classList.add("context-menu"),this.addClass("context-menu"),e.viewer.classList.contains("workspace-master-widget")?n.node.classList.add("workspace-master-menu"):n.node.classList.remove("workspace-master-menu"),this._menu_opened=!0,n.aboutToClose.connect(()=>{var t;this.element.classList.remove("context-menu"),this.removeClass("context-menu"),e.removeClass("context-focus"),null==i||null===(t=i.node)||void 0===t||t.classList.remove("context-focus")}),n.open(t.clientX,t.clientY),t.preventDefault(),t.stopPropagation()}clearLayout(){this.getAllWidgets().forEach(e=>e.close()),this.widgets.forEach(e=>e.close()),this.detailPanel.close(),this._linkedViewers=[],this.masterPanel.isAttached&&this.masterPanel.close()}setupMasterPanel(e){this.side===I.RIGHT?(this.addWidget(this.detailPanel),this.addWidget(this.masterPanel),this.setRelativeSizes(e.slice().reverse())):(this.addWidget(this.masterPanel),this.addWidget(this.detailPanel),this.setRelativeSizes(e))}_addContextMenuItem(e){this.customCommands.push(e.id),this.commands.addCommand(e.id,{execute:t=>e.execute({widget:t.widget}),label:e.label,isVisible:t=>e.isVisible({widget:t.widget}),mnemonic:0})}addViewer(e){const t=this._createWidgetAndNode({config:e});"single-document"===this.dockpanel.mode&&this.toggleSingleDocument(),e.master?(this.masterPanel.isAttached||this.setupMasterPanel(M),this.masterPanel.addWidget(t)):(this.detailPanel.isAttached||this.addWidget(this.detailPanel),this.dockpanel.addWidget(t,{mode:"split-right"})),this.update()}_createWidgetAndNode({config:e,slot:t}){const n=this._createNode(t),i=e.table,a=document.createElement("perspective-viewer");return a.setAttribute("slot",n.querySelector("slot").getAttribute("name")),i&&a.setAttribute("table",i),this._createWidget({config:e,node:n,viewer:a})}_gen_id(){let e=`PERSPECTIVE_GENERATED_ID_${z++}`;return this.element.querySelector(`[slot=${e}]`)&&(e=this._gen_id()),e}_createNode(e){let t=this.node.querySelector(`slot[name=${e}]`);if(t)t=t.parentElement.parentElement;else{const n=document.createElement("slot");e=e||this._gen_id(),n.setAttribute("name",e);const i=document.createElement("div");i.classList.add("viewer-container"),i.appendChild(n),t=document.createElement("div"),t.classList.add("workspace-widget"),t.appendChild(i)}return t}_createWidget({config:e,node:t,viewer:n}){if(e.name=e.name||n.getAttribute("name"),!t){const e=n.getAttribute("slot");t=(t=this.node.querySelector(`slot[name=${e}]`))?t.parentElement.parentElement:this._createNode(e)}const i=this.tables.get(n.getAttribute("table")||e.table),a=new y({node:t,viewer:n}),o=new CustomEvent("workspace-new-view",{detail:{config:e,widget:a}});return this.element.dispatchEvent(o),a.title.closable=!0,this.element.appendChild(a.viewer),i&&a.viewer.load(i),a.restore(e).then(()=>{this._addWidgetEventListeners(a)}),a}_addWidgetEventListeners(e){this.listeners.has(e)&&this.listeners.get(e)();const t=t=>{t.detail?e.title.className+=" settings_open":e.title.className=e.title.className.replace(/settings_open/g,"")},n=t=>this.showContextMenu(e,t),i=e=>{if(this.workspaceUpdated(),this.mode===W.LINKED){var t;const n=null===(t=e.target)||void 0===t?void 0:t.save();if(n){const t=this._linkedViewers.length>0&&!!n["row-pivots"];t!==!!n.selectable&&e.target.restore({selectable:t})}}};e.node.addEventListener("contextmenu",n),e.viewer.addEventListener("perspective-toggle-settings",t),e.viewer.addEventListener("perspective-config-update",i),e.title.changed.connect(i),this.listeners.set(e,()=>{e.node.removeEventListener("contextmenu",n),e.viewer.removeEventListener("perspective-toggle-settings",t),e.viewer.removeEventListener("perspective-config-update",i),e.title.changed.disconnect(i)})}getAllWidgets(){return[...this.masterPanel.widgets,...Object(l.toArray)(this.dockpanel.widgets())]}_fireUpdateEvent(){const e=this.save();if(e){const t={};this.tables.forEach((e,n)=>{t[n]=e}),this.element.dispatchEvent(new CustomEvent("workspace-layout-update",{detail:{tables:t,layout:e}}))}}workspaceUpdated(){this._save||(this._save=R()(()=>"single-document"!==this.dockpanel.mode&&this._fireUpdateEvent(),500)),this._save()}}var q,j=n(5),V=n(17),F=n.n(V);function J(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(J.prototype,HTMLElement.prototype),Object.setPrototypeOf(J,HTMLElement);Object(r.bindTemplate)(s.a,a.a)(q=class extends J{set side(e){this.setAttribute("side",e),this.workspace&&(this.workspace.side=e)}get side(){return this.getAttribute("side")}save(){return this.workspace.save()}restore(e){return this.workspace.restore(e)}addTable(e,t){this.workspace.addTable(e,t)}getTable(e){return this.workspace.getTable(e)}removeTable(e){return this.workspace.removeTable(e)}get tables(){return this.workspace.tables}notifyResize(){this.workspace.update()}_light_dom_changed(){const e=Array.from(this.childNodes);for(const t of e)[Node.TEXT_NODE,document.COMMENT_NODE].indexOf(t.nodeType)>-1||this.workspace.update_widget_for_viewer(t);this.workspace.remove_unslotted_widgets(e)}_register_light_dom_listener(){new MutationObserver(this._light_dom_changed.bind(this)).observe(this,{attributes:!1,childList:!0,subtree:!0}),this._light_dom_changed()}connectedCallback(){this.side=this.side||I.LEFT;const e=this.shadowRoot.querySelector("#container");this.workspace=new O(this,{side:this.side}),this._register_light_dom_listener(),this._injectStyle=document.createElement("style"),this._injectStyle.innerHTML=F.a,document.head.appendChild(this._injectStyle),j.MessageLoop.sendMessage(this.workspace,d.Widget.Msg.BeforeAttach),e.insertBefore(this.workspace.node,null),j.MessageLoop.sendMessage(this.workspace,d.Widget.Msg.AfterAttach),window.onresize=()=>{this.workspace.update()}}disconnectedCallback(){document.head.removeChild(this._injectStyle)}})}]);
//# sourceMappingURL=perspective-workspace.js.map