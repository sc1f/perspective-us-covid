{"version":3,"sources":["webpack:///packages/perspective-workspace/webpack/bootstrap","webpack:///packages/perspective-workspace/external \"@lumino/widgets\"","webpack:///node_modules/css-loader/lib/css-base.js","webpack:///packages/perspective-workspace/external \"@lumino/algorithm\"","webpack:///packages/perspective-workspace/external \"@lumino/virtualdom\"","webpack:///packages/perspective-workspace/external \"core-js/modules/web.dom-collections.iterator\"","webpack:///packages/perspective-workspace/external \"@lumino/messaging\"","webpack:///packages/perspective-workspace/external \"core-js/modules/es.promise\"","webpack:///packages/perspective-workspace/external \"core-js/modules/es.string.replace\"","webpack:///packages/perspective-workspace/dist/less/workspace.less","webpack:///packages/perspective-workspace/dist/html/workspace.html","webpack:///packages/perspective-workspace/external \"@finos/perspective-viewer/dist/esm/utils\"","webpack:///packages/perspective-workspace/external \"@lumino/signaling\"","webpack:///packages/perspective-workspace/external \"@lumino/domutils\"","webpack:///packages/perspective-workspace/external \"@lumino/commands\"","webpack:///packages/perspective-workspace/external \"lodash/uniqBy\"","webpack:///packages/perspective-workspace/external \"lodash/debounce\"","webpack:///packages/perspective-workspace/external \"lodash/cloneDeep\"","webpack:///packages/perspective-workspace/dist/less/injected.less","webpack:///node_modules/@lumino/widgets/style/index.css","webpack:///node_modules/@lumino/widgets/style/widget.css","webpack:///node_modules/@lumino/widgets/style/commandpalette.css","webpack:///node_modules/@lumino/widgets/style/dockpanel.css","webpack:///node_modules/@lumino/widgets/style/menu.css","webpack:///node_modules/@lumino/widgets/style/menubar.css","webpack:///node_modules/@lumino/widgets/style/scrollbar.css","webpack:///node_modules/@lumino/widgets/style/splitpanel.css","webpack:///node_modules/@lumino/widgets/style/tabbar.css","webpack:///node_modules/@lumino/widgets/style/tabpanel.css","webpack:///packages/perspective-workspace/external \"@finos/perspective-viewer\"","webpack:///../src/js/workspace/discrete.js","webpack:///../src/js/workspace/tabbarrenderer.js","webpack:///../src/js/workspace/tabbar.js","webpack:///../src/js/workspace/dockpanel.js","webpack:///../src/js/workspace/menu.js","webpack:///../src/js/workspace/commands.js","webpack:///../src/js/workspace/widget.js","webpack:///../src/js/workspace/workspace.js","webpack:///src/js/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","useSourceMap","list","toString","this","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","push","DISCRETE_STEP_SIZE","DiscreteContext","_clamp","orient","client","margin","width","height","min","max","_rect","undefined","_block_move","val","_offset_drag_start","old","_offset_drag_current","diff","Math","_check_prev","clientX","clientY","x","old_clientX","y","old_clientY","calculate_move","left","top","blockX","blockY","constructor","rect","extend","base","handle","handleEvent","event","type","elem","target","classList","contains","parentElement","some","getAttribute","addClass","_offset_target","add","context","node","getBoundingClientRect","shiftKey","preventDefault","stopPropagation","update","new_event","evt","document","createEvent","initMouseEvent","cancelable","view","detail","screenX","screenY","ctrlKey","altKey","metaKey","button","relatedTarget","cloneMouseEvent","super","removeClass","remove","DiscreteDockPanel","DockPanel","DiscreteSplitPanel","SplitPanel","args","layoutModified","Signal","onUpdateRequest","emit","onResize","msg","widget","toArray","widgets","style","minWidth","minHeight","TabBarItems","Config","Label","DEFAULT_TITLE","PerspectiveTabBarRenderer","TabBar","Renderer","maximized","renderLabel","data","h","input","className","readonly","title","label","renderTab","caption","createTabKey","createTabStyle","createTabClass","dataset","createTabDataset","li","renderConfigIcon","renderCloseIcon","div","PerspectiveTabBar","options","_addEventListeners","__content_node__","contentNode","_check_shade","Array","from","children","filter","retargetEvent","currentTitle","owner","parent","showContextMenu","onTitleChangeRequest","tabs","index","ArrayExt","findFirstIndex","tab","ElementExt","hitTest","titles","toggleConfig","oldValue","stopEvents","listeners","mousemove","mousedown","mouseup","keydown","keyCode","removeEventListeners","setAttribute","blur","eventName","removeEventListener","addEventListener","removeAttribute","focus","checkCondensed","offsetWidth","composedPath","PerspectiveDockPanelRenderer","createTabBar","tabbar","renderer","PerspectiveDockPanel","_renderer","dock","_onTabDetachRequested","sender","_drag","_promise","then","widgetFunc","layout","main","mapWidgets","onAfterAttach","spacing","parseInt","window","getComputedStyle","padding","MenuRenderer","Menu","element","workspace","renderIcon","createIconClass","command","split","pop","getPropertyValue","replace","trim","iconLabel","createCommands","commands","CommandRegistry","addCommand","execute","viewer","download","iconClass","mnemonic","copy","reset","duplicate","isVisible","dockpanel","toggleMasterDetail","MODE","GLOBAL_FILTERS","toggleLink","LINKED","isLinked","toggleSingleDocument","PerspectiveViewerWidget","Widget","master","_master","toggleAttribute","table","_name","hasAttribute","restore","config","linked","viewerConfig","save","onCloseRequest","removeChild","delete","notifyResize","DEFAULT_WORKSPACE_SIZE","ID_COUNTER","SIDE","LEFT","RIGHT","ObservableMap","Map","set","_set_listener","_delete_listener","addSetListener","listener","addDeleteListener","PerspectiveWorkspace","orientation","plugin","candidates","Set","filters","_linkedViewers","forEach","_filterViewer","enableContextMenu","detailPanel","Panel","fitPolicy","addWidget","masterPanel","connect","workspaceUpdated","_side","side","WeakMap","_tables","menuRenderer","customCommands","addTable","tables","getTable","removeTable","toUpperCase","isAttached","newSizes","relativeSizes","slice","reverse","close","setRelativeSizes","console","warn","sizes","saveLayout","viewers","viewer_configs","cloneDeep","setupMasterPanel","_capture_viewers","_capture_widgets","callback","_restore_callback","detailLayout","restoreLayout","getAllWidgets","isConnected","ending_widgets","find","indexOf","starting_viewers","starting_widgets","widgetName","viewer_config","slot","_createWidget","_createWidgetAndNode","error","onPerspectiveSelect","_linkWidget","_validate","Error","load","update_widget_for_viewer","slot_name","_gen_id","querySelector","outerHTML","activateWidget","remove_unslotted_widgets","insertWidget","ref","isGlobalFilter","dispatchEvent","CustomEvent","makeDetail","makeMaster","_maximize","_minimizedLayout","_maximizedWidget","_unmaximize","availableColumns","keys","schema","currentFilters","validFilters","includes","has","newFilters","uniqBy","isHidden","show","restyleElement","selectable","createContextMenu","contextMenu","addItem","menu","tabBars","bar","_menu_opened","aboutToClose","open","clearLayout","_addContextMenuItem","addViewer","slotname","_createNode","createElement","genId","appendChild","closable","_addWidgetEventListeners","settings","updated","changed","disconnect","_fireUpdateEvent","_save","debounce","bindTemplate","template","_light_dom_changed","childNodes","Node","TEXT_NODE","COMMENT_NODE","nodeType","_register_light_dom_listener","MutationObserver","observe","attributes","childList","subtree","connectedCallback","container","shadowRoot","_injectStyle","innerHTML","injectedStyles","head","MessageLoop","sendMessage","Msg","BeforeAttach","insertBefore","AfterAttach","onresize","disconnectedCallback"],"mappings":"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","file":"perspective-workspace.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 29);\n","module.exports = require(\"@lumino/widgets\");","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","module.exports = require(\"@lumino/algorithm\");","module.exports = require(\"@lumino/virtualdom\");","module.exports = require(\"core-js/modules/web.dom-collections.iterator\");","module.exports = require(\"@lumino/messaging\");","module.exports = require(\"core-js/modules/es.promise\");","module.exports = require(\"core-js/modules/es.string.replace\");","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\nexports.i(require(\"-!../../../../node_modules/css-loader/index.js!@lumino/widgets/style/index.css\"), \"\");\n\n// module\nexports.push([module.id, \":host{background-color:var(--workspace--background-color,#eee);width:100%;height:100%}:host .p-TabBar-tabLabel{background-color:transparent;border:none;color:#666;cursor:pointer;font-family:\\\"Open Sans\\\";font-weight:400;font-size:12px;line-height:22px;text-align:center;white-space:normal!important;word-break:break-all}:host .p-TabBar-tabLabel[value='[untitled]']{color:#ddd!important}:host .p-TabBar-tabLabel:focus{outline:0;color:#666!important;cursor:text}:host .p-TabBar-tab.p-mod-closable>.p-TabBar-tabCloseIcon:before{content:var(--close-button--content, \\\"\\\\2715\\\");font-family:var(--settings--font-family, \\\"Arial\\\")}:host .p-TabBar-tab>.p-TabBar-tabConfigIcon:before{content:var(--open-settings-button--content, \\\"\\\\1F527\\\");font-family:var(--settings--font-family, \\\"Arial\\\");transition:color .5s}:host .p-TabBar-tab.p-mod-current.settings_open>.p-TabBar-tabConfigIcon:before{content:var(--close-settings-button--content, \\\"\\\\1F527\\\");font-family:var(--settings--font-family, \\\"Arial\\\")}:host .p-TabBar-tab.p-mod-current.linked>.p-TabBar-tabConfigIcon:before{color:#22a0ce}:host .p-TabBar-tab>.p-TabBar-tabConfigIcon{opacity:0;pointer-events:none}:host .p-TabBar-tab.p-mod-current>.p-TabBar-tabConfigIcon{opacity:1;pointer-events:all}:host .p-mod-current .p-TabBar-tabCloseIcon,:host .p-mod-current .p-TabBar-tabConfigIcon{color:#ccc;transition:color .2s ease-out}:host .p-mod-current .p-TabBar-tabCloseIcon:hover,:host .p-mod-current .p-TabBar-tabConfigIcon:hover{color:#1a7da1;transition:color .2s ease-out}:host .p-BoxPanel{overflow:scroll!important}:host .p-TabBar,:host .p-TabBar-tab{position:relative;overflow:visible!important}:host .p-TabBar-tabLabel:empty::after{content:\\\"[untitled]\\\";color:#aaa;content:\\\"[untitled]\\\"}:host .p-mod-current .p-TabBar-tabLabel:empty::after{color:#ddd}:host .divider{left:14px;bottom:0;position:absolute;right:14px;display:none;transition:background-color .2s ease-out,width .2s ease-out;height:1px;background-color:#eaeaea;margin-bottom:0}:host .p-TabBar-tab.p-mod-hidden{display:flex!important;opacity:.5}:host .p-TabBar-tab.p-mod-hidden .divider{display:none}:host .p-TabBar-tab.p-mod-current .divider{display:block}:host .p-TabBar-tabLabel input{height:18px}:host .p-TabBar{min-height:24px!important}:host .pfm-button-base{background:#fff!important}:host .pfm-button-base:active{background:#016bc6!important}:host .p-TabBar-content{padding:0;overflow:hidden;margin:0 -4px -1px;border-bottom:0 solid #fff!important;border-left:#eaeaea;border-right:#eaeaea}:host .p-TabBar-tab.p-mod-current .shadow{margin:-1px;position:absolute;width:calc(100% + 2px);height:200%;pointer-events:none;left:0}:host .p-TabBar-tab.p-mod-current.settings_open .shadow{box-shadow:none}:host .p-TabBar-tab{margin:0 4px;border-color:#eaeaea}:host .p-TabBar-content>.p-TabBar-tab,:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open{background-color:#eee}:host .p-TabBar-content.inactive-blur>.p-TabBar-tab{background-color:#ddd}:host .condensed .p-TabBar-content>.p-TabBar-tab .p-TabBar-tabConfigIcon{display:none}:host .condensed .p-TabBar-content>.p-TabBar-tab.p-mod-current .p-TabBar-tabConfigIcon{display:block}:host .condensed .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .p-TabBar-tabLabel{margin-left:0}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open{border-width:1px!important;border-color:transparent;background-color:transparent!important}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .p-TabBar-tabToolbar{display:flex}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .divider{height:1px;margin-bottom:0;left:10px;right:10px}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open:last-child:first-child .divider{background:0 0;transition:none}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.perspective_updating .p-TabBar-tabConfigIcon{display:none}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.perspective_updating .p-TabBar-tabLoadingIcon{display:block}:host .p-TabBar-content>.p-TabBar-tab{max-width:100000px!important;flex:0 1 100000px!important;background:0 0;padding-top:1px!important;height:24px!important;max-height:24px!important;transform:none!important;transition:color .2s ease-out;border:1px solid transparent;color:#ccc}:host .p-TabBar-content>.p-TabBar-tab .p-TabBar-tabLabel{color:#666}:host .p-TabBar-content>.p-TabBar-tab:hover{color:#ccc}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current{color:#666;color:var(--detail-tabbar--color,#666)!important;border:var(--detail-tabbar--border,1px solid #eaeaea);background-color:var(--detail-tabbar--background-color,#fff);height:26px!important;max-height:26px!important}:host .p-TabBar-tab.p-mod-current .p-TabBar-tabLabel{white-space:nowrap!important}:host .p-TabBar-tabCloseIcon,:host .p-TabBar-tabConfigIcon{cursor:pointer!important;line-height:22px!important;padding-right:8px!important}:host .p-TabBar-tabConfigIcon{padding-left:8px}:host .p-TabBar-tabLoadingIcon{padding-left:11px;padding-right:12px}:host .bottom .p-TabBar-tab{flex-basis:10000px!important;max-width:10000px!important}:host .bottom .p-TabBar-tab.p-mod-current{border:none}:host ::-webkit-scrollbar-thumb{background-color:#ccc}:host .perspective-workspace.context-menu * .p-TabBar.context-focus{opacity:1}:host .perspective-workspace.context-menu * .p-TabBar{opacity:.2;transition:opacity .2s ease-out}:host .p-DockPanel{overflow:visible!important;position:absolute;background-color:var(--detail--background-color,transparent);padding:8px;top:0;left:0;right:0;bottom:0}:host .perspective-scroll-panel::-webkit-scrollbar{width:1em;height:1em}:host .perspective-scroll-panel::-webkit-scrollbar-track{background-color:#eee}:host .perspective-scroll-panel::-webkit-scrollbar-corner{background-color:#eee}:host .perspective-scroll-panel::-webkit-scrollbar-thumb{background-color:#aaa;height:.8em;width:.8em;border:8px solid #eee;border-left-width:0;border-top-width:0}:host .p-DockPanel.ew,:host .p-DockPanel.ew .p-Widget,:host .p-SplitPanel.ew,:host .p-SplitPanel.ew .p-Widget{cursor:ew-resize!important}:host .p-DockPanel.ns,:host .p-DockPanel.ns .p-Widget,:host .p-SplitPanel.ns,:host .p-SplitPanel.ns .p-Widget{cursor:ns-resize!important}:host .workspace-master-widget{min-width:300px}:host .p-DockPanel.resizing ::slotted(perspective-viewer),:host .p-SplitPanel.resizing ::slotted(perspective-viewer){pointer-events:none}:host .widget-blur ::slotted(perspective-viewer){opacity:.5}:host .p-DockPanel-handle.resizing{background-color:rgba(0,0,0,.05)}:host .perspective-scroll-panel{overflow:auto!important}:host .p-Panel{min-height:100%}:host .p-DockPanel-handle{background-color:none}:host .p-DockPanel-overlay{background:rgba(75,75,75,.2);border:1px dashed #666;transition-property:top,left,right,bottom;transition-duration:50ms;transition-timing-function:ease;margin:0}:host .viewer-container{flex:1;height:100%;overflow:hidden}:host .workspace-widget{display:flex;flex-direction:column;border:1px solid #eaeaea;border-width:0!important;min-width:300px;min-height:200px}:host .workspace{width:100%;height:100%}:host .p-SplitPanel{height:100%;width:100%}:host div.p-SplitPanel-handle{background-color:var(--master-divider--background-color)}:host .master-panel{background-color:#2f3136}:host .perspective-workspace.context-menu * .p-SplitPanel-handle{opacity:.2}:host .perspective-workspace.context-menu>.p-SplitPanel-handle{opacity:.2}\", \"\"]);\n\n// exports\n","module.exports = \"<!--\\n\\nCopyright (c) 2017, the Perspective Authors.\\n\\nThis file is part of the Perspective library, distributed under the terms of\\nthe Apache License 2.0.  The full license can be found in the LICENSE file.\\n\\n-->\\n<template id=\\\"perspective-workspace\\\">\\n    <div id=\\\"container\\\" class=\\\"workspace\\\"></div>\\n</template>\";","module.exports = require(\"@finos/perspective-viewer/dist/esm/utils\");","module.exports = require(\"@lumino/signaling\");","module.exports = require(\"@lumino/domutils\");","module.exports = require(\"@lumino/commands\");","module.exports = require(\"lodash/uniqBy\");","module.exports = require(\"lodash/debounce\");","module.exports = require(\"lodash/cloneDeep\");","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".workspace-master-widget{--settings-button--content:var(--open-settings-button--content, \\\"\\\\1F527\\\")!important}.workspace-master-widget[settings]{--settings-button--content:var(--close-settings-button--content, \\\"\\\\1F527\\\")!important}.workspace-detail-widget.widget-maximize{--settings-button--content:var(--open-settings-button--content, \\\"\\\\1F527\\\")!important}.workspace-detail-widget.widget-maximize[settings]{--settings-button--content:var(--close-settings-button--content, \\\"\\\\1F527\\\")!important}.p-DockPanel-widget{border:1px solid #eaeaea;border-width:0!important;min-width:300px;min-height:200px}.workspace-detail-widget{--settings-button--content:\\\"\\\"!important;--plugin--border:1px solid #eaeaea}.context-menu>perspective-viewer.context-focus{opacity:1}.context-menu>perspective-viewer{opacity:.2}perspective-viewer{flex:1;position:relative;display:block;align-items:center;justify-content:center;flex-direction:column;width:100%;height:100%;overflow:visible!important;font-family:\\\"Open Sans\\\",Arial,sans-serif;transition:opacity .2s ease-out}.lm-Menu,.p-Menu{z-index:10000;position:absolute;white-space:nowrap;overflow-x:hidden;overflow-y:auto;outline:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.lm-Menu-content,.p-Menu-content{margin:0;padding:0;display:table;list-style-type:none}.lm-Menu-item,.p-Menu-item{display:table-row}.lm-Menu-item.lm-mod-collapsed,.lm-Menu-item.lm-mod-hidden,.p-Menu-item.p-mod-collapsed,.p-Menu-item.p-mod-hidden{display:none!important}.lm-Menu-itemIcon,.lm-Menu-itemSubmenuIcon,.p-Menu-itemIcon,.p-Menu-itemSubmenuIcon{display:table-cell;text-align:center}.lm-Menu-itemLabel,.p-Menu-itemLabel{display:table-cell;text-align:left}.lm-Menu-itemShortcut,.p-Menu-itemShortcut{display:table-cell;text-align:right}.p-Menu{padding:12px;background:#fff;color:#666;border:1px solid #ccc;border-left-width:0;border-top-width:0;border-right-width:1px;font:12px Helvetica,Arial,sans-serif;box-shadow:rgba(0,0,0,.2) 0 3px 1px -2px,rgba(0,0,0,.14) 0 2px 2px 0,rgba(0,0,0,.12) 0 1px 5px 0}.p-Menu.workspace-master-menu{background:#2a2f36;color:#ccc;border:1px solid #555e6b}.p-Menu-item.p-mod-active{background:#e5e5e5}.p-Menu-item.p-mod-disabled{color:rgba(0,0,0,.25)}.p-Menu-itemIcon{width:21px;padding:4px 2px}.p-Menu-itemLabel{padding:4px 2px}.p-Menu-itemMnemonic{text-decoration:underline}.p-Menu-itemShortcut{padding:4px 0}.p-Menu-itemSubmenuIcon{width:16px;padding:4px 0}.p-Menu-item[data-type=separator]>div{padding:0;height:9px}.p-Menu-item[data-type=separator]>div::after{content:\\\"\\\";display:block;position:relative;top:4px;border-top:1px solid #ddd}.p-Menu-itemIcon::before,.p-Menu-itemSubmenuIcon::before{font-family:\\\"Material Icons\\\"}.p-MenuBar-menu{transform:translateY(-1px)}.p-MenuBar-item{padding:10px 32px;border-left:1px solid transparent;border-right:1px solid transparent;color:#737373!important}.p-MenuBar-item.p-mod-active{background:#e5e5e5}.p-MenuBar.p-mod-active .p-MenuBar-item.p-mod-active{z-index:10001;background:#fff;border-left:1px solid silver;border-right:1px solid silver}.p-Menu-itemIcon:before{content:attr(content);font-family:\\\"Material Icons\\\"}.p-mod-drag-image.p-TabBar-tab{display:none}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../css-loader/lib/css-base.js\")(false);\n// imports\nexports.i(require(\"-!../../../css-loader/index.js!./widget.css\"), \"\");\nexports.i(require(\"-!../../../css-loader/index.js!./commandpalette.css\"), \"\");\nexports.i(require(\"-!../../../css-loader/index.js!./dockpanel.css\"), \"\");\nexports.i(require(\"-!../../../css-loader/index.js!./menu.css\"), \"\");\nexports.i(require(\"-!../../../css-loader/index.js!./menubar.css\"), \"\");\nexports.i(require(\"-!../../../css-loader/index.js!./scrollbar.css\"), \"\");\nexports.i(require(\"-!../../../css-loader/index.js!./splitpanel.css\"), \"\");\nexports.i(require(\"-!../../../css-loader/index.js!./tabbar.css\"), \"\");\nexports.i(require(\"-!../../../css-loader/index.js!./tabpanel.css\"), \"\");\n\n// module\nexports.push([module.id, \"/*-----------------------------------------------------------------------------\\n| Copyright (c) Jupyter Development Team.\\n| Copyright (c) 2014-2017, PhosphorJS Contributors\\n|\\n| Distributed under the terms of the BSD 3-Clause License.\\n|\\n| The full license is in the file LICENSE, distributed with this software.\\n|----------------------------------------------------------------------------*/\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*-----------------------------------------------------------------------------\\n| Copyright (c) Jupyter Development Team.\\n| Copyright (c) 2014-2017, PhosphorJS Contributors\\n|\\n| Distributed under the terms of the BSD 3-Clause License.\\n|\\n| The full license is in the file LICENSE, distributed with this software.\\n|----------------------------------------------------------------------------*/\\n\\n\\n/* <DEPRECATED> */ .p-Widget, /* </DEPRECATED> */\\n.lm-Widget {\\n  box-sizing: border-box;\\n  position: relative;\\n  overflow: hidden;\\n  cursor: default;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-Widget.p-mod-hidden, /* </DEPRECATED> */\\n.lm-Widget.lm-mod-hidden {\\n  display: none !important;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*-----------------------------------------------------------------------------\\n| Copyright (c) Jupyter Development Team.\\n| Copyright (c) 2014-2017, PhosphorJS Contributors\\n|\\n| Distributed under the terms of the BSD 3-Clause License.\\n|\\n| The full license is in the file LICENSE, distributed with this software.\\n|----------------------------------------------------------------------------*/\\n\\n\\n/* <DEPRECATED> */ .p-CommandPalette, /* </DEPRECATED> */\\n.lm-CommandPalette {\\n  display: flex;\\n  flex-direction: column;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-CommandPalette-search, /* </DEPRECATED> */\\n.lm-CommandPalette-search {\\n  flex: 0 0 auto;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-CommandPalette-content, /* </DEPRECATED> */\\n.lm-CommandPalette-content {\\n  flex: 1 1 auto;\\n  margin: 0;\\n  padding: 0;\\n  min-height: 0;\\n  overflow: auto;\\n  list-style-type: none;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-CommandPalette-header, /* </DEPRECATED> */\\n.lm-CommandPalette-header {\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-CommandPalette-item, /* </DEPRECATED> */\\n.lm-CommandPalette-item {\\n  display: flex;\\n  flex-direction: row;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-CommandPalette-itemIcon, /* </DEPRECATED> */\\n.lm-CommandPalette-itemIcon {\\n  flex: 0 0 auto;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-CommandPalette-itemContent, /* </DEPRECATED> */\\n.lm-CommandPalette-itemContent {\\n  flex: 1 1 auto;\\n  overflow: hidden;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-CommandPalette-itemShortcut, /* </DEPRECATED> */\\n.lm-CommandPalette-itemShortcut {\\n  flex: 0 0 auto;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-CommandPalette-itemLabel, /* </DEPRECATED> */\\n.lm-CommandPalette-itemLabel {\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*-----------------------------------------------------------------------------\\n| Copyright (c) Jupyter Development Team.\\n| Copyright (c) 2014-2017, PhosphorJS Contributors\\n|\\n| Distributed under the terms of the BSD 3-Clause License.\\n|\\n| The full license is in the file LICENSE, distributed with this software.\\n|----------------------------------------------------------------------------*/\\n\\n\\n/* <DEPRECATED> */ .p-DockPanel, /* </DEPRECATED> */\\n.lm-DockPanel {\\n  z-index: 0;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-DockPanel-widget, /* </DEPRECATED> */\\n.lm-DockPanel-widget {\\n  z-index: 0;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-DockPanel-tabBar, /* </DEPRECATED> */\\n.lm-DockPanel-tabBar {\\n  z-index: 1;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-DockPanel-handle, /* </DEPRECATED> */\\n.lm-DockPanel-handle {\\n  z-index: 2;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-DockPanel-handle.p-mod-hidden, /* </DEPRECATED> */\\n.lm-DockPanel-handle.lm-mod-hidden {\\n  display: none !important;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-DockPanel-handle:after, /* </DEPRECATED> */\\n.lm-DockPanel-handle:after {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  content: '';\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-DockPanel-handle[data-orientation='horizontal'],\\n/* </DEPRECATED> */\\n.lm-DockPanel-handle[data-orientation='horizontal'] {\\n  cursor: ew-resize;\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-DockPanel-handle[data-orientation='vertical'],\\n/* </DEPRECATED> */\\n.lm-DockPanel-handle[data-orientation='vertical'] {\\n  cursor: ns-resize;\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-DockPanel-handle[data-orientation='horizontal']:after,\\n/* </DEPRECATED> */\\n.lm-DockPanel-handle[data-orientation='horizontal']:after {\\n  left: 50%;\\n  min-width: 8px;\\n  transform: translateX(-50%);\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-DockPanel-handle[data-orientation='vertical']:after,\\n/* </DEPRECATED> */\\n.lm-DockPanel-handle[data-orientation='vertical']:after {\\n  top: 50%;\\n  min-height: 8px;\\n  transform: translateY(-50%);\\n}\\n\\n\\n/* <DEPRECATED> */ .p-DockPanel-overlay, /* </DEPRECATED> */\\n.lm-DockPanel-overlay {\\n  z-index: 3;\\n  box-sizing: border-box;\\n  pointer-events: none;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-DockPanel-overlay.p-mod-hidden, /* </DEPRECATED> */\\n.lm-DockPanel-overlay.lm-mod-hidden {\\n  display: none !important;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*-----------------------------------------------------------------------------\\n| Copyright (c) Jupyter Development Team.\\n| Copyright (c) 2014-2017, PhosphorJS Contributors\\n|\\n| Distributed under the terms of the BSD 3-Clause License.\\n|\\n| The full license is in the file LICENSE, distributed with this software.\\n|----------------------------------------------------------------------------*/\\n\\n\\n/* <DEPRECATED> */ .p-Menu, /* </DEPRECATED> */\\n.lm-Menu {\\n  z-index: 10000;\\n  position: absolute;\\n  white-space: nowrap;\\n  overflow-x: hidden;\\n  overflow-y: auto;\\n  outline: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-Menu-content, /* </DEPRECATED> */\\n.lm-Menu-content {\\n  margin: 0;\\n  padding: 0;\\n  display: table;\\n  list-style-type: none;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-Menu-item, /* </DEPRECATED> */\\n.lm-Menu-item {\\n  display: table-row;\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-Menu-item.p-mod-hidden,\\n.p-Menu-item.p-mod-collapsed,\\n/* </DEPRECATED> */\\n.lm-Menu-item.lm-mod-hidden,\\n.lm-Menu-item.lm-mod-collapsed {\\n  display: none !important;\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-Menu-itemIcon,\\n.p-Menu-itemSubmenuIcon,\\n/* </DEPRECATED> */\\n.lm-Menu-itemIcon,\\n.lm-Menu-itemSubmenuIcon {\\n  display: table-cell;\\n  text-align: center;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-Menu-itemLabel, /* </DEPRECATED> */\\n.lm-Menu-itemLabel {\\n  display: table-cell;\\n  text-align: left;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-Menu-itemShortcut, /* </DEPRECATED> */\\n.lm-Menu-itemShortcut {\\n  display: table-cell;\\n  text-align: right;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*-----------------------------------------------------------------------------\\n| Copyright (c) Jupyter Development Team.\\n| Copyright (c) 2014-2017, PhosphorJS Contributors\\n|\\n| Distributed under the terms of the BSD 3-Clause License.\\n|\\n| The full license is in the file LICENSE, distributed with this software.\\n|----------------------------------------------------------------------------*/\\n\\n\\n/* <DEPRECATED> */ .p-MenuBar, /* </DEPRECATED> */\\n.lm-MenuBar {\\n  outline: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-MenuBar-content, /* </DEPRECATED> */\\n.lm-MenuBar-content {\\n  margin: 0;\\n  padding: 0;\\n  display: flex;\\n  flex-direction: row;\\n  list-style-type: none;\\n}\\n\\n\\n/* <DEPRECATED> */ .p--MenuBar-item, /* </DEPRECATED> */\\n.lm-MenuBar-item {\\n  box-sizing: border-box;\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-MenuBar-itemIcon,\\n.p-MenuBar-itemLabel,\\n/* </DEPRECATED> */\\n.lm-MenuBar-itemIcon,\\n.lm-MenuBar-itemLabel {\\n  display: inline-block;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*-----------------------------------------------------------------------------\\n| Copyright (c) Jupyter Development Team.\\n| Copyright (c) 2014-2017, PhosphorJS Contributors\\n|\\n| Distributed under the terms of the BSD 3-Clause License.\\n|\\n| The full license is in the file LICENSE, distributed with this software.\\n|----------------------------------------------------------------------------*/\\n\\n\\n/* <DEPRECATED> */ .p-ScrollBar, /* </DEPRECATED> */\\n.lm-ScrollBar {\\n  display: flex;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-ScrollBar[data-orientation='horizontal'],\\n/* </DEPRECATED> */\\n.lm-ScrollBar[data-orientation='horizontal'] {\\n  flex-direction: row;\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-ScrollBar[data-orientation='vertical'],\\n/* </DEPRECATED> */\\n.lm-ScrollBar[data-orientation='vertical'] {\\n  flex-direction: column;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-ScrollBar-button, /* </DEPRECATED> */\\n.lm-ScrollBar-button {\\n  box-sizing: border-box;\\n  flex: 0 0 auto;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-ScrollBar-track, /* </DEPRECATED> */\\n.lm-ScrollBar-track {\\n  box-sizing: border-box;\\n  position: relative;\\n  overflow: hidden;\\n  flex: 1 1 auto;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-ScrollBar-thumb, /* </DEPRECATED> */\\n.lm-ScrollBar-thumb {\\n  box-sizing: border-box;\\n  position: absolute;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*-----------------------------------------------------------------------------\\n| Copyright (c) Jupyter Development Team.\\n| Copyright (c) 2014-2017, PhosphorJS Contributors\\n|\\n| Distributed under the terms of the BSD 3-Clause License.\\n|\\n| The full license is in the file LICENSE, distributed with this software.\\n|----------------------------------------------------------------------------*/\\n\\n\\n/* <DEPRECATED> */ .p-SplitPanel-child, /* </DEPRECATED> */\\n.lm-SplitPanel-child {\\n  z-index: 0;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-SplitPanel-handle, /* </DEPRECATED> */\\n.lm-SplitPanel-handle {\\n  z-index: 1;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-SplitPanel-handle.p-mod-hidden, /* </DEPRECATED> */\\n.lm-SplitPanel-handle.lm-mod-hidden {\\n  display: none !important;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-SplitPanel-handle:after, /* </DEPRECATED> */\\n.lm-SplitPanel-handle:after {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  content: '';\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-SplitPanel[data-orientation='horizontal'] > .p-SplitPanel-handle,\\n/* </DEPRECATED> */\\n.lm-SplitPanel[data-orientation='horizontal'] > .lm-SplitPanel-handle {\\n  cursor: ew-resize;\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-SplitPanel[data-orientation='vertical'] > .p-SplitPanel-handle,\\n/* </DEPRECATED> */\\n.lm-SplitPanel[data-orientation='vertical'] > .lm-SplitPanel-handle {\\n  cursor: ns-resize;\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-SplitPanel[data-orientation='horizontal'] > .p-SplitPanel-handle:after,\\n/* </DEPRECATED> */\\n.lm-SplitPanel[data-orientation='horizontal'] > .lm-SplitPanel-handle:after {\\n  left: 50%;\\n  min-width: 8px;\\n  transform: translateX(-50%);\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-SplitPanel[data-orientation='vertical'] > .p-SplitPanel-handle:after,\\n/* </DEPRECATED> */\\n.lm-SplitPanel[data-orientation='vertical'] > .lm-SplitPanel-handle:after {\\n  top: 50%;\\n  min-height: 8px;\\n  transform: translateY(-50%);\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*-----------------------------------------------------------------------------\\n| Copyright (c) Jupyter Development Team.\\n| Copyright (c) 2014-2017, PhosphorJS Contributors\\n|\\n| Distributed under the terms of the BSD 3-Clause License.\\n|\\n| The full license is in the file LICENSE, distributed with this software.\\n|----------------------------------------------------------------------------*/\\n\\n\\n/* <DEPRECATED> */ .p-TabBar, /* </DEPRECATED> */\\n.lm-TabBar {\\n  display: flex;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-TabBar[data-orientation='horizontal'], /* </DEPRECATED> */\\n.lm-TabBar[data-orientation='horizontal'] {\\n  flex-direction: row;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-TabBar[data-orientation='vertical'], /* </DEPRECATED> */\\n.lm-TabBar[data-orientation='vertical'] {\\n  flex-direction: column;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-TabBar-content, /* </DEPRECATED> */\\n.lm-TabBar-content {\\n  margin: 0;\\n  padding: 0;\\n  display: flex;\\n  flex: 1 1 auto;\\n  list-style-type: none;\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-TabBar[data-orientation='horizontal'] > .p-TabBar-content,\\n/* </DEPRECATED> */\\n.lm-TabBar[data-orientation='horizontal'] > .lm-TabBar-content {\\n  flex-direction: row;\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-TabBar[data-orientation='vertical'] > .p-TabBar-content,\\n/* </DEPRECATED> */\\n.lm-TabBar[data-orientation='vertical'] > .lm-TabBar-content {\\n  flex-direction: column;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-TabBar-tab, /* </DEPRECATED> */\\n.lm-TabBar-tab {\\n  display: flex;\\n  flex-direction: row;\\n  box-sizing: border-box;\\n  overflow: hidden;\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-TabBar-tabIcon,\\n.p-TabBar-tabCloseIcon,\\n/* </DEPRECATED> */\\n.lm-TabBar-tabIcon,\\n.lm-TabBar-tabCloseIcon {\\n  flex: 0 0 auto;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-TabBar-tabLabel, /* </DEPRECATED> */\\n.lm-TabBar-tabLabel {\\n  flex: 1 1 auto;\\n  overflow: hidden;\\n  white-space: nowrap;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-TabBar-tab.p-mod-hidden, /* </DEPRECATED> */\\n.lm-TabBar-tab.lm-mod-hidden {\\n  display: none !important;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-TabBar.p-mod-dragging .p-TabBar-tab, /* </DEPRECATED> */\\n.lm-TabBar.lm-mod-dragging .lm-TabBar-tab {\\n  position: relative;\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-TabBar.p-mod-dragging[data-orientation='horizontal'] .p-TabBar-tab,\\n/* </DEPRECATED> */\\n.lm-TabBar.lm-mod-dragging[data-orientation='horizontal'] .lm-TabBar-tab {\\n  left: 0;\\n  transition: left 150ms ease;\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-TabBar.p-mod-dragging[data-orientation='vertical'] .p-TabBar-tab,\\n/* </DEPRECATED> */\\n.lm-TabBar.lm-mod-dragging[data-orientation='vertical'] .lm-TabBar-tab {\\n  top: 0;\\n  transition: top 150ms ease;\\n}\\n\\n\\n/* <DEPRECATED> */\\n.p-TabBar.p-mod-dragging .p-TabBar-tab.p-mod-dragging\\n/* </DEPRECATED> */\\n.lm-TabBar.lm-mod-dragging .lm-TabBar-tab.lm-mod-dragging {\\n  transition: none;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*-----------------------------------------------------------------------------\\n| Copyright (c) Jupyter Development Team.\\n| Copyright (c) 2014-2017, PhosphorJS Contributors\\n|\\n| Distributed under the terms of the BSD 3-Clause License.\\n|\\n| The full license is in the file LICENSE, distributed with this software.\\n|----------------------------------------------------------------------------*/\\n\\n\\n/* <DEPRECATED> */ .p-TabPanel-tabBar, /* </DEPRECATED> */\\n.lm-TabPanel-tabBar {\\n  z-index: 1;\\n}\\n\\n\\n/* <DEPRECATED> */ .p-TabPanel-stackedPanel, /* </DEPRECATED> */\\n.lm-TabPanel-stackedPanel {\\n  z-index: 0;\\n}\\n\", \"\"]);\n\n// exports\n","module.exports = require(\"@finos/perspective-viewer\");","/******************************************************************************\n *\n * Copyright (c) 2018, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport {DockPanel, SplitPanel} from \"@lumino/widgets\";\nimport {toArray} from \"@lumino/algorithm\";\nimport {Signal} from \"@lumino/signaling\";\n\nconst DISCRETE_STEP_SIZE = 1;\n\nfunction cloneMouseEvent(x, y, event) {\n    const evt = document.createEvent(\"MouseEvent\");\n    evt.initMouseEvent(\n        event.type,\n        true,\n        event.cancelable,\n        event.view,\n        event.detail,\n        event.screenX,\n        event.screenY,\n        x,\n        y,\n        event.ctrlKey,\n        event.altKey,\n        event.shiftKey,\n        event.metaKey,\n        event.button,\n        event.relatedTarget\n    );\n    return evt;\n}\n\nclass DiscreteContext {\n    _clamp(orient, client) {\n        const margin = {width: 300, height: 200}[orient];\n        const [min, max] = [margin, this._rect[orient] - margin];\n        return client < min ? min : client > max ? max : undefined;\n    }\n\n    _block_move(key, client) {\n        const val = this._offset_drag_start[key];\n        const old = this._offset_drag_current[key];\n        const method = client < old ? \"ceil\" : \"floor\";\n        const diff = client - val;\n        return Math[method](diff / DISCRETE_STEP_SIZE) * DISCRETE_STEP_SIZE + val;\n    }\n\n    _check_prev(clientX, clientY) {\n        const {x: old_clientX, y: old_clientY} = this._offset_drag_current;\n        if (clientX !== old_clientX || clientY !== old_clientY) {\n            this._offset_drag_current = {x: clientX, y: clientY};\n            return true;\n        }\n        return false;\n    }\n\n    calculate_move({clientX, clientY}) {\n        clientX -= this._rect.left;\n        clientY -= this._rect.top;\n        const blockX = this._block_move(\"x\", clientX);\n        const blockY = this._block_move(\"y\", clientY);\n        clientX = this._clamp(\"width\", clientX) || this._clamp(\"width\", blockX) || blockX;\n        clientY = this._clamp(\"height\", clientY) || this._clamp(\"height\", blockY) || blockY;\n        if (this._check_prev(clientX, clientY)) {\n            return {x: clientX + this._rect.left, y: clientY + this._rect.top};\n        }\n    }\n\n    constructor(x, y, rect) {\n        this._rect = rect;\n        this._offset_drag_start = this._offset_drag_current = {\n            x: x - rect.left,\n            y: y - rect.top\n        };\n    }\n}\n\nfunction extend(base, handle) {\n    return class extends base {\n        handleEvent(event) {\n            switch (event.type) {\n                case \"mousedown\":\n                    {\n                        const elem = event.target;\n                        if (!elem.classList.contains(handle)) {\n                            break;\n                        }\n                        if ([elem, elem.parentElement].some(x => x.getAttribute(\"data-orientation\") === \"horizontal\")) {\n                            this.addClass(\"ew\");\n                        } else {\n                            this.addClass(\"ns\");\n                        }\n                        this.addClass(\"resizing\");\n                        const {clientX, clientY} = event;\n                        this._offset_target = elem;\n                        this._offset_target.classList.add(\"resizing\");\n                        this.context = new DiscreteContext(clientX, clientY, this.node.getBoundingClientRect());\n                    }\n                    break;\n                case \"mousemove\":\n                    if (!DISCRETE_STEP_SIZE) {\n                        super.handleEvent(event);\n                    } else if (this.context && !event.shiftKey) {\n                        event.preventDefault();\n                        event.stopPropagation();\n                        const update = this.context.calculate_move(event);\n                        if (update) {\n                            const new_event = cloneMouseEvent(update.x, update.y, event);\n                            super.handleEvent(new_event);\n                        }\n                        return;\n                    }\n                    break;\n                case \"mouseup\":\n                    {\n                        this.removeClass(\"resizing\");\n                        this.removeClass(\"ew\");\n                        this.removeClass(\"ns\");\n                        this._offset_target.classList.remove(\"resizing\");\n                        delete this.context;\n                    }\n                    break;\n                default:\n                    break;\n            }\n            super.handleEvent(event);\n        }\n    };\n}\n\nexport class DiscreteDockPanel extends extend(DockPanel, \"p-DockPanel-handle\") {}\nexport class DiscreteSplitPanel extends extend(SplitPanel, \"p-SplitPanel-handle\") {\n    constructor(...args) {\n        super(...args);\n        this.layoutModified = new Signal(this);\n    }\n\n    onUpdateRequest(...args) {\n        super.onUpdateRequest(...args);\n        this.layoutModified.emit();\n    }\n\n    onResize(msg) {\n        for (const widget of toArray(this.widgets)) {\n            widget.node.style.minWidth = `300px`;\n            widget.node.style.minHeight = `200px`;\n        }\n        super.onResize(msg);\n    }\n}\n","/******************************************************************************\n *\n * Copyright (c) 2018, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport {h} from \"@lumino/virtualdom\";\nimport {TabBar} from \"@lumino/widgets\";\n\nexport const TabBarItems = {\n    Config: \"config\",\n    Label: \"label\"\n};\n\nexport const DEFAULT_TITLE = \"[untitled]\";\n\nexport class PerspectiveTabBarRenderer extends TabBar.Renderer {\n    constructor(maximized) {\n        super();\n        this.maximized = maximized;\n    }\n\n    renderLabel(data) {\n        return h.input({className: \"p-TabBar-tabLabel\", readonly: true, id: TabBarItems.Label, value: data.title.label || DEFAULT_TITLE});\n    }\n\n    renderTab(data) {\n        const title = data.title.caption;\n        const key = this.createTabKey(data);\n        const style = this.createTabStyle(data);\n        let className = this.createTabClass(data);\n        const dataset = this.createTabDataset(data);\n\n        // eslint-disable-next-line prettier/prettier\n        return h.li(\n            {key, className, title, style, dataset},\n            this.renderConfigIcon(),\n            this.renderLabel(data),\n            this.renderCloseIcon(data),\n            h.div({className: \"divider\"})\n        );\n    }\n\n    renderConfigIcon() {\n        return h.div({className: \"p-TabBar-tabConfigIcon\", id: TabBarItems.Config});\n    }\n}\n","/******************************************************************************\n *\n * Copyright (c) 2018, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport {ArrayExt} from \"@lumino/algorithm\";\nimport {ElementExt} from \"@lumino/domutils\";\nimport {TabBar} from \"@lumino/widgets\";\nimport {TabBarItems, DEFAULT_TITLE} from \"./tabbarrenderer\";\n\nexport class PerspectiveTabBar extends TabBar {\n    constructor(options = {}) {\n        super(options);\n        this._addEventListeners();\n        this.__content_node__;\n    }\n\n    onUpdateRequest(msg) {\n        // NOT INERT!  This is a lumino bug fix.\n        // lumino/virtualdom keeps a weakmap on contentNode which is later\n        // reset - this causes the diff to double some elements.  Memoizing\n        // prevent collection from the weakmap.\n        this.__content_node__ = this.contentNode;\n        super.onUpdateRequest(msg);\n        this._check_shade();\n    }\n\n    _check_shade() {\n        if (Array.from(this.contentNode.children).filter(x => x.classList.contains(\"settings_open\") && x.classList.contains(\"p-mod-current\")).length > 0) {\n            this.contentNode.classList.add(\"inactive-blur\");\n        } else {\n            this.contentNode.classList.remove(\"inactive-blur\");\n        }\n    }\n\n    handleEvent(event) {\n        this.retargetEvent(event);\n        switch (event.type) {\n            case \"contextmenu\":\n                const widget = this.currentTitle.owner;\n                this.parent.parent.parent.showContextMenu(widget, event);\n                event.preventDefault();\n                break;\n\n            case \"dblclick\":\n                if (event.target.id === TabBarItems.Label) {\n                    this.onTitleChangeRequest(event);\n                }\n                break;\n\n            case \"mousedown\":\n                if (event.target.id === TabBarItems.Config) {\n                    const tabs = this.contentNode.children;\n\n                    // Find the index of the released tab.\n                    const index = ArrayExt.findFirstIndex(tabs, tab => {\n                        return ElementExt.hitTest(tab, event.clientX, event.clientY);\n                    });\n\n                    if (index < 0) {\n                        break;\n                    }\n\n                    const title = this.titles[index];\n                    title.owner.toggleConfig();\n                    return;\n                }\n                break;\n        }\n        super.handleEvent(event);\n    }\n\n    onTitleChangeRequest(event) {\n        const oldValue = event.target.value;\n\n        const stopEvents = event => event.stopPropagation();\n\n        const onCancel = () => {\n            this.title.label = oldValue;\n            event.target.value = oldValue;\n            event.target.setAttribute(\"readonly\", \"\");\n            removeEventListeners();\n        };\n\n        const onEnter = event => {\n            if (event.keyCode === 13) {\n                removeEventListeners();\n                this.currentTitle.owner.name = event.target.value;\n                event.target.value = event.target.value || DEFAULT_TITLE;\n                event.target.setAttribute(\"readonly\", \"\");\n                event.target.blur();\n            }\n        };\n\n        const listeners = {\n            mousemove: stopEvents,\n            mousedown: stopEvents,\n            mouseup: stopEvents,\n            keydown: onEnter,\n            blur: onCancel\n        };\n\n        const removeEventListeners = () => {\n            for (let eventName in listeners) {\n                event.target.removeEventListener(eventName, listeners[eventName]);\n            }\n        };\n\n        for (let eventName in listeners) {\n            event.target.addEventListener(eventName, listeners[eventName]);\n        }\n\n        event.target.removeAttribute(\"readonly\");\n\n        if (oldValue === DEFAULT_TITLE) {\n            event.target.value = \"\";\n        }\n\n        event.target.focus();\n    }\n\n    onResize(msg) {\n        super.onResize(msg);\n        this.checkCondensed(msg);\n    }\n\n    checkCondensed(msg) {\n        const approxWidth = (msg ? msg.width : this.node.offsetWidth) / this.contentNode.children.length;\n        if (approxWidth < 400) {\n            this.node.classList.add(\"condensed\");\n        } else {\n            this.node.classList.remove(\"condensed\");\n        }\n    }\n\n    /**\n     * Shadow dom targets events at the host, not the clicked element, which\n     * Lumino dislikes.  This makes the event look like it is not crossing\n     * the ShadowDom boundary.\n     *\n     */\n    retargetEvent(event) {\n        Object.defineProperty(event, \"target\", {value: event.composedPath()[0], enumerable: true});\n        return event;\n    }\n\n    _addEventListeners() {\n        this.node.addEventListener(\"dblclick\", this);\n        this.node.addEventListener(\"contextmenu\", this);\n    }\n}\n","/******************************************************************************\n *\n * Copyright (c) 2018, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport {DockPanel} from \"@lumino/widgets\";\nimport {DiscreteDockPanel} from \"./discrete\";\nimport {PerspectiveTabBar} from \"./tabbar\";\nimport {PerspectiveTabBarRenderer} from \"./tabbarrenderer\";\n\nclass PerspectiveDockPanelRenderer extends DockPanel.Renderer {\n    createTabBar() {\n        const tabbar = new PerspectiveTabBar({renderer: new PerspectiveTabBarRenderer()});\n        tabbar.addClass(\"p-DockPanel-tabBar\");\n        return tabbar;\n    }\n}\n\nexport class PerspectiveDockPanel extends DiscreteDockPanel {\n    constructor() {\n        super({renderer: new PerspectiveDockPanelRenderer()});\n        this._renderer.dock = this;\n    }\n\n    _onTabDetachRequested(sender, args) {\n        super._onTabDetachRequested(sender, args);\n        // blur widget on when it's being moved\n        const widget = sender.titles[0].owner;\n        widget.addClass(\"widget-blur\");\n\n        if (this._drag) {\n            this._drag._promise.then(() => {\n                widget.removeClass(\"widget-blur\");\n            });\n        }\n    }\n\n    static mapWidgets(widgetFunc, layout) {\n        if (layout.main) {\n            layout.main = PerspectiveDockPanel.mapWidgets(widgetFunc, layout.main);\n        } else if (layout.children) {\n            layout.children = layout.children.map(widget => PerspectiveDockPanel.mapWidgets(widgetFunc, widget));\n        } else if (layout.widgets) {\n            layout.widgets = layout.widgets.map(widget => widgetFunc(widget));\n        }\n        return layout;\n    }\n\n    onAfterAttach() {\n        this.spacing = parseInt(window.getComputedStyle(this.node).padding) || 0;\n    }\n}\n","/******************************************************************************\n *\n * Copyright (c) 2018, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport {h} from \"@lumino/virtualdom\";\nimport {Menu} from \"@lumino/widgets\";\n\nexport class MenuRenderer extends Menu.Renderer {\n    constructor(element) {\n        super();\n        this.workspace = element;\n    }\n    renderIcon(data) {\n        let className = this.createIconClass(data);\n        const name = data.item.command.split(\":\").pop();\n        const content = getComputedStyle(this.workspace)\n            .getPropertyValue(`--menu-${name}--content`)\n            .replace(/['\"]+/g, \"\")\n            .trim();\n        return h.div({className, content}, data.item.iconLabel);\n    }\n}\n","/******************************************************************************\n *\n * Copyright (c) 2018, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport {CommandRegistry} from \"@lumino/commands\";\nimport {MODE} from \"./workspace\";\n\nexport const createCommands = workspace => {\n    const commands = new CommandRegistry();\n\n    commands.addCommand(\"workspace:export\", {\n        execute: args => args.widget.viewer.download(),\n        iconClass: \"menu-export\",\n        label: \"Export CSV\",\n        mnemonic: 0\n    });\n\n    commands.addCommand(\"workspace:copy\", {\n        execute: args => args.widget.viewer.copy(),\n        iconClass: \"menu-copy\",\n        label: \"Copy To Clipboard\",\n        mnemonic: 0\n    });\n\n    commands.addCommand(\"workspace:reset\", {\n        execute: args => args.widget.viewer.reset(),\n        iconClass: \"menu-reset\",\n        label: \"Reset\",\n        mnemonic: 0\n    });\n\n    commands.addCommand(\"workspace:duplicate\", {\n        execute: ({widget}) => workspace.duplicate(widget),\n        iconClass: \"menu-duplicate\",\n        isVisible: args => (args.widget.parent === workspace.dockpanel ? true : false),\n        label: \"Duplicate\",\n        mnemonic: 0\n    });\n\n    commands.addCommand(\"workspace:master\", {\n        execute: args => workspace.toggleMasterDetail(args.widget),\n        isVisible: () => workspace.mode === MODE.GLOBAL_FILTERS,\n        iconClass: args => (args.widget.parent === workspace.dockpanel ? \"menu-master\" : \"menu-detail\"),\n        label: args => (args.widget.parent === workspace.dockpanel ? \"Create Global Filter\" : \"Remove Global Filter\"),\n        mnemonic: 0\n    });\n\n    commands.addCommand(\"workspace:link\", {\n        execute: args => workspace.toggleLink(args.widget),\n        isVisible: () => workspace.mode === MODE.LINKED,\n        iconClass: args => (workspace.isLinked(args.widget) ? \"menu-unlink\" : \"menu-link\"),\n        label: args => (workspace.isLinked(args.widget) ? \"Unlink\" : \"Link\"),\n        mnemonic: 0\n    });\n\n    commands.addCommand(\"workspace:maximize\", {\n        execute: args => workspace.toggleSingleDocument(args.widget),\n        isVisible: args => args.widget.parent === workspace.dockpanel && workspace.dockpanel.mode !== \"single-document\",\n        iconClass: \"menu-maximize\",\n        label: () => \"Maximize\",\n        mnemonic: 0\n    });\n\n    commands.addCommand(\"workspace:minimize\", {\n        execute: args => workspace.toggleSingleDocument(args.widget),\n        isVisible: args => args.widget.parent === workspace.dockpanel && workspace.dockpanel.mode === \"single-document\",\n        iconClass: \"menu-minimize\",\n        label: () => \"Minimize\",\n        mnemonic: 0\n    });\n\n    return commands;\n};\n","/******************************************************************************\n *\n * Copyright (c) 2018, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport \"@finos/perspective-viewer\";\nimport {Widget} from \"@lumino/widgets\";\n\nexport class PerspectiveViewerWidget extends Widget {\n    constructor({viewer, node}) {\n        super({node});\n        this.viewer = viewer;\n        this.master = false;\n    }\n\n    set master(value) {\n        if (value !== undefined && this._master !== value) {\n            if (value) {\n                this.viewer.classList.add(\"workspace-master-widget\");\n                this.viewer.classList.remove(\"workspace-detail-widget\");\n\n                // TODO jsdom lacks `toggleAttribute` until 12.2.0\n                // https://github.com/jsdom/jsdom/blob/master/Changelog.md#1220\n                this.viewer.toggleAttribute?.(\"selectable\", true);\n            } else {\n                this.viewer.classList.add(\"workspace-detail-widget\");\n                this.viewer.classList.remove(\"workspace-master-widget\");\n                this.viewer.removeAttribute(\"selectable\");\n            }\n            this._master = value;\n        }\n    }\n\n    get master() {\n        return this._master;\n    }\n\n    get table() {\n        return this.viewer.table;\n    }\n\n    set name(value) {\n        if (value != null) {\n            this.viewer.setAttribute(\"name\", value);\n            this.title.label = value;\n            this._name = value;\n        }\n    }\n\n    get name() {\n        return this._name;\n    }\n\n    set linked(value) {\n        if (value !== undefined) {\n            if (value) {\n                this.viewer.setAttribute(\"linked\", \"\");\n            } else {\n                this.viewer.removeAttribute(\"linked\");\n            }\n        }\n    }\n    get linked() {\n        return this.viewer.hasAttribute(\"linked\");\n    }\n\n    toggleConfig() {\n        return this.viewer.toggleConfig();\n    }\n\n    restore(config) {\n        const {master, table, linked, name, ...viewerConfig} = config;\n        this.master = master;\n        this.name = name;\n        if (table) {\n            this.viewer.setAttribute(\"table\", table);\n        }\n        this.linked = linked;\n\n        return this.viewer.restore({...viewerConfig});\n    }\n\n    save() {\n        return {\n            ...this.viewer.save(),\n            master: this.master,\n            name: this.viewer.getAttribute(\"name\"),\n            table: this.viewer.getAttribute(\"table\"),\n            linked: this.linked\n        };\n    }\n\n    removeClass(name) {\n        super.removeClass(name);\n        this.viewer && this.viewer.classList.remove(name);\n    }\n\n    async onCloseRequest(msg) {\n        super.onCloseRequest(msg);\n        if (this.viewer.parentElement) {\n            this.viewer.parentElement.removeChild(this.viewer);\n        }\n        await this.viewer.delete();\n    }\n\n    onResize(msg) {\n        this.notifyResize();\n        super.onResize(msg);\n    }\n\n    async notifyResize() {\n        if (this.isVisible) {\n            await this.viewer.notifyResize();\n        }\n    }\n}\n","/******************************************************************************\n *\n * Copyright (c) 2018, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport {find, toArray} from \"@lumino/algorithm\";\nimport {Panel} from \"@lumino/widgets\";\nimport {PerspectiveDockPanel} from \"./dockpanel\";\nimport {Menu} from \"@lumino/widgets\";\nimport {MenuRenderer} from \"./menu\";\nimport {createCommands} from \"./commands\";\n\nimport {PerspectiveViewerWidget} from \"./widget\";\nimport uniqBy from \"lodash/uniqBy\";\nimport debounce from \"lodash/debounce\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport {DiscreteSplitPanel} from \"./discrete\";\n\nconst DEFAULT_WORKSPACE_SIZE = [1, 3];\n\nlet ID_COUNTER = 0;\n\nexport const SIDE = {\n    LEFT: \"left\",\n    RIGHT: \"right\"\n};\n\nexport const MODE = {\n    GLOBAL_FILTERS: \"globalFilters\",\n    LINKED: \"linked\"\n};\n\nclass ObservableMap extends Map {\n    set(name, item) {\n        this._set_listener?.(name, item);\n        super.set(name, item);\n    }\n\n    get(name) {\n        return super.get(name);\n    }\n\n    delete(name) {\n        const result = this._delete_listener?.(name);\n        if (result) {\n            return super.delete(name);\n        } else {\n            return false;\n        }\n    }\n\n    addSetListener(listener) {\n        this._set_listener = listener;\n    }\n\n    addDeleteListener(listener) {\n        this._delete_listener = listener;\n    }\n}\n\nexport class PerspectiveWorkspace extends DiscreteSplitPanel {\n    constructor(element, options = {}) {\n        super({orientation: \"horizontal\"});\n\n        this.addClass(\"perspective-workspace\");\n        this.dockpanel = new PerspectiveDockPanel(\"main\", {enableContextMenu: false});\n        this.detailPanel = new Panel();\n        this.detailPanel.layout.fitPolicy = \"set-no-constraint\";\n        this.detailPanel.addClass(\"perspective-scroll-panel\");\n        this.detailPanel.addWidget(this.dockpanel);\n        this.masterPanel = new DiscreteSplitPanel({orientation: \"vertical\"});\n        this.masterPanel.addClass(\"master-panel\");\n\n        this.dockpanel.layoutModified.connect(() => this.workspaceUpdated());\n        this.masterPanel.layoutModified.connect(() => this.workspaceUpdated());\n        this.layoutModified.connect(() => this.workspaceUpdated());\n\n        this.addWidget(this.detailPanel);\n\n        this.element = element;\n        this._side = options.side || SIDE.LEFT;\n        this.mode = options.mode || MODE.GLOBAL_FILTERS;\n        this._linkedViewers = [];\n\n        this.listeners = new WeakMap();\n        this._tables = new ObservableMap();\n        this._tables.addSetListener(this._set_listener.bind(this));\n        this._tables.addDeleteListener(this._delete_listener.bind(this));\n        this.commands = createCommands(this);\n        this.menuRenderer = new MenuRenderer(this.element);\n\n        this.customCommands = [];\n    }\n\n    /***************************************************************************\n     *\n     * `<perspective-workspace>` Public API\n     *\n     */\n\n    addTable(name, table) {\n        this.tables.set(name, table);\n    }\n\n    getTable(name) {\n        return this.tables.get(name);\n    }\n\n    removeTable(name) {\n        return this.tables.delete(name);\n    }\n\n    get tables() {\n        return this._tables;\n    }\n\n    set side(value) {\n        if (SIDE[value.toUpperCase()] === undefined) {\n            console.warn(\"Unknown `side` attribute:\", value);\n            return;\n        }\n\n        if (this._side !== value && this.masterPanel.isAttached) {\n            const newSizes = this.relativeSizes()\n                .slice()\n                .reverse();\n\n            this.detailPanel.close();\n            this.masterPanel.close();\n\n            if (value === SIDE.LEFT) {\n                this.addWidget(this.masterPanel);\n                this.addWidget(this.detailPanel);\n            } else {\n                this.addWidget(this.detailPanel);\n                this.addWidget(this.masterPanel);\n            }\n            this.setRelativeSizes(newSizes);\n        }\n        this._side = value;\n    }\n\n    get side() {\n        return this._side;\n    }\n\n    save() {\n        const layout = {\n            sizes: [...this.relativeSizes()],\n            detail: PerspectiveDockPanel.mapWidgets(widget => widget.viewer.getAttribute(\"slot\"), this.dockpanel.saveLayout()),\n            mode: this.mode\n        };\n        if (this.masterPanel.isAttached) {\n            const master = {\n                widgets: this.masterPanel.widgets.map(widget => widget.viewer.getAttribute(\"slot\")),\n                sizes: [...this.masterPanel.relativeSizes()]\n            };\n            layout.master = master;\n        }\n        const viewers = {};\n        for (const widget of this.masterPanel.widgets) {\n            viewers[widget.viewer.getAttribute(\"slot\")] = widget.save();\n        }\n        PerspectiveDockPanel.mapWidgets(widget => {\n            viewers[widget.viewer.getAttribute(\"slot\")] = widget.save();\n        }, this.dockpanel.saveLayout());\n        return {...layout, viewers};\n    }\n\n    restore(value) {\n        const {sizes, master, detail, viewers: viewer_configs = [], mode = MODE.GLOBAL_FILTERS} = cloneDeep(value);\n        this.mode = mode;\n\n        if (this.mode === MODE.GLOBAL_FILTERS && master && master.widgets.length > 0) {\n            this.setupMasterPanel(sizes || DEFAULT_WORKSPACE_SIZE);\n        } else {\n            this.addWidget(this.detailPanel);\n        }\n\n        // Using ES generators as context managers ..\n        for (const viewers of this._capture_viewers()) {\n            for (const widgets of this._capture_widgets()) {\n                const callback = this._restore_callback.bind(this, viewer_configs, viewers, widgets);\n\n                if (detail) {\n                    const detailLayout = PerspectiveDockPanel.mapWidgets(callback.bind(this, false), detail);\n                    this.dockpanel.restoreLayout(detailLayout);\n                }\n\n                if (master) {\n                    if (this.mode === MODE.GLOBAL_FILTERS) {\n                        master.widgets.forEach(callback.bind(this, true));\n                        master.sizes && this.masterPanel.setRelativeSizes(master.sizes);\n                    } else {\n                        master.widgets.forEach(config => {\n                            const widget = callback.bind(this, undefined)(config);\n                            this.dockpanel.addWidget(widget);\n                        });\n                    }\n                }\n            }\n        }\n    }\n\n    *_capture_widgets() {\n        const widgets = this.getAllWidgets();\n        yield widgets;\n        for (const widget of widgets) {\n            if (!widget.node.isConnected) {\n                widget.close();\n            }\n        }\n    }\n\n    *_capture_viewers() {\n        const viewers = Array.from(this.element.children);\n        yield viewers;\n        const ending_widgets = this.getAllWidgets();\n        for (const viewer of viewers) {\n            let widget = ending_widgets.find(x => x.viewer === viewer);\n            if (!widget && Array.from(this.element.children).indexOf(viewer) > -1) {\n                this.element.removeChild(viewer);\n                viewer.delete();\n            }\n        }\n    }\n\n    _restore_callback(viewers, starting_viewers, starting_widgets, master, widgetName) {\n        let viewer_config;\n        if (typeof widgetName === \"string\") {\n            viewer_config = viewers[widgetName];\n        } else {\n            viewer_config = widgetName;\n            widgetName = viewer_config.slot;\n        }\n        let viewer = !!widgetName && starting_viewers.find(x => x.getAttribute(\"slot\") === widgetName);\n        let widget;\n        if (viewer) {\n            widget = starting_widgets.find(x => x.viewer === viewer);\n            if (widget) {\n                widget.restore({...viewer_config, master});\n            } else {\n                widget = this._createWidget({\n                    config: {...viewer_config, master},\n                    viewer\n                });\n            }\n        } else if (viewer_config) {\n            widget = this._createWidgetAndNode({\n                config: {...viewer_config, master},\n                slot: widgetName\n            });\n        } else {\n            console.error(`Could not find or create <perspective-viewer> for slot \"${widgetName}\"`);\n        }\n        if (master || this.mode === MODE.LINKED) {\n            widget.viewer.addEventListener(\"perspective-select\", this.onPerspectiveSelect);\n            widget.viewer.addEventListener(\"perspective-click\", this.onPerspectiveSelect);\n            // TODO remove event listener\n            this.masterPanel.addWidget(widget);\n        }\n\n        if (widget.linked) {\n            this._linkWidget(widget);\n        }\n        return widget;\n    }\n\n    _validate(table) {\n        if (!(\"view\" in table) || typeof table?.view !== \"function\") {\n            throw new Error(\"Only `perspective.Table()` instances can be added to `tables`\");\n        }\n        return table;\n    }\n\n    _set_listener(name, table) {\n        if (typeof table?.then === \"function\") {\n            table = table.then(this._validate);\n        } else {\n            this._validate(table);\n        }\n        this.getAllWidgets().forEach(widget => {\n            if (widget.viewer.getAttribute(\"table\") === name) {\n                widget.viewer.load(table);\n            }\n        });\n    }\n\n    _delete_listener(name) {\n        const isUsed = this.getAllWidgets().some(widget => widget.viewer.getAttribute(\"table\") === name);\n        if (isUsed) {\n            console.error(`Cannot remove table: '${name}' because it's still bound to widget(s)`);\n            return false;\n        }\n        return true;\n    }\n\n    update_widget_for_viewer(viewer) {\n        let slot_name = viewer.getAttribute(\"slot\");\n        if (!slot_name) {\n            slot_name = this._gen_id();\n            viewer.setAttribute(\"slot\", slot_name);\n        }\n        const table_name = viewer.getAttribute(\"table\");\n        if (table_name) {\n            const slot = this.node.querySelector(`slot[name=${slot_name}]`);\n            if (!slot) {\n                //const name = viewer.getAttribute(\"name\");\n                console.warn(`Undocked ${viewer.outerHTML}, creating default layout`);\n                const widget = this._createWidget({\n                    name: viewer.getAttribute(\"name\"),\n                    table: this.tables.get(viewer.getAttribute(\"table\")),\n                    config: {master: false},\n                    viewer\n                });\n                this.dockpanel.addWidget(widget);\n                this.dockpanel.activateWidget(widget);\n            }\n        } else {\n            console.warn(`No table set for ${viewer.outerHTML}`);\n        }\n    }\n\n    remove_unslotted_widgets(viewers) {\n        const widgets = this.getAllWidgets();\n        for (const widget of widgets) {\n            let missing = viewers.indexOf(widget.viewer) === -1;\n            if (missing) {\n                widget.close();\n            }\n        }\n    }\n\n    /***************************************************************************\n     *\n     * Workspace-level contextmenu actions\n     *\n     */\n\n    duplicate(widget) {\n        if (this.dockpanel.mode === \"single-document\") {\n            this.toggleSingleDocument(widget);\n        }\n        const config = widget.save();\n        config.name = config.name ? `${config.name} (duplicate)` : \"\";\n        const duplicate = this._createWidgetAndNode({config});\n        if (config.linked) {\n            this._linkWidget(duplicate);\n        }\n        if (widget.master) {\n            const index = this.masterPanel.widgets.indexOf(widget) + 1;\n            this.masterPanel.insertWidget(index, duplicate);\n        } else {\n            this.dockpanel.addWidget(duplicate, {mode: \"split-right\", ref: widget});\n        }\n    }\n\n    toggleMasterDetail(widget) {\n        const isGlobalFilter = widget.parent !== this.dockpanel;\n\n        this.element.dispatchEvent(\n            new CustomEvent(\"workspace-toggle-global-filter\", {\n                detail: {\n                    widget,\n                    isGlobalFilter: !isGlobalFilter\n                }\n            })\n        );\n\n        if (isGlobalFilter) {\n            this.makeDetail(widget);\n        } else {\n            if (this.dockpanel.mode === \"single-document\") {\n                this.toggleSingleDocument(widget);\n            }\n            this.makeMaster(widget);\n        }\n    }\n\n    _maximize(widget) {\n        widget.viewer.classList.add(\"widget-maximize\");\n        this._minimizedLayout = this.dockpanel.saveLayout();\n        this._maximizedWidget = widget;\n        this.dockpanel.mode = \"single-document\";\n        this.dockpanel.activateWidget(widget);\n        widget.notifyResize();\n    }\n\n    _unmaximize() {\n        this._maximizedWidget.viewer.classList.remove(\"widget-maximize\");\n        this.dockpanel.mode = \"multiple-document\";\n        this.dockpanel.restoreLayout(this._minimizedLayout);\n    }\n\n    toggleSingleDocument(widget) {\n        if (this.dockpanel.mode !== \"single-document\") {\n            this._maximize(widget);\n        } else {\n            this._unmaximize();\n        }\n    }\n\n    async _filterViewer(viewer, filters, candidates) {\n        const config = viewer.save();\n        const availableColumns = Object.keys(await viewer.table.schema());\n        const currentFilters = config.filters || [];\n        const columnAvailable = filter => filter[0] && availableColumns.includes(filter[0]);\n        const validFilters = filters.filter(columnAvailable);\n\n        validFilters.push(...currentFilters.filter(x => !candidates.has(x[0])));\n        const newFilters = uniqBy(validFilters, item => item[0]);\n        viewer.restore({filters: newFilters});\n    }\n\n    onPerspectiveSelect = event => {\n        const config = event.target.save();\n        // perspective-select is already handled for hypergrid\n\n        if (event.type === \"perspective-click\" && config.plugin === \"hypergrid\") {\n            return;\n        }\n        const candidates = new Set([...(config[\"row-pivots\"] || []), ...(config[\"column-pivots\"] || []), ...(config.filters || []).map(x => x[0])]);\n        const filters = [...event.detail.config.filters];\n\n        if (this.mode === MODE.LINKED) {\n            this._linkedViewers.forEach(viewer => {\n                if (viewer !== event.target) {\n                    this._filterViewer(viewer, filters, candidates);\n                }\n            });\n        } else {\n            toArray(this.dockpanel.widgets()).forEach(widget => this._filterViewer(widget.viewer, filters, candidates));\n        }\n    };\n\n    async makeMaster(widget) {\n        widget.master = true;\n\n        if (widget.viewer.hasAttribute(\"settings\")) {\n            await widget.toggleConfig();\n        }\n\n        if (!this.masterPanel.isAttached) {\n            this.detailPanel.close();\n            this.setupMasterPanel(DEFAULT_WORKSPACE_SIZE);\n        }\n\n        this.masterPanel.addWidget(widget);\n        widget.isHidden && widget.show();\n\n        widget.viewer.restyleElement();\n        widget.viewer.addEventListener(\"perspective-click\", this.onPerspectiveSelect);\n        widget.viewer.addEventListener(\"perspective-select\", this.onPerspectiveSelect);\n    }\n\n    makeDetail(widget) {\n        widget.master = false;\n\n        this.dockpanel.addWidget(widget, {mode: `split-${this._side}`});\n\n        if (this.masterPanel.widgets.length === 0) {\n            this.detailPanel.close();\n            this.masterPanel.close();\n            this.addWidget(this.detailPanel);\n        }\n\n        widget.viewer.restyleElement();\n        widget.viewer.removeEventListener(\"perspective-click\", this.onPerspectiveSelect);\n        widget.viewer.removeEventListener(\"perspective-select\", this.onPerspectiveSelect);\n    }\n\n    isLinked(widget) {\n        return this._linkedViewers.indexOf(widget.viewer) > -1;\n    }\n\n    _linkWidget(widget) {\n        widget.title.className += \" linked\";\n        if (this._linkedViewers.indexOf(widget.viewer) === -1) {\n            this._linkedViewers.push(widget.viewer);\n            // if this is the first linked viewer, make viewers with row-pivots selectable\n            if (this._linkedViewers.length === 1) {\n                this.getAllWidgets().forEach(widget => {\n                    const config = widget.viewer.save();\n                    if (config[\"row-pivots\"]) {\n                        widget.viewer.restore({selectable: true});\n                    }\n                });\n            }\n        }\n    }\n\n    toggleLink(widget) {\n        widget.linked = !widget.linked;\n        if (widget.linked) {\n            this._linkWidget(widget);\n        } else {\n            widget.title.className = widget.title.className.replace(/ linked/g, \"\");\n            this._linkedViewers = this._linkedViewers.filter(viewer => viewer !== widget.viewer);\n            if (this._linkedViewers.length === 0) {\n                this.getAllWidgets().forEach(widget => widget.viewer.restore({selectable: false}));\n            }\n        }\n    }\n\n    /***************************************************************************\n     *\n     * Context Menu\n     *\n     */\n\n    createContextMenu(widget) {\n        const contextMenu = new Menu({commands: this.commands, renderer: this.menuRenderer});\n\n        contextMenu.addItem({command: \"workspace:maximize\", args: {widget}});\n        contextMenu.addItem({command: \"workspace:minimize\", args: {widget}});\n        contextMenu.addItem({command: \"workspace:duplicate\", args: {widget}});\n        contextMenu.addItem({command: \"workspace:master\", args: {widget}});\n        contextMenu.addItem({command: \"workspace:link\", args: {widget}});\n\n        contextMenu.addItem({type: \"separator\"});\n\n        contextMenu.addItem({command: \"workspace:export\", args: {widget}});\n        contextMenu.addItem({command: \"workspace:copy\", args: {widget}});\n        contextMenu.addItem({command: \"workspace:reset\", args: {widget}});\n\n        contextMenu.addItem({type: \"separator\"});\n\n        contextMenu.addItem({command: \"workspace:close\", args: {widget}});\n\n        if (this.customCommands.length > 0) {\n            contextMenu.addItem({type: \"separator\"});\n            this.customCommands.forEach(command => {\n                contextMenu.addItem({command, args: {widget}});\n            });\n        }\n        return contextMenu;\n    }\n\n    showContextMenu(widget, event) {\n        const menu = this.createContextMenu(widget);\n        const tabbar = find(this.dockpanel.tabBars(), bar => bar.currentTitle.owner === widget);\n\n        widget.addClass(\"context-focus\");\n        widget.viewer.classList.add(\"context-focus\");\n        tabbar && tabbar.node.classList.add(\"context-focus\");\n        this.element.classList.add(\"context-menu\");\n        this.addClass(\"context-menu\");\n\n        if (widget.viewer.classList.contains(\"workspace-master-widget\")) {\n            menu.node.classList.add(\"workspace-master-menu\");\n        } else {\n            menu.node.classList.remove(\"workspace-master-menu\");\n        }\n        this._menu_opened = true;\n\n        menu.aboutToClose.connect(() => {\n            this.element.classList.remove(\"context-menu\");\n            this.removeClass(\"context-menu\");\n            widget.removeClass(\"context-focus\");\n            tabbar?.node?.classList.remove(\"context-focus\");\n        });\n\n        menu.open(event.clientX, event.clientY);\n        event.preventDefault();\n        event.stopPropagation();\n    }\n\n    /***************************************************************************\n     *\n     * Context Menu\n     *\n     */\n\n    clearLayout() {\n        this.getAllWidgets().forEach(widget => widget.close());\n        this.widgets.forEach(widget => widget.close());\n        this.detailPanel.close();\n        this._linkedViewers = [];\n\n        if (this.masterPanel.isAttached) {\n            this.masterPanel.close();\n        }\n    }\n\n    setupMasterPanel(sizes) {\n        if (this.side === SIDE.RIGHT) {\n            this.addWidget(this.detailPanel);\n            this.addWidget(this.masterPanel);\n            this.setRelativeSizes(sizes.slice().reverse());\n        } else {\n            this.addWidget(this.masterPanel);\n            this.addWidget(this.detailPanel);\n            this.setRelativeSizes(sizes);\n        }\n    }\n\n    _addContextMenuItem(item) {\n        this.customCommands.push(item.id);\n        this.commands.addCommand(item.id, {\n            execute: args => item.execute({widget: args.widget}),\n            label: item.label,\n            isVisible: args => item.isVisible({widget: args.widget}),\n            mnemonic: 0\n        });\n    }\n\n    addViewer(config) {\n        const widget = this._createWidgetAndNode({config});\n        if (this.dockpanel.mode === \"single-document\") {\n            this.toggleSingleDocument();\n        }\n        if (config.master) {\n            if (!this.masterPanel.isAttached) {\n                this.setupMasterPanel(DEFAULT_WORKSPACE_SIZE);\n            }\n            this.masterPanel.addWidget(widget);\n        } else {\n            if (!this.detailPanel.isAttached) {\n                this.addWidget(this.detailPanel);\n            }\n            this.dockpanel.addWidget(widget, {mode: \"split-right\"});\n        }\n        this.update();\n    }\n\n    /*********************************************************************\n     * Widget helper methods\n     */\n\n    _createWidgetAndNode({config, slot: slotname}) {\n        const node = this._createNode(slotname);\n        const table = config.table;\n        const viewer = document.createElement(\"perspective-viewer\");\n        viewer.setAttribute(\"slot\", node.querySelector(\"slot\").getAttribute(\"name\"));\n        if (table) {\n            viewer.setAttribute(\"table\", table);\n        }\n        return this._createWidget({config, node, viewer});\n    }\n\n    _gen_id() {\n        let genId = `PERSPECTIVE_GENERATED_ID_${ID_COUNTER++}`;\n        if (this.element.querySelector(`[slot=${genId}]`)) {\n            genId = this._gen_id();\n        }\n        return genId;\n    }\n\n    _createNode(slotname) {\n        let node = this.node.querySelector(`slot[name=${slotname}]`);\n        if (!node) {\n            const slot = document.createElement(\"slot\");\n            slotname = slotname || this._gen_id();\n            slot.setAttribute(\"name\", slotname);\n            const div = document.createElement(\"div\");\n            div.classList.add(\"viewer-container\");\n            div.appendChild(slot);\n            node = document.createElement(\"div\");\n            node.classList.add(\"workspace-widget\");\n            node.appendChild(div);\n        } else {\n            node = node.parentElement.parentElement;\n        }\n        return node;\n    }\n\n    _createWidget({config, node, viewer}) {\n        config.name = config.name || viewer.getAttribute(\"name\");\n        if (!node) {\n            const slotname = viewer.getAttribute(\"slot\");\n            node = this.node.querySelector(`slot[name=${slotname}]`);\n            if (!node) {\n                node = this._createNode(slotname);\n            } else {\n                node = node.parentElement.parentElement;\n            }\n        }\n        const table = this.tables.get(viewer.getAttribute(\"table\") || config.table);\n        const widget = new PerspectiveViewerWidget({node, viewer});\n        const event = new CustomEvent(\"workspace-new-view\", {\n            detail: {config, widget}\n        });\n        this.element.dispatchEvent(event);\n        widget.title.closable = true;\n        this.element.appendChild(widget.viewer);\n        if (table) {\n            widget.viewer.load(table);\n        }\n        widget.restore(config).then(() => {\n            this._addWidgetEventListeners(widget);\n        });\n        return widget;\n    }\n\n    _addWidgetEventListeners(widget) {\n        if (this.listeners.has(widget)) {\n            this.listeners.get(widget)();\n        }\n        const settings = event => {\n            if (event.detail) {\n                widget.title.className += \" settings_open\";\n            } else {\n                widget.title.className = widget.title.className.replace(/settings_open/g, \"\");\n            }\n        };\n        const contextMenu = event => this.showContextMenu(widget, event);\n        const updated = event => {\n            this.workspaceUpdated();\n            if (this.mode === MODE.LINKED) {\n                const config = event.target?.save();\n                if (config) {\n                    const selectable = this._linkedViewers.length > 0 && !!config[\"row-pivots\"];\n                    if (selectable !== !!config.selectable) {\n                        event.target.restore({selectable});\n                    }\n                }\n            }\n        };\n        widget.node.addEventListener(\"contextmenu\", contextMenu);\n        widget.viewer.addEventListener(\"perspective-toggle-settings\", settings);\n        widget.viewer.addEventListener(\"perspective-config-update\", updated);\n        widget.title.changed.connect(updated);\n\n        this.listeners.set(widget, () => {\n            widget.node.removeEventListener(\"contextmenu\", contextMenu);\n            widget.viewer.removeEventListener(\"perspective-toggle-settings\", settings);\n            widget.viewer.removeEventListener(\"perspective-config-update\", updated);\n            widget.title.changed.disconnect(updated);\n        });\n    }\n\n    getAllWidgets() {\n        return [...this.masterPanel.widgets, ...toArray(this.dockpanel.widgets())];\n    }\n\n    /***************************************************************************\n     *\n     * `workspace-layout-update` event\n     *\n     */\n\n    _fireUpdateEvent() {\n        const layout = this.save();\n        if (layout) {\n            const tables = {};\n            this.tables.forEach((value, key) => {\n                tables[key] = value;\n            });\n            this.element.dispatchEvent(new CustomEvent(\"workspace-layout-update\", {detail: {tables, layout}}));\n        }\n    }\n\n    workspaceUpdated() {\n        if (!this._save) {\n            this._save = debounce(() => this.dockpanel.mode !== \"single-document\" && this._fireUpdateEvent(), 500);\n        }\n        this._save();\n    }\n}\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport style from \"../less/workspace.less\";\nimport template from \"../html/workspace.html\";\nimport {bindTemplate} from \"@finos/perspective-viewer/dist/esm/utils\";\nimport {PerspectiveWorkspace, SIDE} from \"./workspace\";\nimport {MessageLoop} from \"@lumino/messaging\";\nimport {Widget} from \"@lumino/widgets\";\n\nimport injectedStyles from \"../less/injected.less\";\n\n/**\n * A Custom Element for coordinating a set of `<perspective-viewer>` light DOM\n * children.  `<perspective-workspace>` is built on Lumino.js to allow a more\n * app-like experience than `<perspective-viewer>`, providing\n * these features additionally:\n *\n * - Docking, arranging, tabbing and max/min-ing of `<perspective-viewer>`s.\n * - Trivial `<perspective-viewer>` duplication.\n * - Global Filter sidebar, for using selection state of a pivot table to filter\n *   siblings.\n * - Total persistence/serializable state and child state.\n * - Easy sharing/ownership of `Table()` among different `<perspective-viewer>`.\n * - A cool DOM-reactive API.\n *\n * There are a few ways to use this Custom Element.  In plain HTML, you can\n * express your initial view simply:\n *\n * ```html\n * <perspective-workspace>\n *     <perspective-viewer\n *         name=\"View One\"\n *         table=\"superstore\">\n *     </perspective-viewer>\n *\n *     <perspective-viewer\n *         row-pivots='[\"State\"]'\n *         name=\"View Two\"\n *         table=\"superstore\">\n *     </perspective-viewer>\n *\n * </perspective-workspace>\n * ```\n *\n * You can also use the DOM API in Javascript:\n *\n * ```javascript\n * const workspace = document.createElement(\"perspective-workspace\");\n * const viewer = document.createElement(\"perspective-viewer\");\n * workspace.appendChild(viewer);\n * document.body.appendChild(workspace);\n * ```\n *\n * This will yield a `<perspective-workspace> with the default layout.  To load\n * a `Table()`, add it to `tables` via the `Map()` API where it will be\n * auto-wired into all matching `<perspective-viewer>`s immediately:\n *\n * ```javascript\n * workspace.tables.set(\"superstore\", worker.table(my_data));\n * ```\n *\n *\n */\n@bindTemplate(template, style) // eslint-disable-next-line no-unused-vars\nclass PerspectiveWorkspaceElement extends HTMLElement {\n    /***************************************************************************\n     *\n     * Public\n     *\n     */\n\n    /**\n     * The side the Global Filter sidebar is placed relative to the main panel.\n     *\n     * @param {('left'|'right')} value\n     */\n    set side(value) {\n        this.setAttribute(\"side\", value);\n        if (this.workspace) {\n            this.workspace.side = value;\n        }\n    }\n\n    get side() {\n        return this.getAttribute(\"side\");\n    }\n\n    /**\n     * Persists this `<perspective-workspace>` to a token `Object`.  This object\n     * is JSON serializable and describes the state of the Workspace and it's\n     * child `<perspective-viewer>` elements.  Some important keys:\n     *\n     * - `viewers`: The serialized state of `<perspective-viewer>` children,\n     *   named by `slot`.\n     * - `detail`: The main layout.\n     * - `master`: The contents of the Global Filter sidebar.\n     *\n     * While the `table` attribute is persisted for each `perspective-viewer`,\n     * `Table`s themselves must be added to the `tables` property `Map()`\n     * separately.\n     *\n     * @return {Object} A configuration token, compatible with\n     * `restore(config)`.\n     * @example\n     * // Save this layout to local storage\n     * const workspace = document.querySelector(\"perspective-workspace\");\n     * localStorage.set(\"CONFIG\", JSON.stringify(workspace.save()));\n     */\n    save() {\n        return this.workspace.save();\n    }\n\n    /**\n     * Restore this `<perspective-workspace>` to a previous state captured by\n     * `save()`.  Calling this method will completely rewrite this element's\n     * `innerHTML`, but may reuse `<perspective-viewer>`  children depending\n     * on the `slot` attribute names.  However, it should always be possible\n     * to recreate any given state from within the UI itself, as the attributes\n     * on `<perspective-viewer>` itself create immutable views.\n     *\n     * While the `table` attribute is set for each `perspective-viewer`,\n     * `Table`s themselves must be added to the `tables` property `Map()`\n     * separately.\n     * @param {Object} config A configuration token, as returned by `save()`.\n     * @example\n     * // Restore this layout from local storage\n     * const workspace = document.querySelector(\"perspective-workspace\");\n     * workspace.restore(JSON.parse(localStorage.get(\"CONFIG\"));\n     *\n     * // Add `Table` separately.\n     * workspace.tables.set(\"superstore\", worker.table(data));\n     */\n    restore(layout) {\n        return this.workspace.restore(layout);\n    }\n\n    addTable(name, table) {\n        this.workspace.addTable(name, table);\n    }\n\n    getTable(name) {\n        return this.workspace.getTable(name);\n    }\n\n    removeTable(name) {\n        return this.workspace.removeTable(name);\n    }\n\n    /**\n     * A `Map()` of `perspective.Table()` by name.  The names set here will auto\n     * wire any child `perspective-viewer` elements in this Workspace's subtree,\n     * by looking up their respective `table` attribute.\n     *\n     * Calling methods on this `Map()` may have side-effects, as\n     * `PerspectiveViewerHTMLElement.load()` is called when a new `Table()` is\n     * set with a name matching an existing child `perspective-viewer`.\n     *\n     * @readonly\n     * @memberof PerspectiveWorkspaceElement\n     */\n    get tables() {\n        return this.workspace.tables;\n    }\n\n    /**\n     * Invalidate this component's dimensions and recalculate.\n     */\n    notifyResize() {\n        this.workspace.update();\n    }\n\n    _light_dom_changed() {\n        const viewers = Array.from(this.childNodes);\n        for (const viewer of viewers) {\n            if ([Node.TEXT_NODE, document.COMMENT_NODE].indexOf(viewer.nodeType) > -1) {\n                continue;\n            }\n            this.workspace.update_widget_for_viewer(viewer);\n        }\n        this.workspace.remove_unslotted_widgets(viewers);\n    }\n\n    _register_light_dom_listener() {\n        let observer = new MutationObserver(this._light_dom_changed.bind(this));\n        let config = {attributes: false, childList: true, subtree: true};\n        observer.observe(this, config);\n        this._light_dom_changed();\n    }\n\n    connectedCallback() {\n        this.side = this.side || SIDE.LEFT;\n\n        const container = this.shadowRoot.querySelector(\"#container\");\n        this.workspace = new PerspectiveWorkspace(this, {side: this.side});\n\n        this._register_light_dom_listener();\n\n        // TODO: check we only insert one of these\n        this._injectStyle = document.createElement(\"style\");\n        this._injectStyle.innerHTML = injectedStyles;\n        document.head.appendChild(this._injectStyle);\n\n        MessageLoop.sendMessage(this.workspace, Widget.Msg.BeforeAttach);\n        container.insertBefore(this.workspace.node, null);\n        MessageLoop.sendMessage(this.workspace, Widget.Msg.AfterAttach);\n\n        window.onresize = () => {\n            this.workspace.update();\n        };\n    }\n\n    disconnectedCallback() {\n        document.head.removeChild(this._injectStyle);\n    }\n}\n"],"sourceRoot":""}