{"version":3,"sources":["../../../src/js/workspace/dockpanel.js"],"names":["DockPanel","DiscreteDockPanel","PerspectiveTabBar","PerspectiveTabBarRenderer","PerspectiveDockPanelRenderer","Renderer","createTabBar","tabbar","renderer","addClass","PerspectiveDockPanel","constructor","_renderer","dock","_onTabDetachRequested","sender","args","widget","titles","owner","_drag","_promise","then","removeClass","mapWidgets","widgetFunc","layout","main","children","map","widgets","onAfterAttach","spacing","parseInt","window","getComputedStyle","node","padding"],"mappings":"AAAA;;;;;;;;AASA,SAAQA,SAAR,QAAwB,iBAAxB;AACA,SAAQC,iBAAR,QAAgC,YAAhC;AACA,SAAQC,iBAAR,QAAgC,UAAhC;AACA,SAAQC,yBAAR,QAAwC,kBAAxC;;AAEA,MAAMC,4BAAN,SAA2CJ,SAAS,CAACK,QAArD,CAA8D;AAC1DC,EAAAA,YAAY,GAAG;AACX,UAAMC,MAAM,GAAG,IAAIL,iBAAJ,CAAsB;AAACM,MAAAA,QAAQ,EAAE,IAAIL,yBAAJ;AAAX,KAAtB,CAAf;AACAI,IAAAA,MAAM,CAACE,QAAP,CAAgB,oBAAhB;AACA,WAAOF,MAAP;AACH;;AALyD;;AAQ9D,OAAO,MAAMG,oBAAN,SAAmCT,iBAAnC,CAAqD;AACxDU,EAAAA,WAAW,GAAG;AACV,UAAM;AAACH,MAAAA,QAAQ,EAAE,IAAIJ,4BAAJ;AAAX,KAAN;AACA,SAAKQ,SAAL,CAAeC,IAAf,GAAsB,IAAtB;AACH;;AAEDC,EAAAA,qBAAqB,CAACC,MAAD,EAASC,IAAT,EAAe;AAChC,UAAMF,qBAAN,CAA4BC,MAA5B,EAAoCC,IAApC,EADgC,CAEhC;;;AACA,UAAMC,MAAM,GAAGF,MAAM,CAACG,MAAP,CAAc,CAAd,EAAiBC,KAAhC;AACAF,IAAAA,MAAM,CAACR,QAAP,CAAgB,aAAhB;;AAEA,QAAI,KAAKW,KAAT,EAAgB;AACZ,WAAKA,KAAL,CAAWC,QAAX,CAAoBC,IAApB,CAAyB,MAAM;AAC3BL,QAAAA,MAAM,CAACM,WAAP,CAAmB,aAAnB;AACH,OAFD;AAGH;AACJ;;AAED,SAAOC,UAAP,CAAkBC,UAAlB,EAA8BC,MAA9B,EAAsC;AAClC,QAAIA,MAAM,CAACC,IAAX,EAAiB;AACbD,MAAAA,MAAM,CAACC,IAAP,GAAcjB,oBAAoB,CAACc,UAArB,CAAgCC,UAAhC,EAA4CC,MAAM,CAACC,IAAnD,CAAd;AACH,KAFD,MAEO,IAAID,MAAM,CAACE,QAAX,EAAqB;AACxBF,MAAAA,MAAM,CAACE,QAAP,GAAkBF,MAAM,CAACE,QAAP,CAAgBC,GAAhB,CAAoBZ,MAAM,IAAIP,oBAAoB,CAACc,UAArB,CAAgCC,UAAhC,EAA4CR,MAA5C,CAA9B,CAAlB;AACH,KAFM,MAEA,IAAIS,MAAM,CAACI,OAAX,EAAoB;AACvBJ,MAAAA,MAAM,CAACI,OAAP,GAAiBJ,MAAM,CAACI,OAAP,CAAeD,GAAf,CAAmBZ,MAAM,IAAIQ,UAAU,CAACR,MAAD,CAAvC,CAAjB;AACH;;AACD,WAAOS,MAAP;AACH;;AAEDK,EAAAA,aAAa,GAAG;AACZ,SAAKC,OAAL,GAAeC,QAAQ,CAACC,MAAM,CAACC,gBAAP,CAAwB,KAAKC,IAA7B,EAAmCC,OAApC,CAAR,IAAwD,CAAvE;AACH;;AAhCuD","sourcesContent":["/******************************************************************************\n *\n * Copyright (c) 2018, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport {DockPanel} from \"@lumino/widgets\";\nimport {DiscreteDockPanel} from \"./discrete\";\nimport {PerspectiveTabBar} from \"./tabbar\";\nimport {PerspectiveTabBarRenderer} from \"./tabbarrenderer\";\n\nclass PerspectiveDockPanelRenderer extends DockPanel.Renderer {\n    createTabBar() {\n        const tabbar = new PerspectiveTabBar({renderer: new PerspectiveTabBarRenderer()});\n        tabbar.addClass(\"p-DockPanel-tabBar\");\n        return tabbar;\n    }\n}\n\nexport class PerspectiveDockPanel extends DiscreteDockPanel {\n    constructor() {\n        super({renderer: new PerspectiveDockPanelRenderer()});\n        this._renderer.dock = this;\n    }\n\n    _onTabDetachRequested(sender, args) {\n        super._onTabDetachRequested(sender, args);\n        // blur widget on when it's being moved\n        const widget = sender.titles[0].owner;\n        widget.addClass(\"widget-blur\");\n\n        if (this._drag) {\n            this._drag._promise.then(() => {\n                widget.removeClass(\"widget-blur\");\n            });\n        }\n    }\n\n    static mapWidgets(widgetFunc, layout) {\n        if (layout.main) {\n            layout.main = PerspectiveDockPanel.mapWidgets(widgetFunc, layout.main);\n        } else if (layout.children) {\n            layout.children = layout.children.map(widget => PerspectiveDockPanel.mapWidgets(widgetFunc, widget));\n        } else if (layout.widgets) {\n            layout.widgets = layout.widgets.map(widget => widgetFunc(widget));\n        }\n        return layout;\n    }\n\n    onAfterAttach() {\n        this.spacing = parseInt(window.getComputedStyle(this.node).padding) || 0;\n    }\n}\n"],"file":"dockpanel.js"}