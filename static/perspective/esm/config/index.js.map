{"version":3,"sources":["../../../src/js/config/index.js"],"names":["DEFAULT_CONFIG","require","default","get_config_file","module","exports","get_types","Object","keys","get_config","types","get_type_config","type","config","assign","props","isObject","item","Array","isArray","mergeDeep","target","sources","length","source","shift","key","global","__PERSPECTIVE_CONFIG__","undefined","override_config","console","warn","window","__TEMPLATE_CONFIG__"],"mappings":"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","sourcesContent":["/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nconst DEFAULT_CONFIG = require(\"./settings.js\").default;\nconst get_config_file = require(\"./__node.js\").default;\n\nmodule.exports.get_types = function() {\n    return Object.keys(module.exports.get_config().types);\n};\n\nmodule.exports.get_type_config = function(type) {\n    const config = {};\n    if (module.exports.get_config().types[type]) {\n        Object.assign(config, module.exports.get_config().types[type]);\n    }\n    if (config.type) {\n        const props = module.exports.get_type_config(config.type);\n        Object.assign(props, config);\n        return props;\n    } else {\n        return config;\n    }\n};\n\nfunction isObject(item) {\n    return item && typeof item === \"object\" && !Array.isArray(item);\n}\n\nfunction mergeDeep(target, ...sources) {\n    if (!sources.length) return target;\n    const source = sources.shift();\n\n    if (isObject(target) && isObject(source)) {\n        for (const key in source) {\n            if (isObject(source[key])) {\n                if (!target[key]) Object.assign(target, {[key]: {}});\n                mergeDeep(target[key], source[key]);\n            } else {\n                Object.assign(target, {[key]: source[key]});\n            }\n        }\n    }\n\n    return mergeDeep(target, ...sources);\n}\n\nglobal.__PERSPECTIVE_CONFIG__ = undefined;\n\nmodule.exports.override_config = function(config) {\n    if (global.__PERSPECTIVE_CONFIG__) {\n        console.warn(\"Config already initialized!\");\n    }\n    global.__PERSPECTIVE_CONFIG__ = mergeDeep(DEFAULT_CONFIG, config);\n};\n\nmodule.exports.get_config = function get_config() {\n    if (!global.__PERSPECTIVE_CONFIG__) {\n        global.__PERSPECTIVE_CONFIG__ = mergeDeep(DEFAULT_CONFIG, typeof window === \"undefined\" ? get_config_file() : global.__TEMPLATE_CONFIG__ || {});\n    }\n    return global.__PERSPECTIVE_CONFIG__;\n};\n"],"file":"index.js"}