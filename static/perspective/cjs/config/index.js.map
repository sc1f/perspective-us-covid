{"version":3,"sources":["../../../src/js/config/index.js"],"names":["DEFAULT_CONFIG","require","get_config_file","module","Object","config","props","item","Array","sources","source","isObject","target","mergeDeep","global","console"],"mappings":";;;AAAA;;;;;;;;;;AASA,MAAMA,cAAc,GAAGC,OAAO,CAAPA,eAAO,CAAPA,CAAvB,OAAA;;AACA,MAAMC,eAAe,GAAGD,OAAO,CAAPA,aAAO,CAAPA,CAAxB,OAAA;;AAEAE,MAAM,CAANA,OAAAA,CAAAA,SAAAA,GAA2B,YAAW;AAClC,SAAOC,MAAM,CAANA,IAAAA,CAAYD,MAAM,CAANA,OAAAA,CAAAA,UAAAA,GAAnB,KAAOC,CAAP;AADJD,CAAAA;;AAIAA,MAAM,CAANA,OAAAA,CAAAA,eAAAA,GAAiC,UAAA,IAAA,EAAe;AAC5C,QAAME,MAAM,GAAZ,EAAA;;AACA,MAAIF,MAAM,CAANA,OAAAA,CAAAA,UAAAA,GAAAA,KAAAA,CAAJ,IAAIA,CAAJ,EAA6C;AACzCC,IAAAA,MAAM,CAANA,MAAAA,CAAAA,MAAAA,EAAsBD,MAAM,CAANA,OAAAA,CAAAA,UAAAA,GAAAA,KAAAA,CAAtBC,IAAsBD,CAAtBC;AACH;;AACD,MAAIC,MAAM,CAAV,IAAA,EAAiB;AACb,UAAMC,KAAK,GAAGH,MAAM,CAANA,OAAAA,CAAAA,eAAAA,CAA+BE,MAAM,CAAnD,IAAcF,CAAd;AACAC,IAAAA,MAAM,CAANA,MAAAA,CAAAA,KAAAA,EAAAA,MAAAA;AACA,WAAA,KAAA;AAHJ,GAAA,MAIO;AACH,WAAA,MAAA;AACH;AAXLD,CAAAA;;AAcA,SAAA,QAAA,CAAA,IAAA,EAAwB;AACpB,SAAOI,IAAI,IAAI,OAAA,IAAA,KAARA,QAAAA,IAAoC,CAACC,KAAK,CAALA,OAAAA,CAA5C,IAA4CA,CAA5C;AACH;;AAED,SAAA,SAAA,CAAA,MAAA,EAA2B,GAA3B,OAAA,EAAuC;AACnC,MAAI,CAACC,OAAO,CAAZ,MAAA,EAAqB,OAAA,MAAA;AACrB,QAAMC,MAAM,GAAGD,OAAO,CAAtB,KAAeA,EAAf;;AAEA,MAAIE,QAAQ,CAARA,MAAQ,CAARA,IAAoBA,QAAQ,CAAhC,MAAgC,CAAhC,EAA0C;AACtC,SAAK,MAAL,GAAA,IAAA,MAAA,EAA0B;AACtB,UAAIA,QAAQ,CAACD,MAAM,CAAnB,GAAmB,CAAP,CAAZ,EAA2B;AACvB,YAAI,CAACE,MAAM,CAAX,GAAW,CAAX,EAAkB,MAAM,CAAN,MAAA,CAAA,MAAA,EAAsB;AAAC,WAAA,GAAA,GAAO;AAAR,SAAtB;AAClBC,QAAAA,SAAS,CAACD,MAAM,CAAP,GAAO,CAAP,EAAcF,MAAM,CAA7BG,GAA6B,CAApB,CAATA;AAFJ,OAAA,MAGO;AACHT,QAAAA,MAAM,CAANA,MAAAA,CAAAA,MAAAA,EAAsB;AAAC,WAAA,GAAA,GAAOM,MAAM,CAAA,GAAA;AAAd,SAAtBN;AACH;AACJ;AACJ;;AAED,SAAOS,SAAS,CAAA,MAAA,EAAS,GAAzB,OAAgB,CAAhB;AACH;;AAEDC,MAAM,CAANA,sBAAAA,GAAAA,SAAAA;;AAEAX,MAAM,CAANA,OAAAA,CAAAA,eAAAA,GAAiC,UAAA,MAAA,EAAiB;AAC9C,MAAIW,MAAM,CAAV,sBAAA,EAAmC;AAC/BC,IAAAA,OAAO,CAAPA,IAAAA,CAAAA,6BAAAA;AACH;;AACDD,EAAAA,MAAM,CAANA,sBAAAA,GAAgCD,SAAS,CAAA,cAAA,EAAzCC,MAAyC,CAAzCA;AAJJX,CAAAA;;AAOAA,MAAM,CAANA,OAAAA,CAAAA,UAAAA,GAA4B,SAAA,UAAA,GAAsB;AAC9C,MAAI,CAACW,MAAM,CAAX,sBAAA,EAAoC;AAChCA,IAAAA,MAAM,CAANA,sBAAAA,GAAgCD,SAAS,CAAA,cAAA,EAAiB,OAAA,MAAA,KAAA,WAAA,GAAgCX,eAAhC,EAAA,GAAoDY,MAAM,CAANA,mBAAAA,IAA9GA,EAAyC,CAAzCA;AACH;;AACD,SAAOA,MAAM,CAAb,sBAAA;AAJJX,CAAAA","sourcesContent":["/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nconst DEFAULT_CONFIG = require(\"./settings.js\").default;\nconst get_config_file = require(\"./__node.js\").default;\n\nmodule.exports.get_types = function() {\n    return Object.keys(module.exports.get_config().types);\n};\n\nmodule.exports.get_type_config = function(type) {\n    const config = {};\n    if (module.exports.get_config().types[type]) {\n        Object.assign(config, module.exports.get_config().types[type]);\n    }\n    if (config.type) {\n        const props = module.exports.get_type_config(config.type);\n        Object.assign(props, config);\n        return props;\n    } else {\n        return config;\n    }\n};\n\nfunction isObject(item) {\n    return item && typeof item === \"object\" && !Array.isArray(item);\n}\n\nfunction mergeDeep(target, ...sources) {\n    if (!sources.length) return target;\n    const source = sources.shift();\n\n    if (isObject(target) && isObject(source)) {\n        for (const key in source) {\n            if (isObject(source[key])) {\n                if (!target[key]) Object.assign(target, {[key]: {}});\n                mergeDeep(target[key], source[key]);\n            } else {\n                Object.assign(target, {[key]: source[key]});\n            }\n        }\n    }\n\n    return mergeDeep(target, ...sources);\n}\n\nglobal.__PERSPECTIVE_CONFIG__ = undefined;\n\nmodule.exports.override_config = function(config) {\n    if (global.__PERSPECTIVE_CONFIG__) {\n        console.warn(\"Config already initialized!\");\n    }\n    global.__PERSPECTIVE_CONFIG__ = mergeDeep(DEFAULT_CONFIG, config);\n};\n\nmodule.exports.get_config = function get_config() {\n    if (!global.__PERSPECTIVE_CONFIG__) {\n        global.__PERSPECTIVE_CONFIG__ = mergeDeep(DEFAULT_CONFIG, typeof window === \"undefined\" ? get_config_file() : global.__TEMPLATE_CONFIG__ || {});\n    }\n    return global.__PERSPECTIVE_CONFIG__;\n};\n"],"file":"index.js"}